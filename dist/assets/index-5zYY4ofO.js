import{r as p,a as Ha,b as Ga,d as za,c as ee,R as Vs}from"./vendor-BvbJF06O.js";import{m as N,A as ue,R as Et,L as Or,C as ms,X as ps,Y as fs,T as Tt,a as gs,B as Ja,b as Ys,P as Va,c as Ya,d as Ka}from"./ui-Bmiqombg.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var Rr={exports:{}},Bt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qa=p,Za=Symbol.for("react.element"),Xa=Symbol.for("react.fragment"),en=Object.prototype.hasOwnProperty,tn=Qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sn={key:!0,ref:!0,__self:!0,__source:!0};function Mr(r,e,t){var a,n={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(a in e)en.call(e,a)&&!sn.hasOwnProperty(a)&&(n[a]=e[a]);if(r&&r.defaultProps)for(a in e=r.defaultProps,e)n[a]===void 0&&(n[a]=e[a]);return{$$typeof:Za,type:r,key:i,ref:o,props:n,_owner:tn.current}}Bt.Fragment=Xa;Bt.jsx=Mr;Bt.jsxs=Mr;Rr.exports=Bt;var s=Rr.exports,Dr,Ks=Ha;Dr=Ks.createRoot,Ks.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dt(){return dt=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},dt.apply(this,arguments)}var be;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(be||(be={}));const Qs="popstate";function rn(r){r===void 0&&(r={});function e(a,n){let{pathname:i,search:o,hash:l}=a.location;return xs("",{pathname:i,search:o,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function t(a,n){return typeof n=="string"?n:Pt(n)}return nn(e,t,null,r)}function W(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Lr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function an(){return Math.random().toString(36).substr(2,8)}function Zs(r,e){return{usr:r.state,key:r.key,idx:e}}function xs(r,e,t,a){return t===void 0&&(t=null),dt({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?ze(e):e,{state:t,key:e&&e.key||a||an()})}function Pt(r){let{pathname:e="/",search:t="",hash:a=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function ze(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let a=r.indexOf("?");a>=0&&(e.search=r.substr(a),r=r.substr(0,a)),r&&(e.pathname=r)}return e}function nn(r,e,t,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,o=n.history,l=be.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(dt({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=be.Pop;let m=u(),y=m==null?null:m-d;d=m,c&&c({action:l,location:w.location,delta:y})}function f(m,y){l=be.Push;let v=xs(w.location,m,y);d=u()+1;let k=Zs(v,d),j=w.createHref(v);try{o.pushState(k,"",j)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;n.location.assign(j)}i&&c&&c({action:l,location:w.location,delta:1})}function g(m,y){l=be.Replace;let v=xs(w.location,m,y);d=u();let k=Zs(v,d),j=w.createHref(v);o.replaceState(k,"",j),i&&c&&c({action:l,location:w.location,delta:0})}function x(m){let y=n.location.origin!=="null"?n.location.origin:n.location.href,v=typeof m=="string"?m:Pt(m);return v=v.replace(/ $/,"%20"),W(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let w={get action(){return l},get location(){return r(n,o)},listen(m){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Qs,h),c=m,()=>{n.removeEventListener(Qs,h),c=null}},createHref(m){return e(n,m)},createURL:x,encodeLocation(m){let y=x(m);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:g,go(m){return o.go(m)}};return w}var Xs;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Xs||(Xs={}));function on(r,e,t){return t===void 0&&(t="/"),ln(r,e,t,!1)}function ln(r,e,t,a){let n=typeof e=="string"?ze(e):e,i=Rs(n.pathname||"/",t);if(i==null)return null;let o=$r(r);cn(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=vn(i);l=yn(o[c],d,a)}return l}function $r(r,e,t,a){e===void 0&&(e=[]),t===void 0&&(t=[]),a===void 0&&(a="");let n=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(W(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=ve([a,c.relativePath]),u=t.concat(c);i.children&&i.children.length>0&&(W(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),$r(i.children,e,u,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:gn(d,i.index),routesMeta:u})};return r.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))n(i,o);else for(let c of Ur(i.path))n(i,o,c)}),e}function Ur(r){let e=r.split("/");if(e.length===0)return[];let[t,...a]=e,n=t.endsWith("?"),i=t.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let o=Ur(a.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),n&&l.push(...o),l.map(c=>r.startsWith("/")&&c===""?"/":c)}function cn(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:xn(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}const dn=/^:[\w-]+$/,un=3,hn=2,mn=1,pn=10,fn=-2,er=r=>r==="*";function gn(r,e){let t=r.split("/"),a=t.length;return t.some(er)&&(a+=fn),e&&(a+=hn),t.filter(n=>!er(n)).reduce((n,i)=>n+(dn.test(i)?un:i===""?mn:pn),a)}function xn(r,e){return r.length===e.length&&r.slice(0,-1).every((a,n)=>a===e[n])?r[r.length-1]-e[e.length-1]:0}function yn(r,e,t){let{routesMeta:a}=r,n={},i="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],d=l===a.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=tr({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&t&&!a[a.length-1].route.index&&(h=tr({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(n,h.params),o.push({params:n,pathname:ve([i,h.pathname]),pathnameBase:Nn(ve([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=ve([i,h.pathnameBase]))}return o}function tr(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,a]=bn(r.path,r.caseSensitive,r.end),n=e.match(t);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:a.reduce((d,u,h)=>{let{paramName:f,isOptional:g}=u;if(f==="*"){let w=l[h]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const x=l[h];return g&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:r}}function bn(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Lr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let a=[],n="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(a.push({paramName:"*"}),n+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":r!==""&&r!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),a]}function vn(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Lr(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Rs(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=r.charAt(t);return a&&a!=="/"?null:r.slice(t)||"/"}function wn(r,e){e===void 0&&(e="/");let{pathname:t,search:a="",hash:n=""}=typeof r=="string"?ze(r):r;return{pathname:t?t.startsWith("/")?t:jn(t,e):e,search:_n(a),hash:Sn(n)}}function jn(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function as(r,e,t,a){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kn(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ms(r,e){let t=kn(r);return e?t.map((a,n)=>n===t.length-1?a.pathname:a.pathnameBase):t.map(a=>a.pathnameBase)}function Ds(r,e,t,a){a===void 0&&(a=!1);let n;typeof r=="string"?n=ze(r):(n=dt({},r),W(!n.pathname||!n.pathname.includes("?"),as("?","pathname","search",n)),W(!n.pathname||!n.pathname.includes("#"),as("#","pathname","hash",n)),W(!n.search||!n.search.includes("#"),as("#","search","hash",n)));let i=r===""||n.pathname==="",o=i?"/":n.pathname,l;if(o==null)l=t;else{let h=e.length-1;if(!a&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;n.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=wn(n,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const ve=r=>r.join("/").replace(/\/\/+/g,"/"),Nn=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),_n=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Sn=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function An(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Br=["post","put","patch","delete"];new Set(Br);const Cn=["get",...Br];new Set(Cn);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ut(){return ut=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},ut.apply(this,arguments)}const Ls=p.createContext(null),En=p.createContext(null),je=p.createContext(null),Ft=p.createContext(null),ke=p.createContext({outlet:null,matches:[],isDataRoute:!1}),Fr=p.createContext(null);function Tn(r,e){let{relative:t}=e===void 0?{}:e;Je()||W(!1);let{basename:a,navigator:n}=p.useContext(je),{hash:i,pathname:o,search:l}=Wr(r,{relative:t}),c=o;return a!=="/"&&(c=o==="/"?a:ve([a,o])),n.createHref({pathname:c,search:l,hash:i})}function Je(){return p.useContext(Ft)!=null}function Ve(){return Je()||W(!1),p.useContext(Ft).location}function qr(r){p.useContext(je).static||p.useLayoutEffect(r)}function $s(){let{isDataRoute:r}=p.useContext(ke);return r?Wn():Pn()}function Pn(){Je()||W(!1);let r=p.useContext(Ls),{basename:e,future:t,navigator:a}=p.useContext(je),{matches:n}=p.useContext(ke),{pathname:i}=Ve(),o=JSON.stringify(Ms(n,t.v7_relativeSplatPath)),l=p.useRef(!1);return qr(()=>{l.current=!0}),p.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){a.go(d);return}let h=Ds(d,JSON.parse(o),i,u.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ve([e,h.pathname])),(u.replace?a.replace:a.push)(h,u.state,u)},[e,a,o,i,r])}function Wr(r,e){let{relative:t}=e===void 0?{}:e,{future:a}=p.useContext(je),{matches:n}=p.useContext(ke),{pathname:i}=Ve(),o=JSON.stringify(Ms(n,a.v7_relativeSplatPath));return p.useMemo(()=>Ds(r,JSON.parse(o),i,t==="path"),[r,o,i,t])}function In(r,e){return On(r,e)}function On(r,e,t,a){Je()||W(!1);let{navigator:n}=p.useContext(je),{matches:i}=p.useContext(ke),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Ve(),u;if(e){var h;let m=typeof e=="string"?ze(e):e;c==="/"||(h=m.pathname)!=null&&h.startsWith(c)||W(!1),u=m}else u=d;let f=u.pathname||"/",g=f;if(c!=="/"){let m=c.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(m.length).join("/")}let x=on(r,{pathname:g}),w=$n(x&&x.map(m=>Object.assign({},m,{params:Object.assign({},l,m.params),pathname:ve([c,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?c:ve([c,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,t,a);return e&&w?p.createElement(Ft.Provider,{value:{location:ut({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:be.Pop}},w):w}function Rn(){let r=qn(),e=An(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),t?p.createElement("pre",{style:n},t):null,null)}const Mn=p.createElement(Rn,null);class Dn extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?p.createElement(ke.Provider,{value:this.props.routeContext},p.createElement(Fr.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ln(r){let{routeContext:e,match:t,children:a}=r,n=p.useContext(Ls);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),p.createElement(ke.Provider,{value:e},a)}function $n(r,e,t,a){var n;if(e===void 0&&(e=[]),t===void 0&&(t=null),a===void 0&&(a=null),r==null){var i;if(!t)return null;if(t.errors)r=t.matches;else if((i=a)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,l=(n=t)==null?void 0:n.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||W(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(t&&a&&a.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:g}=t,x=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||x){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let g,x=!1,w=null,m=null;t&&(g=l&&h.route.id?l[h.route.id]:void 0,w=h.route.errorElement||Mn,c&&(d<0&&f===0?(x=!0,m=null):d===f&&(x=!0,m=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),v=()=>{let k;return g?k=w:x?k=m:h.route.Component?k=p.createElement(h.route.Component,null):h.route.element?k=h.route.element:k=u,p.createElement(Ln,{match:h,routeContext:{outlet:u,matches:y,isDataRoute:t!=null},children:k})};return t&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?p.createElement(Dn,{location:t.location,revalidation:t.revalidation,component:w,error:g,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var Hr=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Hr||{}),It=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(It||{});function Un(r){let e=p.useContext(Ls);return e||W(!1),e}function Bn(r){let e=p.useContext(En);return e||W(!1),e}function Fn(r){let e=p.useContext(ke);return e||W(!1),e}function Gr(r){let e=Fn(),t=e.matches[e.matches.length-1];return t.route.id||W(!1),t.route.id}function qn(){var r;let e=p.useContext(Fr),t=Bn(It.UseRouteError),a=Gr(It.UseRouteError);return e!==void 0?e:(r=t.errors)==null?void 0:r[a]}function Wn(){let{router:r}=Un(Hr.UseNavigateStable),e=Gr(It.UseNavigateStable),t=p.useRef(!1);return qr(()=>{t.current=!0}),p.useCallback(function(n,i){i===void 0&&(i={}),t.current&&(typeof n=="number"?r.navigate(n):r.navigate(n,ut({fromRouteId:e},i)))},[r,e])}function Hn(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function zr(r){let{to:e,replace:t,state:a,relative:n}=r;Je()||W(!1);let{future:i,static:o}=p.useContext(je),{matches:l}=p.useContext(ke),{pathname:c}=Ve(),d=$s(),u=Ds(e,Ms(l,i.v7_relativeSplatPath),c,n==="path"),h=JSON.stringify(u);return p.useEffect(()=>d(JSON.parse(h),{replace:t,state:a,relative:n}),[d,h,n,t,a]),null}function X(r){W(!1)}function Gn(r){let{basename:e="/",children:t=null,location:a,navigationType:n=be.Pop,navigator:i,static:o=!1,future:l}=r;Je()&&W(!1);let c=e.replace(/^\/*/,"/"),d=p.useMemo(()=>({basename:c,navigator:i,static:o,future:ut({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof a=="string"&&(a=ze(a));let{pathname:u="/",search:h="",hash:f="",state:g=null,key:x="default"}=a,w=p.useMemo(()=>{let m=Rs(u,c);return m==null?null:{location:{pathname:m,search:h,hash:f,state:g,key:x},navigationType:n}},[c,u,h,f,g,x,n]);return w==null?null:p.createElement(je.Provider,{value:d},p.createElement(Ft.Provider,{children:t,value:w}))}function zn(r){let{children:e,location:t}=r;return In(ys(e),t)}new Promise(()=>{});function ys(r,e){e===void 0&&(e=[]);let t=[];return p.Children.forEach(r,(a,n)=>{if(!p.isValidElement(a))return;let i=[...e,n];if(a.type===p.Fragment){t.push.apply(t,ys(a.props.children,i));return}a.type!==X&&W(!1),!a.props.index||!a.props.children||W(!1);let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=ys(a.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bs(){return bs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},bs.apply(this,arguments)}function Jn(r,e){if(r==null)return{};var t={},a=Object.keys(r),n,i;for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&(t[n]=r[n]);return t}function Vn(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Yn(r,e){return r.button===0&&(!e||e==="_self")&&!Vn(r)}const Kn=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Qn="6";try{window.__reactRouterVersion=Qn}catch{}const Zn="startTransition",sr=Ga[Zn];function Xn(r){let{basename:e,children:t,future:a,window:n}=r,i=p.useRef();i.current==null&&(i.current=rn({window:n,v5Compat:!0}));let o=i.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:d}=a||{},u=p.useCallback(h=>{d&&sr?sr(()=>c(h)):c(h)},[c,d]);return p.useLayoutEffect(()=>o.listen(u),[o,u]),p.useEffect(()=>Hn(a),[a]),p.createElement(Gn,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:a})}const ei=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ti=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,at=p.forwardRef(function(e,t){let{onClick:a,relative:n,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=e,f=Jn(e,Kn),{basename:g}=p.useContext(je),x,w=!1;if(typeof d=="string"&&ti.test(d)&&(x=d,ei))try{let k=new URL(window.location.href),j=d.startsWith("//")?new URL(k.protocol+d):new URL(d),A=Rs(j.pathname,g);j.origin===k.origin&&A!=null?d=A+j.search+j.hash:w=!0}catch{}let m=Tn(d,{relative:n}),y=si(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:n,viewTransition:h});function v(k){a&&a(k),k.defaultPrevented||y(k)}return p.createElement("a",bs({},f,{href:x||m,onClick:w||i?a:v,ref:t,target:c}))});var rr;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(rr||(rr={}));var ar;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(ar||(ar={}));function si(r,e){let{target:t,replace:a,state:n,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=$s(),d=Ve(),u=Wr(r,{relative:o});return p.useCallback(h=>{if(Yn(h,t)){h.preventDefault();let f=a!==void 0?a:Pt(d)===Pt(u);c(r,{replace:f,state:n,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,a,n,t,r,i,o,l])}let ri={data:""},ai=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||ri,ni=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ii=/\/\*[^]*?\*\/|  +/g,nr=/\n+/g,xe=(r,e)=>{let t="",a="",n="";for(let i in r){let o=r[i];i[0]=="@"?i[1]=="i"?t=i+" "+o+";":a+=i[1]=="f"?xe(o,i):i+"{"+xe(o,i[1]=="k"?"":e)+"}":typeof o=="object"?a+=xe(o,e?e.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=xe.p?xe.p(i,o):i+":"+o+";")}return t+(e&&n?e+"{"+n+"}":n)+a},ie={},Jr=r=>{if(typeof r=="object"){let e="";for(let t in r)e+=t+Jr(r[t]);return e}return r},oi=(r,e,t,a,n)=>{let i=Jr(r),o=ie[i]||(ie[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!ie[o]){let c=i!==r?r:(d=>{let u,h,f=[{}];for(;u=ni.exec(d.replace(ii,""));)u[4]?f.shift():u[3]?(h=u[3].replace(nr," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(nr," ").trim();return f[0]})(r);ie[o]=xe(n?{["@keyframes "+o]:c}:c,t?"":"."+o)}let l=t&&ie.g?ie.g:null;return t&&(ie.g=ie[o]),((c,d,u,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(ie[o],e,a,l),o},li=(r,e,t)=>r.reduce((a,n,i)=>{let o=e[i];if(o&&o.call){let l=o(t),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":xe(l,""):l===!1?"":l}return a+n+(o??"")},"");function qt(r){let e=this||{},t=r.call?r(e.p):r;return oi(t.unshift?t.raw?li(t,[].slice.call(arguments,1),e.p):t.reduce((a,n)=>Object.assign(a,n&&n.call?n(e.p):n),{}):t,ai(e.target),e.g,e.o,e.k)}let Vr,vs,ws;qt.bind({g:1});let he=qt.bind({k:1});function ci(r,e,t,a){xe.p=e,Vr=r,vs=t,ws=a}function Ne(r,e){let t=this||{};return function(){let a=arguments;function n(i,o){let l=Object.assign({},i),c=l.className||n.className;t.p=Object.assign({theme:vs&&vs()},l),t.o=/ *go\d+/.test(c),l.className=qt.apply(t,a)+(c?" "+c:"");let d=r;return r[0]&&(d=l.as||r,delete l.as),ws&&d[0]&&ws(l),Vr(d,l)}return n}}var di=r=>typeof r=="function",Ot=(r,e)=>di(r)?r(e):r,ui=(()=>{let r=0;return()=>(++r).toString()})(),Yr=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");r=!e||e.matches}return r}})(),hi=20,Kr=(r,e)=>{switch(e.type){case 0:return{...r,toasts:[e.toast,...r.toasts].slice(0,hi)};case 1:return{...r,toasts:r.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:t}=e;return Kr(r,{type:r.toasts.find(i=>i.id===t.id)?1:0,toast:t});case 3:let{toastId:a}=e;return{...r,toasts:r.toasts.map(i=>i.id===a||a===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...r,pausedAt:e.time};case 6:let n=e.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+n}))}}},Ct=[],Te={toasts:[],pausedAt:void 0},Ie=r=>{Te=Kr(Te,r),Ct.forEach(e=>{e(Te)})},mi={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},pi=(r={})=>{let[e,t]=p.useState(Te),a=p.useRef(Te);p.useEffect(()=>(a.current!==Te&&t(Te),Ct.push(t),()=>{let i=Ct.indexOf(t);i>-1&&Ct.splice(i,1)}),[]);let n=e.toasts.map(i=>{var o,l,c;return{...r,...r[i.type],...i,removeDelay:i.removeDelay||((o=r[i.type])==null?void 0:o.removeDelay)||(r==null?void 0:r.removeDelay),duration:i.duration||((l=r[i.type])==null?void 0:l.duration)||(r==null?void 0:r.duration)||mi[i.type],style:{...r.style,...(c=r[i.type])==null?void 0:c.style,...i.style}}});return{...e,toasts:n}},fi=(r,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...t,id:(t==null?void 0:t.id)||ui()}),yt=r=>(e,t)=>{let a=fi(e,r,t);return Ie({type:2,toast:a}),a.id},J=(r,e)=>yt("blank")(r,e);J.error=yt("error");J.success=yt("success");J.loading=yt("loading");J.custom=yt("custom");J.dismiss=r=>{Ie({type:3,toastId:r})};J.remove=r=>Ie({type:4,toastId:r});J.promise=(r,e,t)=>{let a=J.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof r=="function"&&(r=r()),r.then(n=>{let i=e.success?Ot(e.success,n):void 0;return i?J.success(i,{id:a,...t,...t==null?void 0:t.success}):J.dismiss(a),n}).catch(n=>{let i=e.error?Ot(e.error,n):void 0;i?J.error(i,{id:a,...t,...t==null?void 0:t.error}):J.dismiss(a)}),r};var gi=(r,e)=>{Ie({type:1,toast:{id:r,height:e}})},xi=()=>{Ie({type:5,time:Date.now()})},nt=new Map,yi=1e3,bi=(r,e=yi)=>{if(nt.has(r))return;let t=setTimeout(()=>{nt.delete(r),Ie({type:4,toastId:r})},e);nt.set(r,t)},vi=r=>{let{toasts:e,pausedAt:t}=pi(r);p.useEffect(()=>{if(t)return;let i=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&J.dismiss(l.id);return}return setTimeout(()=>J.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,t]);let a=p.useCallback(()=>{t&&Ie({type:6,time:Date.now()})},[t]),n=p.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:d}=o||{},u=e.filter(g=>(g.position||d)===(i.position||d)&&g.height),h=u.findIndex(g=>g.id===i.id),f=u.filter((g,x)=>x<h&&g.visible).length;return u.filter(g=>g.visible).slice(...l?[f+1]:[0,f]).reduce((g,x)=>g+(x.height||0)+c,0)},[e]);return p.useEffect(()=>{e.forEach(i=>{if(i.dismissed)bi(i.id,i.removeDelay);else{let o=nt.get(i.id);o&&(clearTimeout(o),nt.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:gi,startPause:xi,endPause:a,calculateOffset:n}}},wi=he`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ji=he`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ki=he`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ni=Ne("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${wi} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ji} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ki} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,_i=he`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Si=Ne("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${_i} 1s linear infinite;
`,Ai=he`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ci=he`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ei=Ne("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ai} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ci} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ti=Ne("div")`
  position: absolute;
`,Pi=Ne("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Ii=he`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Oi=Ne("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Ii} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Ri=({toast:r})=>{let{icon:e,type:t,iconTheme:a}=r;return e!==void 0?typeof e=="string"?p.createElement(Oi,null,e):e:t==="blank"?null:p.createElement(Pi,null,p.createElement(Si,{...a}),t!=="loading"&&p.createElement(Ti,null,t==="error"?p.createElement(Ni,{...a}):p.createElement(Ei,{...a})))},Mi=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Di=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,Li="0%{opacity:0;} 100%{opacity:1;}",$i="0%{opacity:1;} 100%{opacity:0;}",Ui=Ne("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Bi=Ne("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Fi=(r,e)=>{let t=r.includes("top")?1:-1,[a,n]=Yr()?[Li,$i]:[Mi(t),Di(t)];return{animation:e?`${he(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${he(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},qi=p.memo(({toast:r,position:e,style:t,children:a})=>{let n=r.height?Fi(r.position||e||"top-center",r.visible):{opacity:0},i=p.createElement(Ri,{toast:r}),o=p.createElement(Bi,{...r.ariaProps},Ot(r.message,r));return p.createElement(Ui,{className:r.className,style:{...n,...t,...r.style}},typeof a=="function"?a({icon:i,message:o}):p.createElement(p.Fragment,null,i,o))});ci(p.createElement);var Wi=({id:r,className:e,style:t,onHeightUpdate:a,children:n})=>{let i=p.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;a(r,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[r,a]);return p.createElement("div",{ref:i,className:e,style:t},n)},Hi=(r,e)=>{let t=r.includes("top"),a=t?{top:0}:{bottom:0},n=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Yr()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...a,...n}},Gi=qt`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,jt=16,zi=({reverseOrder:r,position:e="top-center",toastOptions:t,gutter:a,children:n,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:c}=vi(t);return p.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:jt,left:jt,right:jt,bottom:jt,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let u=d.position||e,h=c.calculateOffset(d,{reverseOrder:r,gutter:a,defaultPosition:e}),f=Hi(u,h);return p.createElement(Wi,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?Gi:"",style:f},d.type==="custom"?Ot(d.message,d):n?n(d):p.createElement(qi,{toast:d,position:u}))}))},M=J;const Ji="modulepreload",Vi=function(r){return"/"+r},ir={},bt=function(e,t,a){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(t.map(c=>{if(c=Vi(c),c in ir)return;ir[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Ji,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Yi=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>bt(async()=>{const{default:a}=await Promise.resolve().then(()=>Ye);return{default:a}},void 0).then(({default:a})=>a(...t)):e=fetch,(...t)=>e(...t)};class Us extends Error{constructor(e,t="FunctionsError",a){super(e),this.name=t,this.context=a}}class Ki extends Us{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Qi extends Us{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Zi extends Us{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var js;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(js||(js={}));var Xi=function(r,e,t,a){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(r,e||[])).next())})};class eo{constructor(e,{headers:t={},customFetch:a,region:n=js.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Yi(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var a;return Xi(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=t;let l={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:d}).catch(x=>{throw new Ki(x)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new Qi(u);if(!u.ok)throw new Zi(u);let f=((a=u.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),g;return f==="application/json"?g=yield u.json():f==="application/octet-stream"?g=yield u.blob():f==="text/event-stream"?g=u:f==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}}var K={},Bs={},Wt={},vt={},Ht={},Gt={},to=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},We=to();const so=We.fetch,Qr=We.fetch.bind(We),Zr=We.Headers,ro=We.Request,ao=We.Response,Ye=Object.freeze(Object.defineProperty({__proto__:null,Headers:Zr,Request:ro,Response:ao,default:Qr,fetch:so},Symbol.toStringTag,{value:"Module"})),no=za(Ye);var zt={};Object.defineProperty(zt,"__esModule",{value:!0});let io=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};zt.default=io;var Xr=ee&&ee.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gt,"__esModule",{value:!0});const oo=Xr(no),lo=Xr(zt);let co=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=oo.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let n=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,u=null,h=null,f=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const w=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),m=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&m&&m.length>1&&(h=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const w=await i.text();try{d=JSON.parse(w),Array.isArray(d)&&i.status===404&&(u=[],d=null,f=200,g="OK")}catch{i.status===404&&w===""?(f=204,g="No Content"):d={message:w}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,g="OK"),d&&this.shouldThrowOnError)throw new lo.default(d)}return{error:d,data:u,count:h,status:f,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};Gt.default=co;var uo=ee&&ee.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ht,"__esModule",{value:!0});const ho=uo(Gt);let mo=class extends ho.default{select(e){let t=!1;const a=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:a,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:a=t}={}){const n=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:a,referencedTable:n=a}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:a=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,a?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ht.default=mo;var po=ee&&ee.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vt,"__esModule",{value:!0});const fo=po(Ht);let go=class extends fo.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const a=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${a})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:a,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=a===void 0?"":`(${a})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,a])=>{this.url.searchParams.append(t,`eq.${a}`)}),this}not(e,t,a){return this.url.searchParams.append(e,`not.${t}.${a}`),this}or(e,{foreignTable:t,referencedTable:a=t}={}){const n=a?`${a}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,a){return this.url.searchParams.append(e,`${t}.${a}`),this}};vt.default=go;var xo=ee&&ee.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wt,"__esModule",{value:!0});const et=xo(vt);let yo=class{constructor(e,{headers:t={},schema:a,fetch:n}){this.url=e,this.headers=t,this.schema=a,this.fetch=n}select(e,{head:t=!1,count:a}={}){const n=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),a&&(this.headers.Prefer=`count=${a}`),new et.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:a=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),a||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new et.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:a=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${a?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new et.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const a="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new et.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",a=[];return e&&a.push(`count=${e}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new et.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Wt.default=yo;var Jt={},Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.version=void 0;Vt.version="0.0.0-automated";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.DEFAULT_HEADERS=void 0;const bo=Vt;Jt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${bo.version}`};var ea=ee&&ee.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bs,"__esModule",{value:!0});const vo=ea(Wt),wo=ea(vt),jo=Jt;let ko=class ta{constructor(e,{headers:t={},schema:a,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},jo.DEFAULT_HEADERS),t),this.schemaName=a,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new vo.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ta(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:a=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;a||n?(o=a?"HEAD":"GET",Object.entries(t).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=t);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new wo.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Bs.default=ko;var Ke=ee&&ee.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(K,"__esModule",{value:!0});K.PostgrestError=K.PostgrestBuilder=K.PostgrestTransformBuilder=K.PostgrestFilterBuilder=K.PostgrestQueryBuilder=K.PostgrestClient=void 0;const sa=Ke(Bs);K.PostgrestClient=sa.default;const ra=Ke(Wt);K.PostgrestQueryBuilder=ra.default;const aa=Ke(vt);K.PostgrestFilterBuilder=aa.default;const na=Ke(Ht);K.PostgrestTransformBuilder=na.default;const ia=Ke(Gt);K.PostgrestBuilder=ia.default;const oa=Ke(zt);K.PostgrestError=oa.default;var No=K.default={PostgrestClient:sa.default,PostgrestQueryBuilder:ra.default,PostgrestFilterBuilder:aa.default,PostgrestTransformBuilder:na.default,PostgrestBuilder:ia.default,PostgrestError:oa.default};const{PostgrestClient:_o,PostgrestQueryBuilder:Yu,PostgrestFilterBuilder:Ku,PostgrestTransformBuilder:Qu,PostgrestBuilder:Zu,PostgrestError:Xu}=No;let ks;typeof window>"u"?ks=require("ws"):ks=window.WebSocket;const So=ks,Ao="2.11.10",Co={"X-Client-Info":`realtime-js/${Ao}`},Eo="1.0.0",la=1e4,To=1e3;var Fe;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Fe||(Fe={}));var z;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(z||(z={}));var re;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(re||(re={}));var Ns;(function(r){r.websocket="websocket"})(Ns||(Ns={}));var Ee;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Ee||(Ee={}));class Po{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),a=new TextDecoder;return this._decodeBroadcast(e,t,a)}_decodeBroadcast(e,t,a){const n=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=a.decode(e.slice(o,o+n));o=o+n;const c=a.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(a.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class ca{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var q;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(q||(q={}));const or=(r,e,t={})=>{var a;const n=(a=t.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(e).reduce((i,o)=>(i[o]=Io(o,r,e,n),i),{})},Io=(r,e,t,a)=>{const n=e.find(l=>l.name===r),i=n==null?void 0:n.type,o=t[r];return i&&!a.includes(i)?da(i,o):_s(o)},da=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Do(e,t)}switch(r){case q.bool:return Oo(e);case q.float4:case q.float8:case q.int2:case q.int4:case q.int8:case q.numeric:case q.oid:return Ro(e);case q.json:case q.jsonb:return Mo(e);case q.timestamp:return Lo(e);case q.abstime:case q.date:case q.daterange:case q.int4range:case q.int8range:case q.money:case q.reltime:case q.text:case q.time:case q.timestamptz:case q.timetz:case q.tsrange:case q.tstzrange:return _s(e);default:return _s(e)}},_s=r=>r,Oo=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Ro=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Mo=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Do=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,a=r[t];if(r[0]==="{"&&a==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>da(e,l))}return r},Lo=r=>typeof r=="string"?r.replace(" ","T"):r,ua=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ns{constructor(e,t,a={},n=la){this.channel=e,this.event=t,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var a;return this._hasReceived(e)&&t((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(a=>a.status===e).forEach(a=>a.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var lr;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(lr||(lr={}));class it{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=it.syncState(this.state,n,i,o),this.pendingDiffs.forEach(c=>{this.state=it.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=it.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,a,n){const i=this.cloneDeep(e),o=this.transformState(t),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const f=u.map(m=>m.presence_ref),g=h.map(m=>m.presence_ref),x=u.filter(m=>g.indexOf(m.presence_ref)<0),w=h.filter(m=>f.indexOf(m.presence_ref)<0);x.length>0&&(l[d]=x),w.length>0&&(c[d]=w)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},a,n)}static syncDiff(e,t,a,n){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(g=>g.presence_ref),f=u.filter(g=>h.indexOf(g.presence_ref)<0);e[l].unshift(...f)}a(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,n(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(a=>t(a,e[a]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,a)=>{const n=e[a];return"metas"in n?t[a]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[a]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cr;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(cr||(cr={}));var dr;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(dr||(dr={}));var de;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(de||(de={}));class Fs{constructor(e,t={config:{}},a){this.topic=e,this.params=t,this.socket=a,this.bindings={},this.state=z.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ns(this,re.join,this.params,this.timeout),this.rejoinTimer=new ca(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=z.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=z.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=z.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=z.errored,this.rejoinTimer.scheduleTimeout())}),this._on(re.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new it(this),this.broadcastEndpointURL=ua(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var a,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(de.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(de.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(u=>u.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(de.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,g=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,x=[];for(let w=0;w<g;w++){const m=f[w],{filter:{event:y,schema:v,table:k,filter:j}}=m,A=u&&u[w];if(A&&A.event===y&&A.schema===v&&A.table===k&&A.filter===j)x.push(Object.assign(Object.assign({},m),{id:A.id}));else{this.unsubscribe(),this.state=z.errored,e==null||e(de.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(de.SUBSCRIBED);return}}).receive("error",u=>{this.state=z.errored,e==null||e(de.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(de.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,a){return this._on(e,t,a)}async send(e,t={}){var a,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=t.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=z.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(re.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(a=>{const n=new ns(this,re.leave,{},e);n.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,a){const n=new AbortController,i=setTimeout(()=>n.abort(),a),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o}_push(e,t,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new ns(this,e,t,a);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,a){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,a){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=re;if(a&&[l,c,d,u].indexOf(o)>=0&&a!==this._joinRef())return;let f=this._onMessage(o,t,a);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var x,w,m;return((x=g.filter)===null||x===void 0?void 0:x.event)==="*"||((m=(w=g.filter)===null||w===void 0?void 0:w.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(g=>g.callback(f,a)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var x,w,m,y,v,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const j=g.id,A=(x=g.filter)===null||x===void 0?void 0:x.event;return j&&((w=t.ids)===null||w===void 0?void 0:w.includes(j))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const j=(v=(y=g==null?void 0:g.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return j==="*"||j===((k=t==null?void 0:t.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:w,table:m,commit_timestamp:y,type:v,errors:k}=x;f=Object.assign(Object.assign({},{schema:w,table:m,commit_timestamp:y,eventType:v,new:{},old:{},errors:k}),this._getPayloadRecords(x))}g.callback(f,a)})}_isClosed(){return this.state===z.closed}_isJoined(){return this.state===z.joined}_isJoining(){return this.state===z.joining}_isLeaving(){return this.state===z.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,a){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:a};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const a=e.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&Fs.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const a in e)if(e[a]!==t[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(re.close,{},e)}_onError(e){this._on(re.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=z.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=or(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=or(e.columns,e.old_record)),t}}const ur=()=>{},$o=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Uo{constructor(e,t){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Co,this.params={},this.timeout=la,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ur,this.ref=0,this.logger=ur,this.conn=null,this.sendBuffer=[],this.serializer=new Po,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>bt(async()=>{const{default:c}=await Promise.resolve().then(()=>Ye);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Ns.websocket}`,this.httpEndpoint=ua(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(a=t==null?void 0:t.params)===null||a===void 0?void 0:a.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ca(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=So),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Bo(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Eo}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(a=>a.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(a=>a._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,a){this.logger(e,t,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Fe.connecting:return Ee.Connecting;case Fe.open:return Ee.Open;case Fe.closing:return Ee.Closing;default:return Ee.Closed}}isConnected(){return this.connectionState()===Ee.Open}channel(e,t={config:{}}){const a=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===a);if(n)return n;{const i=new Fs(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:a,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${a} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(a=>{t&&a.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),a.joinedOnce&&a._isJoined()&&a._push(re.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(To,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(a=>a.topic===e&&(a._isJoined()||a._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:a,event:n,payload:i,ref:o}=t;a==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${a} ${n} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(a)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(re.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const a=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${a}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const a=new Blob([$o],{type:"application/javascript"});t=URL.createObjectURL(a)}return t}}class Bo{constructor(e,t,a){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Fe.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=a.close}}class qs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function H(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Fo extends qs{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ss extends qs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var qo=function(r,e,t,a){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(r,e||[])).next())})};const ha=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>bt(async()=>{const{default:a}=await Promise.resolve().then(()=>Ye);return{default:a}},void 0).then(({default:a})=>a(...t)):e=fetch,(...t)=>e(...t)},Wo=()=>qo(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield bt(()=>Promise.resolve().then(()=>Ye),void 0)).Response:Response}),As=r=>{if(Array.isArray(r))return r.map(t=>As(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,a])=>{const n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=As(a)}),e};var Oe=function(r,e,t,a){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(r,e||[])).next())})};const is=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Ho=(r,e,t)=>Oe(void 0,void 0,void 0,function*(){const a=yield Wo();r instanceof a&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{e(new Fo(is(n),r.status||500))}).catch(n=>{e(new Ss(is(n),n))}):e(new Ss(is(r),r))}),Go=(r,e,t,a)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a&&(n.body=JSON.stringify(a)),Object.assign(Object.assign({},n),t))};function wt(r,e,t,a,n,i){return Oe(this,void 0,void 0,function*(){return new Promise((o,l)=>{r(t,Go(e,a,n,i)).then(c=>{if(!c.ok)throw c;return a!=null&&a.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Ho(c,l,a))})})}function Rt(r,e,t,a){return Oe(this,void 0,void 0,function*(){return wt(r,"GET",e,t,a)})}function ge(r,e,t,a,n){return Oe(this,void 0,void 0,function*(){return wt(r,"POST",e,a,n,t)})}function zo(r,e,t,a,n){return Oe(this,void 0,void 0,function*(){return wt(r,"PUT",e,a,n,t)})}function Jo(r,e,t,a){return Oe(this,void 0,void 0,function*(){return wt(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),a)})}function ma(r,e,t,a,n){return Oe(this,void 0,void 0,function*(){return wt(r,"DELETE",e,a,n,t)})}var V=function(r,e,t,a){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(r,e||[])).next())})};const Vo={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Yo{constructor(e,t={},a,n){this.url=e,this.headers=t,this.bucketId=a,this.fetch=ha(n)}uploadOrUpdate(e,t,a,n){return V(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},hr),n);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=a,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(t),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(H(i))return{data:null,error:i};throw i}})}upload(e,t,a){return V(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,a)})}uploadToSignedUrl(e,t,a,n){return V(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:hr.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",d.cacheControl)):(c=a,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(H(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return V(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const i=yield ge(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new qs("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(a){if(H(a))return{data:null,error:a};throw a}})}update(e,t,a){return V(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,a)})}move(e,t,a){return V(this,void 0,void 0,function*(){try{return{data:yield ge(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}})}copy(e,t,a){return V(this,void 0,void 0,function*(){try{return{data:{path:(yield ge(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,a){return V(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield ge(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const o=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,a){return V(this,void 0,void 0,function*(){try{const n=yield ge(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}})}download(e,t){return V(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Rt(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(H(l))return{data:null,error:l};throw l}})}info(e){return V(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const a=yield Rt(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:As(a),error:null}}catch(a){if(H(a))return{data:null,error:a};throw a}})}exists(e){return V(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Jo(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(H(a)&&a instanceof Ss){const n=a.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:a}}throw a}})}getPublicUrl(e,t){const a=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${a}${d}`)}}}remove(e){return V(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}list(e,t,a){return V(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Vo),t),{prefix:e||""});return{data:yield ge(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ko="2.7.1",Qo={"X-Client-Info":`storage-js/${Ko}`};var Me=function(r,e,t,a){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(r,e||[])).next())})};class Zo{constructor(e,t={},a){this.url=e,this.headers=Object.assign(Object.assign({},Qo),t),this.fetch=ha(a)}listBuckets(){return Me(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(H(e))return{data:null,error:e};throw e}})}getBucket(e){return Me(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Me(this,void 0,void 0,function*(){try{return{data:yield ge(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(H(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return Me(this,void 0,void 0,function*(){try{return{data:yield zo(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(H(a))return{data:null,error:a};throw a}})}emptyBucket(e){return Me(this,void 0,void 0,function*(){try{return{data:yield ge(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Me(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}}class Xo extends Zo{constructor(e,t={},a){super(e,t,a)}from(e){return new Yo(this.url,this.headers,e,this.fetch)}}const el="2.50.0";let rt="";typeof Deno<"u"?rt="deno":typeof document<"u"?rt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rt="react-native":rt="node";const tl={"X-Client-Info":`supabase-js-${rt}/${el}`},sl={headers:tl},rl={schema:"public"},al={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nl={};var il=function(r,e,t,a){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(r,e||[])).next())})};const ol=r=>{let e;return r?e=r:typeof fetch>"u"?e=Qr:e=fetch,(...t)=>e(...t)},ll=()=>typeof Headers>"u"?Zr:Headers,cl=(r,e,t)=>{const a=ol(t),n=ll();return(i,o)=>il(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:r;let d=new n(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",r),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),a(i,Object.assign(Object.assign({},o),{headers:d}))})};var dl=function(r,e,t,a){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(r,e||[])).next())})};function ul(r){return r.endsWith("/")?r:r+"/"}function hl(r,e){var t,a;const{db:n,auth:i,realtime:o,global:l}=r,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(a=l==null?void 0:l.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>dl(this,void 0,void 0,function*(){return""})};return r.accessToken?f.accessToken=r.accessToken:delete f.accessToken,f}const pa="2.70.0",Be=30*1e3,Cs=3,os=Cs*Be,ml="http://localhost:9999",pl="supabase.auth.token",fl={"X-Client-Info":`gotrue-js/${pa}`},Es="X-Supabase-Api-Version",fa={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gl=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xl=6e5;class Ws extends Error{constructor(e,t,a){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=a}}function R(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class yl extends Ws{constructor(e,t,a){super(e,t,a),this.name="AuthApiError",this.status=t,this.code=a}}function bl(r){return R(r)&&r.name==="AuthApiError"}class ga extends Ws{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class _e extends Ws{constructor(e,t,a,n){super(e,a,n),this.name=t,this.status=a}}class fe extends _e{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function vl(r){return R(r)&&r.name==="AuthSessionMissingError"}class kt extends _e{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Nt extends _e{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _t extends _e{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function wl(r){return R(r)&&r.name==="AuthImplicitGrantRedirectError"}class mr extends _e{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ts extends _e{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ls(r){return R(r)&&r.name==="AuthRetryableFetchError"}class pr extends _e{constructor(e,t,a){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=a}}class ot extends _e{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fr=` 	
\r=`.split(""),jl=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<fr.length;e+=1)r[fr[e].charCodeAt(0)]=-2;for(let e=0;e<Mt.length;e+=1)r[Mt[e].charCodeAt(0)]=e;return r})();function gr(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;t(Mt[a]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;t(Mt[a]),e.queuedBits-=6}}function xa(r,e,t){const a=jl[r];if(a>-1)for(e.queue=e.queue<<6|a,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function xr(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{_l(o,a,t)};for(let o=0;o<r.length;o+=1)xa(r.charCodeAt(o),n,i);return e.join("")}function kl(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Nl(r,e){for(let t=0;t<r.length;t+=1){let a=r.charCodeAt(t);if(a>55295&&a<=56319){const n=(a-55296)*1024&65535;a=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}kl(a,e)}}function _l(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let a=1;a<6;a+=1)if(!(r>>7-a&1)){e.utf8seq=a;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Sl(r){const e=[],t={queue:0,queuedBits:0},a=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)xa(r.charCodeAt(n),t,a);return new Uint8Array(e)}function Al(r){const e=[];return Nl(r,t=>e.push(t)),new Uint8Array(e)}function Cl(r){const e=[],t={queue:0,queuedBits:0},a=n=>{e.push(n)};return r.forEach(n=>gr(n,t,a)),gr(null,t,a),e.join("")}function El(r){return Math.round(Date.now()/1e3)+r}function Tl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const se=()=>typeof window<"u"&&typeof document<"u",Se={tested:!1,writable:!1},lt=()=>{if(!se())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Se.tested)return Se.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Se.tested=!0,Se.writable=!0}catch{Se.tested=!0,Se.writable=!1}return Se.writable};function Pl(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((a,n)=>{e[n]=a}),e}const ya=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>bt(async()=>{const{default:a}=await Promise.resolve().then(()=>Ye);return{default:a}},void 0).then(({default:a})=>a(...t)):e=fetch,(...t)=>e(...t)},Il=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ba=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},St=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},At=async(r,e)=>{await r.removeItem(e)};class Yt{constructor(){this.promise=new Yt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Yt.promiseConstructor=Promise;function cs(r){const e=r.split(".");if(e.length!==3)throw new ot("Invalid JWT structure");for(let a=0;a<e.length;a++)if(!gl.test(e[a]))throw new ot("JWT not in base64url format");return{header:JSON.parse(xr(e[0])),payload:JSON.parse(xr(e[1])),signature:Sl(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ol(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Rl(r,e){return new Promise((a,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!e(i,null,o)){a(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function Ml(r){return("0"+r.toString(16)).substr(-2)}function Dl(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(e),Array.from(e,Ml).join("")}async function Ll(r){const t=new TextEncoder().encode(r),a=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(a);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function $l(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Ll(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function De(r,e,t=!1){const a=Dl();let n=a;t&&(n+="/PASSWORD_RECOVERY"),await ba(r,`${e}-code-verifier`,n);const i=await $l(a);return[i,a===i?"plain":"s256"]}const Ul=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Bl(r){const e=r.headers.get(Es);if(!e||!e.match(Ul))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Fl(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function ql(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Wl=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Le(r){if(!Wl.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Hl=function(r,e){var t={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&e.indexOf(a)<0&&(t[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(r);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(r,a[n])&&(t[a[n]]=r[a[n]]);return t};const Ae=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Gl=[502,503,504];async function yr(r){var e;if(!Il(r))throw new Ts(Ae(r),0);if(Gl.includes(r.status))throw new Ts(Ae(r),r.status);let t;try{t=await r.json()}catch(i){throw new ga(Ae(i),i)}let a;const n=Bl(r);if(n&&n.getTime()>=fa["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?a=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(a=t.error_code),a){if(a==="weak_password")throw new pr(Ae(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(a==="session_not_found")throw new fe}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new pr(Ae(t),r.status,t.weak_password.reasons);throw new yl(Ae(t),r.status||500,a)}const zl=(r,e,t,a)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),t))};async function L(r,e,t,a){var n;const i=Object.assign({},a==null?void 0:a.headers);i[Es]||(i[Es]=fa["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const o=(n=a==null?void 0:a.query)!==null&&n!==void 0?n:{};a!=null&&a.redirectTo&&(o.redirect_to=a.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Jl(r,e,t+l,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(c):{data:Object.assign({},c),error:null}}async function Jl(r,e,t,a,n,i){const o=zl(e,a,n,i);let l;try{l=await r(t,Object.assign({},o))}catch(c){throw console.error(c),new Ts(Ae(c),0)}if(l.ok||await yr(l),a!=null&&a.noResolveJson)return l;try{return await l.json()}catch(c){await yr(c)}}function ce(r){var e;let t=null;Ql(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=El(r.expires_in)));const a=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:a},error:null}}function br(r){const e=ce(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,a)=>t&&typeof a=="string",!0)&&(e.data.weak_password=r.weak_password),e}function ye(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Vl(r){return{data:r,error:null}}function Yl(r){const{action_link:e,email_otp:t,hashed_token:a,redirect_to:n,verification_type:i}=r,o=Hl(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:a,redirect_to:n,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Kl(r){return r}function Ql(r){return r.access_token&&r.refresh_token&&r.expires_in}const ds=["global","local","others"];var Zl=function(r,e){var t={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&e.indexOf(a)<0&&(t[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(r);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(r,a[n])&&(t[a[n]]=r[a[n]]);return t};class Xl{constructor({url:e="",headers:t={},fetch:a}){this.url=e,this.headers=t,this.fetch=ya(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ds[0]){if(ds.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ds.join(", ")}`);try{return await L(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(a){if(R(a))return{data:null,error:a};throw a}}async inviteUserByEmail(e,t={}){try{return await L(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ye})}catch(a){if(R(a))return{data:{user:null},error:a};throw a}}async generateLink(e){try{const{options:t}=e,a=Zl(e,["options"]),n=Object.assign(Object.assign({},a),t);return"newEmail"in a&&(n.new_email=a==null?void 0:a.newEmail,delete n.newEmail),await L(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Yl,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(R(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await L(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ye})}catch(t){if(R(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,a,n,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await L(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Kl});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(x=>{const w=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(x.split(";")[1].split("=")[1]);d[`${m}Page`]=w}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(R(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Le(e);try{return await L(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ye})}catch(t){if(R(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Le(e);try{return await L(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ye})}catch(a){if(R(a))return{data:{user:null},error:a};throw a}}async deleteUser(e,t=!1){Le(e);try{return await L(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ye})}catch(a){if(R(a))return{data:{user:null},error:a};throw a}}async _listFactors(e){Le(e.userId);try{const{data:t,error:a}=await L(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:a}}catch(t){if(R(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Le(e.userId),Le(e.id);try{return{data:await L(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(R(t))return{data:null,error:t};throw t}}}const ec={getItem:r=>lt()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{lt()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{lt()&&globalThis.localStorage.removeItem(r)}};function vr(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function tc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const $e={debug:!!(globalThis&&lt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class va extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class sc extends va{}async function rc(r,e,t){$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const a=new globalThis.AbortController;return e>0&&setTimeout(()=>{a.abort(),$e.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw $e.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new sc(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if($e.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}tc();const ac={url:ml,storageKey:pl,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fl,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function wr(r,e,t){return await t()}class ht{constructor(e){var t,a;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ht.nextInstanceID,ht.nextInstanceID+=1,this.instanceID>0&&se()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},ac),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Xl({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=ya(n.fetch),this.lock=n.lock||wr,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:se()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=rc:this.lock=wr,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:lt()?this.storage=ec:(this.memoryStorage={},this.storage=vr(this.memoryStorage)):(this.memoryStorage={},this.storage=vr(this.memoryStorage)),se()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${pa}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Pl(window.location.href);let a="none";if(this._isImplicitGrantCallback(t)?a="implicit":await this._isPKCECallback(t)&&(a="pkce"),se()&&this.detectSessionInUrl&&a!=="none"){const{data:n,error:i}=await this._getSessionFromURL(t,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),wl(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return R(t)?{error:t}:{error:new ga("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,a,n;try{const i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:ce}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(R(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,a,n;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await De(this.storage,this.storageKey)),i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:x},xform:ce})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(a=f==null?void 0:f.data)!==null&&a!==void 0?a:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ce})}else throw new Nt("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(R(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:br})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:br})}else throw new Nt("You must provide either an email or phone number and a password");const{data:a,error:n}=t;return n?{data:{user:null,session:null},error:n}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new kt}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:n})}catch(t){if(R(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,a,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,a,n,i,o,l,c,d,u,h,f,g;let x,w;if("message"in e)x=e.message,w=e.signature;else{const{chain:m,wallet:y,statement:v,options:k}=e;let j;if(se())if(typeof y=="object")j=y;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))j=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=y}const A=new URL((t=k==null?void 0:k.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in j&&j.signIn){const P=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),v?{statement:v}:null));let E;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")E=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)E=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)x=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),w=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${A.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(n=(a=k==null?void 0:k.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=k==null?void 0:k.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((o=k==null?void 0:k.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((l=k==null?void 0:k.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((d=k==null?void 0:k.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((h=(u=k==null?void 0:k.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...k.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const P=await j.signMessage(new TextEncoder().encode(x),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=P}}try{const{data:m,error:y}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Cl(w)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:ce});if(y)throw y;return!m||!m.session||!m.user?{data:{user:null,session:null},error:new kt}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:Object.assign({},m),error:y})}catch(m){if(R(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await St(this.storage,`${this.storageKey}-code-verifier`),[a,n]=(t??"").split("/");try{const{data:i,error:o}=await L(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:a},xform:ce});if(await At(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new kt}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(R(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:a,token:n,access_token:i,nonce:o}=e,l=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ce}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new kt}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(R(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,a,n,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await De(this.storage,this.storageKey));const{error:h}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Nt("You must provide either an email or phone number.")}catch(l){if(R(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,a;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(a=e.options)===null||a===void 0?void 0:a.captchaToken);const{data:o,error:l}=await L(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:ce});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(R(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,a,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await De(this.storage,this.storageKey)),await L(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&a!==void 0?a:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Vl})}catch(i){if(R(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:a}=e;if(a)throw a;if(!t)throw new fe;const{error:n}=await L(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(R(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:a,type:n,options:i}=e,{error:o}=await L(this.fetch,"POST",t,{headers:this.headers,body:{email:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:a,type:n,options:i}=e,{data:o,error:l}=await L(this.fetch,"POST",t,{headers:this.headers,body:{phone:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Nt("You must provide either an email or phone number and a type")}catch(t){if(R(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await a,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=t();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await St(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const a=e.expires_at?e.expires_at*1e3-Date.now()<os:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",e.expires_at),!a){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ye}):await this._useSession(async t=>{var a,n,i;const{data:o,error:l}=t;if(l)throw l;return!(!((a=o.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fe}:await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:ye})})}catch(t){if(R(t))return vl(t)&&(await this._removeSession(),await At(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async a=>{const{data:n,error:i}=a;if(i)throw i;if(!n.session)throw new fe;const o=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await De(this.storage,this.storageKey));const{data:d,error:u}=await L(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:ye});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(a){if(R(a))return{data:{user:null},error:a};throw a}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new fe;const t=Date.now()/1e3;let a=t,n=!0,i=null;const{payload:o}=cs(e.access_token);if(o.exp&&(a=o.exp,n=a<=t),n){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:a-t,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(R(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var a;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(a=o.session)!==null&&a!==void 0?a:void 0}if(!(e!=null&&e.refresh_token))throw new fe;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(R(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!se())throw new _t("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _t(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new mr("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _t("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new mr("No code detected.");const{data:v,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new _t("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const g=f-u;g*1e3<=Be&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const x=f-h;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,u);const{data:w,error:m}=await this._getUser(i);if(m)throw m;const y={provider_token:a,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(a){if(R(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await St(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var a;const{data:n,error:i}=t;if(i)return{error:i};const o=(a=n.session)===null||a===void 0?void 0:a.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(bl(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await At(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Tl(),a={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:a}}}async _emitInitialSession(e){return await this._useSession(async t=>{var a,n;try{const{data:{session:i},error:o}=t;if(o)throw o;await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let a=null,n=null;this.flowType==="pkce"&&([a,n]=await De(this.storage,this.storageKey,!0));try{return await L(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:a,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(R(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(R(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:a,error:n}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await L(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return se()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:e.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(R(a))return{data:{provider:e.provider,url:null},error:a};throw a}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var a,n;const{data:i,error:o}=t;if(o)throw o;return await L(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(R(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await Rl(async n=>(n>0&&await Ol(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await L(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ce})),(n,i)=>{const o=200*Math.pow(2,n);return i&&ls(i)&&Date.now()+o-a<Be})}catch(a){if(this._debug(t,"error",a),R(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const a=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",a),se()&&!t.skipBrowserRedirect&&window.location.assign(a),{data:{provider:e,url:a},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const a=await St(this.storage,this.storageKey);if(this._debug(t,"session from storage",a),!this._isValidSession(a)){this._debug(t,"session is not valid"),a!==null&&await this._removeSession();return}const n=((e=a.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<os;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${os}s`),n){if(this.autoRefreshToken&&a.refresh_token){const{error:i}=await this._callRefreshToken(a.refresh_token);i&&(console.error(i),ls(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(t,"error",a),console.error(a);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,a;if(!e)throw new fe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Yt;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new fe;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),R(i)){const o={session:null,error:i};return ls(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,a=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ba(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await At(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&se()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Be);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:a}}=t;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((a.expires_at*1e3-e)/Be);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Be}ms, refresh threshold is ${Cs} ticks`),n<=Cs&&await this._callRefreshToken(a.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof va)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!se()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,a){const n=[`provider=${encodeURIComponent(t)}`];if(a!=null&&a.redirectTo&&n.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&n.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,o]=await De(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);n.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&n.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var a;const{data:n,error:i}=t;return i?{data:null,error:i}:await L(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(t){if(R(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var a,n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await L(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(R(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var a;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(R(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var a;const{data:n,error:i}=t;return i?{data:null,error:i}:await L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(t){if(R(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:a}=await this._challenge({factorId:e.factorId});return a?{data:null,error:a}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const a=(e==null?void 0:e.factors)||[],n=a.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=a.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:a,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,a;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=cs(n.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((a=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let a=t.keys.find(o=>o.kid===e);if(a||(a=this.jwks.keys.find(o=>o.kid===e),a&&this.jwks_cached_at+xl>Date.now()))return a;const{data:n,error:i}=await L(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new ot("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),a=n.keys.find(o=>o.kid===e),!a)throw new ot("No matching signing key found in JWKS");return a}async getClaims(e,t={keys:[]}){try{let a=e;if(!a){const{data:g,error:x}=await this.getSession();if(x||!g.session)return{data:null,error:x};a=g.session.access_token}const{header:n,payload:i,signature:o,raw:{header:l,payload:c}}=cs(a);if(Fl(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(a);if(g)throw g;return{data:{claims:i,header:n,signature:o},error:null}}const d=ql(n.alg),u=await this.fetchJwk(n.kid,t),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Al(`${l}.${c}`)))throw new ot("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(a){if(R(a))return{data:null,error:a};throw a}}}ht.nextInstanceID=0;const nc=ht;class ic extends nc{constructor(e){super(e)}}var oc=function(r,e,t,a){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(r,e||[])).next())})};class lc{constructor(e,t,a){var n,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=ul(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:rl,realtime:nl,auth:Object.assign(Object.assign({},al),{storageKey:d}),global:sl},h=hl(a??{},u);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=cl(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new _o(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new eo(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Xo(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},a={}){return this.rest.rpc(e,t,a)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return oc(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(t=(e=a.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:a,storage:n,storageKey:i,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ic({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:a,storage:n,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Uo(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,a)=>{this._handleTokenChanged(t,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(e,t,a){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const cc=(r,e,t)=>new lc(r,e,t),dc="https://fdjrsandzjxeukcmlwor.supabase.co",uc="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZkanJzYW5kemp4ZXVrY21sd29yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkzNzQ2MzEsImV4cCI6MjA2NDk1MDYzMX0.PpirTjnAPiSBvDLZ1ssgFKbMiWk82e5aESpNZ7yrGWA",Y=cc(dc,uc),wa=p.createContext(void 0);function ae(){const r=p.useContext(wa);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r}function hc({children:r}){const[e,t]=p.useState(null),[a,n]=p.useState(!0);p.useEffect(()=>{Y.auth.getSession().then(({data:{session:h}})=>{h!=null&&h.user?i(h.user):n(!1)});const{data:{subscription:u}}=Y.auth.onAuthStateChange(async(h,f)=>{f!=null&&f.user?await i(f.user):(t(null),n(!1))});return()=>u.unsubscribe()},[]);const i=async u=>{try{const{data:h,error:f}=await Y.from("users").select("*").eq("id",u.id).single();f?(console.error("Error fetching user profile:",f),M.error("Failed to load user profile")):h&&t({id:h.id,email:h.email,name:h.name,role:h.role,country:h.country,created_at:h.created_at})}catch(h){console.error("Error in fetchUserProfile:",h)}finally{n(!1)}},o=async(u,h)=>{try{n(!0);const{data:f,error:g}=await Y.auth.signInWithPassword({email:u,password:h});if(g)throw g;f.user&&(await i(f.user),M.success("Welcome back!"))}catch(f){throw console.error("Login error:",f),M.error(f.message||"Login failed"),f}finally{n(!1)}},l=async(u,h,f,g)=>{try{n(!0);const{data:x,error:w}=await Y.auth.signUp({email:u,password:h});if(w)throw w;if(x.user){const{error:m}=await Y.from("users").insert([{id:x.user.id,email:u,name:f,country:g,role:u.includes("admin")?"admin":"user"}]);if(m)throw m;await i(x.user),M.success("Account created successfully!")}}catch(x){throw console.error("Registration error:",x),M.error(x.message||"Registration failed"),x}finally{n(!1)}},c=async u=>{if(e)try{const{error:h}=await Y.from("users").update(u).eq("id",e.id);if(h)throw h;t(f=>f?{...f,...u}:null),M.success("Profile updated successfully!")}catch(h){throw console.error("Update profile error:",h),M.error(h.message||"Failed to update profile"),h}},d=async()=>{try{const{error:u}=await Y.auth.signOut();if(u)throw u;t(null),M.success("Logged out successfully")}catch(u){console.error("Logout error:",u),M.error(u.message||"Logout failed")}};return s.jsx(wa.Provider,{value:{user:e,loading:a,login:o,register:l,updateProfile:c,logout:d},children:r})}function te(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function we(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}function mc(r,e){const t=te(r);return isNaN(e)?we(r,NaN):(e&&t.setDate(t.getDate()+e),t)}const ja=6048e5,pc=864e5;let fc={};function Kt(){return fc}function mt(r,e){var l,c,d,u;const t=Kt(),a=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((u=(d=t.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,n=te(r),i=n.getDay(),o=(i<a?7:0)+i-a;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function Dt(r){return mt(r,{weekStartsOn:1})}function ka(r){const e=te(r),t=e.getFullYear(),a=we(r,0);a.setFullYear(t+1,0,4),a.setHours(0,0,0,0);const n=Dt(a),i=we(r,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const o=Dt(i);return e.getTime()>=n.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function Lt(r){const e=te(r);return e.setHours(0,0,0,0),e}function jr(r){const e=te(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function gc(r,e){const t=Lt(r),a=Lt(e),n=+t-jr(t),i=+a-jr(a);return Math.round((n-i)/pc)}function xc(r){const e=ka(r),t=we(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Dt(t)}function kr(r,e){const t=Lt(r),a=Lt(e);return+t==+a}function yc(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function bc(r){if(!yc(r)&&typeof r!="number")return!1;const e=te(r);return!isNaN(Number(e))}function vc(r){const e=te(r),t=we(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const wc={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jc=(r,e,t)=>{let a;const n=wc[r];return typeof n=="string"?a=n:e===1?a=n.one:a=n.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+a:a+" ago":a};function us(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const kc={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Nc={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_c={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Sc={date:us({formats:kc,defaultWidth:"full"}),time:us({formats:Nc,defaultWidth:"full"}),dateTime:us({formats:_c,defaultWidth:"full"})},Ac={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Cc=(r,e,t,a)=>Ac[r];function tt(r){return(e,t)=>{const a=t!=null&&t.context?String(t.context):"standalone";let n;if(a==="formatting"&&r.formattingValues){const o=r.defaultFormattingWidth||r.defaultWidth,l=t!=null&&t.width?String(t.width):o;n=r.formattingValues[l]||r.formattingValues[o]}else{const o=r.defaultWidth,l=t!=null&&t.width?String(t.width):r.defaultWidth;n=r.values[l]||r.values[o]}const i=r.argumentCallback?r.argumentCallback(e):e;return n[i]}}const Ec={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Tc={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Pc={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ic={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Oc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Rc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Mc=(r,e)=>{const t=Number(r),a=t%100;if(a>20||a<10)switch(a%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Dc={ordinalNumber:Mc,era:tt({values:Ec,defaultWidth:"wide"}),quarter:tt({values:Tc,defaultWidth:"wide",argumentCallback:r=>r-1}),month:tt({values:Pc,defaultWidth:"wide"}),day:tt({values:Ic,defaultWidth:"wide"}),dayPeriod:tt({values:Oc,defaultWidth:"wide",formattingValues:Rc,defaultFormattingWidth:"wide"})};function st(r){return(e,t={})=>{const a=t.width,n=a&&r.matchPatterns[a]||r.matchPatterns[r.defaultMatchWidth],i=e.match(n);if(!i)return null;const o=i[0],l=a&&r.parsePatterns[a]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(l)?$c(l,h=>h.test(o)):Lc(l,h=>h.test(o));let d;d=r.valueCallback?r.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;const u=e.slice(o.length);return{value:d,rest:u}}}function Lc(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function $c(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function Uc(r){return(e,t={})=>{const a=e.match(r.matchPattern);if(!a)return null;const n=a[0],i=e.match(r.parsePattern);if(!i)return null;let o=r.valueCallback?r.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const l=e.slice(n.length);return{value:o,rest:l}}}const Bc=/^(\d+)(th|st|nd|rd)?/i,Fc=/\d+/i,qc={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Wc={any:[/^b/i,/^(a|c)/i]},Hc={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Gc={any:[/1/i,/2/i,/3/i,/4/i]},zc={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Jc={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Vc={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Yc={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Kc={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Qc={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Zc={ordinalNumber:Uc({matchPattern:Bc,parsePattern:Fc,valueCallback:r=>parseInt(r,10)}),era:st({matchPatterns:qc,defaultMatchWidth:"wide",parsePatterns:Wc,defaultParseWidth:"any"}),quarter:st({matchPatterns:Hc,defaultMatchWidth:"wide",parsePatterns:Gc,defaultParseWidth:"any",valueCallback:r=>r+1}),month:st({matchPatterns:zc,defaultMatchWidth:"wide",parsePatterns:Jc,defaultParseWidth:"any"}),day:st({matchPatterns:Vc,defaultMatchWidth:"wide",parsePatterns:Yc,defaultParseWidth:"any"}),dayPeriod:st({matchPatterns:Kc,defaultMatchWidth:"any",parsePatterns:Qc,defaultParseWidth:"any"})},Xc={code:"en-US",formatDistance:jc,formatLong:Sc,formatRelative:Cc,localize:Dc,match:Zc,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ed(r){const e=te(r);return gc(e,vc(e))+1}function td(r){const e=te(r),t=+Dt(e)-+xc(e);return Math.round(t/ja)+1}function Na(r,e){var u,h,f,g;const t=te(r),a=t.getFullYear(),n=Kt(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(f=n.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,o=we(r,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const l=mt(o,e),c=we(r,0);c.setFullYear(a,0,i),c.setHours(0,0,0,0);const d=mt(c,e);return t.getTime()>=l.getTime()?a+1:t.getTime()>=d.getTime()?a:a-1}function sd(r,e){var l,c,d,u;const t=Kt(),a=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(d=t.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,n=Na(r,e),i=we(r,0);return i.setFullYear(n,0,a),i.setHours(0,0,0,0),mt(i,e)}function rd(r,e){const t=te(r),a=+mt(t,e)-+sd(t,e);return Math.round(a/ja)+1}function U(r,e){const t=r<0?"-":"",a=Math.abs(r).toString().padStart(e,"0");return t+a}const pe={y(r,e){const t=r.getFullYear(),a=t>0?t:1-t;return U(e==="yy"?a%100:a,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):U(t+1,2)},d(r,e){return U(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return U(r.getHours()%12||12,e.length)},H(r,e){return U(r.getHours(),e.length)},m(r,e){return U(r.getMinutes(),e.length)},s(r,e){return U(r.getSeconds(),e.length)},S(r,e){const t=e.length,a=r.getMilliseconds(),n=Math.trunc(a*Math.pow(10,t-3));return U(n,e.length)}},Ue={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Nr={G:function(r,e,t){const a=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(a,{width:"abbreviated"});case"GGGGG":return t.era(a,{width:"narrow"});case"GGGG":default:return t.era(a,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const a=r.getFullYear(),n=a>0?a:1-a;return t.ordinalNumber(n,{unit:"year"})}return pe.y(r,e)},Y:function(r,e,t,a){const n=Na(r,a),i=n>0?n:1-n;if(e==="YY"){const o=i%100;return U(o,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):U(i,e.length)},R:function(r,e){const t=ka(r);return U(t,e.length)},u:function(r,e){const t=r.getFullYear();return U(t,e.length)},Q:function(r,e,t){const a=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return U(a,2);case"Qo":return t.ordinalNumber(a,{unit:"quarter"});case"QQQ":return t.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(a,{width:"wide",context:"formatting"})}},q:function(r,e,t){const a=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return U(a,2);case"qo":return t.ordinalNumber(a,{unit:"quarter"});case"qqq":return t.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(a,{width:"wide",context:"standalone"})}},M:function(r,e,t){const a=r.getMonth();switch(e){case"M":case"MM":return pe.M(r,e);case"Mo":return t.ordinalNumber(a+1,{unit:"month"});case"MMM":return t.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(a,{width:"wide",context:"formatting"})}},L:function(r,e,t){const a=r.getMonth();switch(e){case"L":return String(a+1);case"LL":return U(a+1,2);case"Lo":return t.ordinalNumber(a+1,{unit:"month"});case"LLL":return t.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(a,{width:"wide",context:"standalone"})}},w:function(r,e,t,a){const n=rd(r,a);return e==="wo"?t.ordinalNumber(n,{unit:"week"}):U(n,e.length)},I:function(r,e,t){const a=td(r);return e==="Io"?t.ordinalNumber(a,{unit:"week"}):U(a,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):pe.d(r,e)},D:function(r,e,t){const a=ed(r);return e==="Do"?t.ordinalNumber(a,{unit:"dayOfYear"}):U(a,e.length)},E:function(r,e,t){const a=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(a,{width:"short",context:"formatting"});case"EEEE":default:return t.day(a,{width:"wide",context:"formatting"})}},e:function(r,e,t,a){const n=r.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return U(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});case"eeee":default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(r,e,t,a){const n=r.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return U(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});case"cccc":default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(r,e,t){const a=r.getDay(),n=a===0?7:a;switch(e){case"i":return String(n);case"ii":return U(n,e.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(a,{width:"short",context:"formatting"});case"iiii":default:return t.day(a,{width:"wide",context:"formatting"})}},a:function(r,e,t){const n=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(r,e,t){const a=r.getHours();let n;switch(a===12?n=Ue.noon:a===0?n=Ue.midnight:n=a/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(r,e,t){const a=r.getHours();let n;switch(a>=17?n=Ue.evening:a>=12?n=Ue.afternoon:a>=4?n=Ue.morning:n=Ue.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let a=r.getHours()%12;return a===0&&(a=12),t.ordinalNumber(a,{unit:"hour"})}return pe.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):pe.H(r,e)},K:function(r,e,t){const a=r.getHours()%12;return e==="Ko"?t.ordinalNumber(a,{unit:"hour"}):U(a,e.length)},k:function(r,e,t){let a=r.getHours();return a===0&&(a=24),e==="ko"?t.ordinalNumber(a,{unit:"hour"}):U(a,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):pe.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):pe.s(r,e)},S:function(r,e){return pe.S(r,e)},X:function(r,e,t){const a=r.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return Sr(a);case"XXXX":case"XX":return Ce(a);case"XXXXX":case"XXX":default:return Ce(a,":")}},x:function(r,e,t){const a=r.getTimezoneOffset();switch(e){case"x":return Sr(a);case"xxxx":case"xx":return Ce(a);case"xxxxx":case"xxx":default:return Ce(a,":")}},O:function(r,e,t){const a=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_r(a,":");case"OOOO":default:return"GMT"+Ce(a,":")}},z:function(r,e,t){const a=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_r(a,":");case"zzzz":default:return"GMT"+Ce(a,":")}},t:function(r,e,t){const a=Math.trunc(r.getTime()/1e3);return U(a,e.length)},T:function(r,e,t){const a=r.getTime();return U(a,e.length)}};function _r(r,e=""){const t=r>0?"-":"+",a=Math.abs(r),n=Math.trunc(a/60),i=a%60;return i===0?t+String(n):t+String(n)+e+U(i,2)}function Sr(r,e){return r%60===0?(r>0?"-":"+")+U(Math.abs(r)/60,2):Ce(r,e)}function Ce(r,e=""){const t=r>0?"-":"+",a=Math.abs(r),n=U(Math.trunc(a/60),2),i=U(a%60,2);return t+n+e+i}const Ar=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},_a=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ad=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],a=t[1],n=t[2];if(!n)return Ar(r,e);let i;switch(a){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Ar(a,e)).replace("{{time}}",_a(n,e))},nd={p:_a,P:ad},id=/^D+$/,od=/^Y+$/,ld=["D","DD","YY","YYYY"];function cd(r){return id.test(r)}function dd(r){return od.test(r)}function ud(r,e,t){const a=hd(r,e,t);if(console.warn(a),ld.includes(r))throw new RangeError(a)}function hd(r,e,t){const a=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${a} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const md=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pd=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fd=/^'([^]*?)'?$/,gd=/''/g,xd=/[a-zA-Z]/;function Q(r,e,t){var u,h,f,g;const a=Kt(),n=a.locale??Xc,i=a.firstWeekContainsDate??((h=(u=a.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,o=a.weekStartsOn??((g=(f=a.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,l=te(r);if(!bc(l))throw new RangeError("Invalid time value");let c=e.match(pd).map(x=>{const w=x[0];if(w==="p"||w==="P"){const m=nd[w];return m(x,n.formatLong)}return x}).join("").match(md).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const w=x[0];if(w==="'")return{isToken:!1,value:yd(x)};if(Nr[w])return{isToken:!0,value:x};if(w.match(xd))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:x}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return c.map(x=>{if(!x.isToken)return x.value;const w=x.value;(dd(w)||cd(w))&&ud(w,e,String(r));const m=Nr[w[0]];return m(l,w,n.localize,d)}).join("")}function yd(r){const e=r.match(fd);return e?e[1].replace(gd,"'"):r}const Sa=p.createContext(void 0);function Qt(){const r=p.useContext(Sa);if(r===void 0)throw new Error("useData must be used within a DataProvider");return r}const bd=r=>{const e=["happy","good","great","wonderful","amazing","love","joy","excited","grateful","blessed"],t=["sad","bad","terrible","awful","hate","angry","depressed","anxious","worried","stressed"],a=r.toLowerCase().split(/\W+/),n=a.filter(o=>e.includes(o)).length,i=a.filter(o=>t.includes(o)).length;return n>i?"positive":i>n?"negative":"neutral"},vd=r=>{const e={happy:["happy","joy","excited","cheerful","elated"],sad:["sad","down","blue","melancholy","depressed"],anxious:["anxious","worried","nervous","stressed","overwhelmed"],angry:["angry","mad","frustrated","irritated","furious"],grateful:["grateful","thankful","blessed","appreciative"],hopeful:["hopeful","optimistic","confident","positive"],lonely:["lonely","isolated","alone","disconnected"]},t=r.toLowerCase().split(/\W+/),a=[];return Object.entries(e).forEach(([n,i])=>{i.some(o=>t.includes(o))&&a.push(n)}),a.length>0?a:["neutral"]},wd=(r,e,t)=>{const a=[`Your journal entry shows ${e} sentiment. This reflects your current emotional state.`,`The emotions detected (${t.join(", ")}) suggest you're processing various feelings.`,"Consider practicing mindfulness exercises to maintain emotional balance.","Your self-reflection shows good emotional awareness - keep journaling regularly."];return a[Math.floor(Math.random()*a.length)]};function jd({children:r}){const{user:e}=ae(),[t,a]=p.useState([]),[n,i]=p.useState([]),[o,l]=p.useState([]),[c,d]=p.useState(!1);p.useEffect(()=>{e?u():(a([]),i([]),l([]))},[e]);const u=async()=>{if(e){d(!0);try{const{data:w,error:m}=await Y.from("mood_entries").select("*").eq("user_id",e.id).order("date",{ascending:!1});if(m)throw m;a(w||[]);const{data:y,error:v}=await Y.from("journal_entries").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(v)throw v;i(y||[]);const{data:k,error:j}=await Y.from("community_posts").select("*").order("created_at",{ascending:!1});if(j)throw j;const A=(k||[]).map(P=>({...P,timestamp:new Date(P.created_at)}));l(A)}catch(w){console.error("Error loading user data:",w),M.error("Failed to load data")}finally{d(!1)}}},h=async w=>{if(e)try{const{data:m,error:y}=await Y.from("mood_entries").insert([{...w,user_id:e.id}]).select().single();if(y)throw y;a(v=>[m,...v]),M.success("Mood entry saved!")}catch(m){console.error("Error adding mood entry:",m),M.error("Failed to save mood entry")}},f=async w=>{if(e)try{const m=bd(w.content),y=vd(w.content),v=wd(w.content,m,y),{data:k,error:j}=await Y.from("journal_entries").insert([{...w,user_id:e.id,sentiment:m,emotions:y,ai_insights:v}]).select().single();if(j)throw j;i(A=>[k,...A]),M.success("Journal entry saved!")}catch(m){console.error("Error adding journal entry:",m),M.error("Failed to save journal entry")}},g=async w=>{if(e)try{const{data:m,error:y}=await Y.from("community_posts").insert([{...w,user_id:e.id,author_name:w.is_anonymous?"Anonymous User":e.name,likes:0,replies:0}]).select().single();if(y)throw y;const v={...m,timestamp:new Date(m.created_at)};l(k=>[v,...k]),M.success("Post created successfully!")}catch(m){console.error("Error adding community post:",m),M.error("Failed to create post")}},x=()=>{const w=new Date,m=[];for(let y=6;y>=0;y--){const v=new Date(w);v.setDate(v.getDate()-y);const k=Q(v,"yyyy-MM-dd"),j=t.find(A=>A.date===k);m.push({date:Q(v,"EEE"),mood:(j==null?void 0:j.mood)||0,sleep:(j==null?void 0:j.sleep)||0,activity:(j==null?void 0:j.activity)||0,stress:(j==null?void 0:j.stress)||0})}return m};return s.jsx(Sa.Provider,{value:{moodEntries:t,journalEntries:n,communityPosts:o,loading:c,addMoodEntry:h,addJournalEntry:f,addCommunityPost:g,getWeeklyMoodData:x},children:r})}const Aa=p.createContext(void 0);function Ca(){const r=p.useContext(Aa);if(r===void 0)throw new Error("useAI must be used within an AIProvider");return r}function kd({children:r}){const{user:e}=ae(),[t,a]=p.useState([]),[n,i]=p.useState([]),[o,l]=p.useState([]),[c,d]=p.useState(!1);p.useEffect(()=>{a([{id:"content_mod",name:"Content Moderation AI",type:"content_moderation",status:"active",lastActivity:new Date,actionsToday:156,accuracy:98.7},{id:"crisis_detect",name:"Crisis Detection AI",type:"crisis_detection",status:"active",lastActivity:new Date,actionsToday:23,accuracy:99.2},{id:"sentiment_analysis",name:"Sentiment Analysis AI",type:"sentiment_analysis",status:"active",lastActivity:new Date,actionsToday:342,accuracy:96.8},{id:"privacy_monitor",name:"Privacy Monitor AI",type:"privacy_monitor",status:"active",lastActivity:new Date,actionsToday:89,accuracy:97.5},{id:"cyberbullying_detect",name:"Cyberbullying Detection AI",type:"cyberbullying_detection",status:"active",lastActivity:new Date,actionsToday:67,accuracy:95.3}]),u()},[e]);const u=async()=>{i([{id:"1",type:"mood_trend",title:"Positive Mood Trend Detected",description:"Your mood has improved by 15% over the past week. Keep up the great work!",confidence:.87,actionable:!1,timestamp:new Date,data:{improvement:15,timeframe:"7 days"}},{id:"2",type:"sleep_pattern",title:"Sleep Schedule Optimization",description:"Consider going to bed 30 minutes earlier to improve your sleep quality.",confidence:.92,actionable:!0,timestamp:new Date,data:{recommendation:"earlier_bedtime",minutes:30}},{id:"3",type:"recommendation",title:"Mindfulness Practice Suggestion",description:"Based on your stress patterns, try the 5-minute breathing exercise during lunch.",confidence:.78,actionable:!0,timestamp:new Date,data:{exercise:"breathing",duration:5,timing:"lunch"}}])},h=async(E,D)=>{d(!0);try{await new Promise(F=>setTimeout(F,1500));const T=v(E),I=k(E),B=j(E),b=A(E),S={sentiment:T,emotions:I,themes:B,riskLevel:b,confidence:Math.random()*.3+.7,recommendations:P(T,I,b),timestamp:new Date},O=await g(E);return O&&(l(F=>[O,...F]),M.error("Crisis indicators detected. Support resources have been provided.")),S}catch(T){throw M.error("AI analysis failed. Please try again."),T}finally{d(!1)}},f=async E=>{d(!0);try{await new Promise(T=>setTimeout(T,2e3));const D=[{id:Date.now().toString(),type:"mood_trend",title:"Weekly Progress Update",description:"Your consistency in mood tracking is excellent. This helps us provide better insights.",confidence:.95,actionable:!1,timestamp:new Date}];return i(T=>[...D,...T].slice(0,10)),D}finally{d(!1)}},g=async E=>{const D=["suicide","kill myself","end it all","hurt myself","die","death","hopeless","no point","give up","cant go on","self harm","overdose"],T=E.toLowerCase(),I=D.filter(B=>T.includes(B));if(I.length>0){const B=I.length>=3?"critical":I.length>=2?"high":"medium";return{id:Date.now().toString(),userId:(e==null?void 0:e.id)||"anonymous",severity:B,content:E.substring(0,200)+"...",timestamp:new Date,resolved:!1,escalated:B==="critical"}}return null},x=async E=>{d(!0);try{await new Promise(B=>setTimeout(B,800));const D=["spam","scam","hate","violence"],T=E.toLowerCase(),I=D.some(B=>T.includes(B));return y("content_mod"),{approved:!I,reason:I?"Content contains inappropriate language":void 0}}finally{d(!1)}},w=async()=>["Try a 10-minute morning meditation to start your day positively","Consider journaling about three things you're grateful for","Take a short walk outside to boost your mood naturally","Practice deep breathing exercises when feeling stressed","Connect with a friend or family member today","Listen to calming music or nature sounds","Set a consistent sleep schedule for better mental health"].slice(0,3),m=(E,D)=>{a(T=>T.map(I=>I.id===E?{...I,status:D,lastActivity:new Date}:I))},y=E=>{a(D=>D.map(T=>T.id===E?{...T,lastActivity:new Date,actionsToday:T.actionsToday+1}:T))},v=E=>{const D=["happy","good","great","wonderful","amazing","love","joy","excited","grateful","blessed"],T=["sad","bad","terrible","awful","hate","angry","depressed","anxious","worried","stressed"],I=E.toLowerCase().split(/\W+/),B=I.filter(S=>D.includes(S)).length,b=I.filter(S=>T.includes(S)).length;return B>b?"positive":b>B?"negative":"neutral"},k=E=>{const D={happy:["happy","joy","excited","cheerful","elated"],sad:["sad","down","blue","melancholy","depressed"],anxious:["anxious","worried","nervous","stressed","overwhelmed"],angry:["angry","mad","frustrated","irritated","furious"],grateful:["grateful","thankful","blessed","appreciative"],hopeful:["hopeful","optimistic","confident","positive"],lonely:["lonely","isolated","alone","disconnected"]},T=E.toLowerCase().split(/\W+/),I=[];return Object.entries(D).forEach(([B,b])=>{b.some(S=>T.includes(S))&&I.push(B)}),I.length>0?I:["neutral"]},j=E=>{const D=[],T=E.toLowerCase();return(T.includes("work")||T.includes("job")||T.includes("career"))&&D.push("work"),(T.includes("family")||T.includes("parent")||T.includes("sibling"))&&D.push("family"),(T.includes("relationship")||T.includes("partner")||T.includes("friend"))&&D.push("relationships"),(T.includes("health")||T.includes("medical")||T.includes("doctor"))&&D.push("health"),(T.includes("school")||T.includes("study")||T.includes("exam"))&&D.push("education"),D},A=E=>{const D=["suicide","kill myself","end it all","no point living"],T=["hopeless","worthless","burden","give up"],I=E.toLowerCase();return D.some(B=>I.includes(B))?"high":T.some(B=>I.includes(B))?"medium":"low"},P=(E,D,T)=>{const I=[];return(E==="negative"||T==="high")&&(I.push("Consider reaching out to a mental health professional"),I.push("Practice grounding techniques like deep breathing")),D.includes("anxious")&&(I.push("Try the 4-7-8 breathing technique"),I.push("Consider progressive muscle relaxation")),D.includes("sad")&&(I.push("Engage in activities that usually bring you joy"),I.push("Connect with supportive friends or family")),E==="positive"&&(I.push("Keep up the positive momentum"),I.push("Consider sharing your success with others")),I.slice(0,3)};return s.jsx(Aa.Provider,{value:{agents:t,insights:n,crisisAlerts:o,isProcessing:c,analyzeText:h,generateInsights:f,detectCrisis:g,moderateContent:x,getPersonalizedRecommendations:w,updateAgentStatus:m},children:r})}const Ea=p.createContext(void 0);function Ta(){const r=p.useContext(Ea);if(r===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return r}function Nd({children:r}){const{user:e}=ae(),[t,a]=p.useState([]),[n,i]=p.useState({dailyReminders:!0,moodTracking:!0,journalPrompts:!0,communityUpdates:!1,crisisAlerts:!0,parentalNotifications:!1,quietHours:{enabled:!1,start:"22:00",end:"08:00"}}),o=t.filter(m=>!m.read).length;p.useEffect(()=>{e&&(l({type:"achievement",title:"Welcome to MindCare!",message:"Your mental health journey starts here. Take a moment to explore the features.",priority:"medium"}),n.dailyReminders&&x())},[e]),p.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]);const l=m=>{const y={...m,id:Date.now().toString(),timestamp:new Date,read:!1};a(v=>[y,...v].slice(0,50)),(m.priority==="high"||m.priority==="urgent")&&w(m.title,m.message),m.priority==="urgent"?M.error(m.message,{duration:8e3}):m.priority==="high"&&M(m.message,{duration:5e3})},c=m=>{a(y=>y.map(v=>v.id===m?{...v,read:!0}:v))},d=()=>{a(m=>m.map(y=>({...y,read:!0})))},u=m=>{a(y=>y.filter(v=>v.id!==m))},h=m=>{i(y=>({...y,...m}))},f=(m,y)=>{console.log(`Scheduled ${m} reminder for ${y}`)},g=(m,y)=>{l({type:"crisis_alert",title:"Crisis Support Available",message:"We detected you might need support. Crisis resources are available 24/7.",priority:"urgent",actionUrl:"/chat"}),n.parentalNotifications&&console.log("Emergency contact notified")},x=()=>{const m=[{type:"mood_reminder",title:"Daily Check-in",message:"How are you feeling today? Take a moment to log your mood.",priority:"medium"},{type:"journal_prompt",title:"Journal Prompt",message:"What are three things you're grateful for today?",priority:"low"}];setTimeout(()=>{if(n.moodTracking){const y=m[Math.floor(Math.random()*m.length)];l(y)}},1e4)},w=(m,y)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(m,{body:y,icon:"/favicon.ico",badge:"/favicon.ico"})};return s.jsx(Ea.Provider,{value:{notifications:t,unreadCount:o,settings:n,addNotification:l,markAsRead:c,markAllAsRead:d,deleteNotification:u,updateSettings:h,scheduleReminder:f,sendCrisisAlert:g},children:r})}const Pa=p.createContext(void 0);function Ia(){const r=p.useContext(Pa);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r}function _d({children:r}){const[e,t]=p.useState(()=>localStorage.getItem("shanti-theme")||"light"),a=e==="dark";p.useEffect(()=>{localStorage.setItem("shanti-theme",e),e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]);const n=()=>{t(i=>i==="light"?"dark":"light")};return s.jsx(Pa.Provider,{value:{theme:e,toggleTheme:n,isDark:a},children:r})}const Oa=p.createContext(void 0);function Sd(){const r=p.useContext(Oa);if(r===void 0)throw new Error("usePsychiatrist must be used within a PsychiatristProvider");return r}function Ad({children:r}){const{user:e}=ae(),[t,a]=p.useState([]),[n,i]=p.useState([]),[o,l]=p.useState(!1);p.useEffect(()=>{e&&(c(),d())},[e]);const c=async()=>{l(!0);try{await new Promise(y=>setTimeout(y,1e3));const m=[{id:"1",name:"Dr. Sarah Chen",title:"Licensed Psychiatrist, MD",specialties:["Anxiety Disorders","Depression","PTSD"],rating:4.9,experience:12,languages:["English","Mandarin"],availability:"available",nextAvailable:new Date(Date.now()+2*60*60*1e3),profileImage:"https://images.pexels.com/photos/5327580/pexels-photo-5327580.jpeg?auto=compress&cs=tinysrgb&w=400",bio:"Dr. Chen specializes in anxiety and mood disorders with a focus on mindfulness-based therapy.",sessionTypes:["video","audio","chat"],hourlyRate:150},{id:"2",name:"Dr. Michael Rodriguez",title:"Clinical Psychologist, PhD",specialties:["Trauma Therapy","Addiction","Family Counseling"],rating:4.8,experience:8,languages:["English","Spanish"],availability:"busy",nextAvailable:new Date(Date.now()+24*60*60*1e3),profileImage:"https://images.pexels.com/photos/5327921/pexels-photo-5327921.jpeg?auto=compress&cs=tinysrgb&w=400",bio:"Dr. Rodriguez uses evidence-based approaches to help clients overcome trauma and addiction.",sessionTypes:["video","audio"],hourlyRate:140},{id:"3",name:"Dr. Emily Johnson",title:"Licensed Therapist, LCSW",specialties:["Teen Counseling","Eating Disorders","Self-Esteem"],rating:4.7,experience:6,languages:["English"],availability:"available",nextAvailable:new Date(Date.now()+4*60*60*1e3),profileImage:"https://images.pexels.com/photos/5327656/pexels-photo-5327656.jpeg?auto=compress&cs=tinysrgb&w=400",bio:"Dr. Johnson specializes in working with adolescents and young adults facing identity and self-worth challenges.",sessionTypes:["video","chat"],hourlyRate:120},{id:"4",name:"Dr. David Kim",title:"Psychiatrist, MD, PhD",specialties:["Bipolar Disorder","Schizophrenia","Medication Management"],rating:4.9,experience:15,languages:["English","Korean"],availability:"available",nextAvailable:new Date(Date.now()+1*60*60*1e3),profileImage:"https://images.pexels.com/photos/5327647/pexels-photo-5327647.jpeg?auto=compress&cs=tinysrgb&w=400",bio:"Dr. Kim is an expert in severe mental health conditions and psychiatric medication management.",sessionTypes:["video","audio"],hourlyRate:180}];a(m)}catch{M.error("Failed to load psychiatrists")}finally{l(!1)}},d=async()=>{try{const m=[{id:"1",psychiatristId:"1",userId:(e==null?void 0:e.id)||"",date:new Date(Date.now()+864e5),duration:50,type:"video",status:"scheduled",sessionUrl:"https://meet.shanti.app/session/1"}];i(m)}catch(m){console.error("Failed to load appointments:",m)}},u=(m,y)=>t.filter(v=>!(m&&!v.specialties.some(k=>k.toLowerCase().includes(m.toLowerCase()))||y&&v.availability!=="available")),h=async(m,y,v)=>{l(!0);try{await new Promise(j=>setTimeout(j,1500));const k={id:Date.now().toString(),psychiatristId:m,userId:(e==null?void 0:e.id)||"",date:y,duration:50,type:v,status:"scheduled",sessionUrl:`https://meet.shanti.app/session/${Date.now()}`};i(j=>[...j,k]),M.success("Appointment scheduled successfully!")}catch(k){throw M.error("Failed to schedule appointment"),k}finally{l(!1)}},f=async m=>{l(!0);try{await new Promise(y=>setTimeout(y,1e3)),i(y=>y.map(v=>v.id===m?{...v,status:"cancelled"}:v)),M.success("Appointment cancelled")}catch(y){throw M.error("Failed to cancel appointment"),y}finally{l(!1)}},g=async()=>{l(!0);try{await new Promise(y=>setTimeout(y,2e3));const m=t.find(y=>y.availability==="available"&&y.specialties.includes("PTSD"));if(m){const y={id:`emergency-${Date.now()}`,psychiatristId:m.id,userId:(e==null?void 0:e.id)||"",date:new Date,duration:30,type:"video",status:"in-progress",sessionUrl:`https://meet.shanti.app/emergency/${Date.now()}`};i(v=>[...v,y]),M.success("Connected to emergency counselor"),window.open(y.sessionUrl,"_blank")}else M.error("No counselors available. Please call emergency services.")}catch(m){throw M.error("Failed to start emergency session"),m}finally{l(!1)}},x=(m,y)=>{const v=[];for(let A=9;A<17;A++){const P=new Date(y);P.setHours(A,0,0,0),!n.some(D=>D.psychiatristId===m&&D.date.getTime()===P.getTime()&&D.status!=="cancelled")&&P>new Date&&v.push(P)}return v},w=async m=>{const y=n.find(v=>v.id===m);if(!y)throw new Error("Appointment not found");return i(v=>v.map(k=>k.id===m?{...k,status:"in-progress"}:k)),y.sessionUrl||""};return s.jsx(Oa.Provider,{value:{psychiatrists:t,appointments:n,isLoading:o,searchPsychiatrists:u,scheduleAppointment:h,cancelAppointment:f,startEmergencySession:g,getAvailableSlots:x,connectToSession:w},children:r})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),_=(r,e)=>{const t=p.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>p.createElement("svg",{ref:u,...Cd,width:n,height:n,stroke:a,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${Ed(r)}`,l].join(" "),...d},[...e.map(([h,f])=>p.createElement(h,f)),...Array.isArray(c)?c:[c]]));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=_("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=_("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=_("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=_("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=_("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=_("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=_("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=_("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=_("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=_("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=_("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=_("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=_("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=_("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=_("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=_("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=_("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=_("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=_("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=_("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=_("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=_("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=_("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=_("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=_("Flower",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5",key:"14wa3c"}],["path",{d:"M12 7.5V9",key:"1oy5b0"}],["path",{d:"M7.5 12H9",key:"eltsq1"}],["path",{d:"M16.5 12H15",key:"vk5kw4"}],["path",{d:"M12 16.5V15",key:"k7eayi"}],["path",{d:"m8 8 1.88 1.88",key:"nxy4qf"}],["path",{d:"M14.12 9.88 16 8",key:"1lst6k"}],["path",{d:"m8 16 1.88-1.88",key:"h2eex1"}],["path",{d:"M14.12 14.12 16 16",key:"uqkrx3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=_("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=_("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=_("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=_("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=_("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=_("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=_("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=_("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=_("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=_("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=_("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=_("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=_("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=_("Meh",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=_("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=_("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=_("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=_("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=_("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=_("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=_("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=_("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=_("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=_("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=_("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=_("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=_("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=_("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=_("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=_("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=_("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=_("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=_("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=_("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=_("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=_("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=_("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=_("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=_("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=_("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=_("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=_("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=_("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=_("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=_("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=_("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=_("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=_("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=_("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=_("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=_("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=_("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=_("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=_("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),fu=()=>{const{theme:r,toggleTheme:e,isDark:t}=Ia(),a=()=>{const o=document.getElementById("features-section");o&&o.scrollIntoView({behavior:"smooth"})},n=[{icon:Hs,title:"Peaceful Mood Tracking",description:"Gently monitor your emotional journey with mindful insights and compassionate AI guidance."},{icon:Ra,title:"Mindful Journaling",description:"Express yourself in a safe space with AI-powered emotional understanding and gentle reflections."},{icon:gt,title:"Supportive Community",description:"Connect with others on similar paths in a carefully moderated, healing-focused environment."},{icon:Zt,title:"AI Companion",description:"24/7 compassionate support with crisis intervention and personalized wellness guidance."},{icon:Js,title:"Licensed Psychiatrists",description:"Connect with qualified mental health professionals for video, audio, or chat sessions."},{icon:Ut,title:"Healing Resources",description:"Access meditation, breathing exercises, and therapeutic content designed for inner peace."},{icon:He,title:"Privacy & Security",description:"Your healing journey is protected with end-to-end encryption and complete confidentiality."}],i=[{name:"Priya S.",role:"Student",content:"Shanti helped me find peace during my most challenging times. The gentle approach made all the difference.",rating:5},{name:"David M.",role:"Professional",content:"The connection with licensed psychiatrists was seamless. I finally found the support I needed.",rating:5},{name:"Sarah L.",role:"Parent",content:"A truly compassionate platform that understands the importance of mental wellness and healing.",rating:5}];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sage-50 via-white to-lavender-50 dark:from-sage-900 dark:via-gray-900 dark:to-lavender-900 transition-colors duration-300",children:[s.jsx("nav",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-b border-sage-100 dark:border-gray-700 sticky top-0 z-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-sage-600 to-lavender-600 rounded-xl flex items-center justify-center shadow-lg",children:s.jsx(Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"font-bold text-xl text-gray-900 dark:text-white",children:"Shanti"}),s.jsx("span",{className:"text-xs text-sage-600 dark:text-sage-400 font-medium",children:"Find Your Peace"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"text-sage-700 dark:text-sage-300 hover:text-purple-700 dark:hover:text-purple-300 font-medium transition-colors",title:`Switch to ${t?"light":"dark"} mode`,children:t?s.jsx(Ua,{className:"w-5 h-5"}):s.jsx(Gs,{className:"w-5 h-5"})}),s.jsx(at,{to:"/auth",className:"text-sage-700 dark:text-sage-300 hover:text-purple-700 dark:hover:text-purple-300 font-medium transition-colors",children:"Sign In"})]})]})})}),s.jsx("section",{className:"relative overflow-hidden",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:s.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-8",children:s.jsx(N.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-20 h-20 bg-gradient-to-br from-sage-600 to-lavender-600 rounded-2xl flex items-center justify-center shadow-xl",children:s.jsx(Z,{className:"w-10 h-10 text-white"})})}),s.jsxs(N.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8},className:"text-5xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6",children:["Find Your Inner",s.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-sage-600 to-lavender-600",children:"Peace & Healing"})]}),s.jsx(N.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.8},className:"text-xl text-gray-600 dark:text-gray-300 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Shanti offers a gentle, compassionate approach to mental wellness. Connect with AI support, licensed psychiatrists, and a caring community on your journey to emotional balance and inner peace."}),s.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.8},className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsxs(at,{to:"/auth",className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-800 to-lavender-600 text-white font-semibold rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-200",children:["Begin Your Journey",s.jsx(Er,{className:"ml-2 w-5 h-5"})]}),s.jsx("button",{onClick:a,className:"inline-flex items-center px-8 py-4 border-2 border-sage-200 dark:border-sage-700 text-sage-700 dark:text-sage-300 font-semibold rounded-xl hover:bg-sage-50 dark:hover:bg-sage-900 transition-all duration-200",children:"Learn More"})]})]})})}),s.jsx("section",{id:"features-section",className:"py-20 bg-white/50 dark:bg-gray-800/50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs(N.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Comprehensive Wellness Support"}),s.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"Every feature designed with compassion, mindfulness, and your emotional wellbeing at heart."})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((o,l)=>{const c=o.icon;return s.jsxs(N.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:l*.1,duration:.6},viewport:{once:!0},whileHover:{y:-5},className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 border border-sage-100 dark:border-gray-700",children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-sage-600 to-lavender-600 rounded-xl flex items-center justify-center mb-6",children:s.jsx(c,{className:"w-7 h-7 text-white"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:o.title}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:o.description})]},l)})})]})}),s.jsx("section",{className:"py-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs(N.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Stories of Healing & Hope"}),s.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300",children:"Real experiences from people who found peace and support through Shanti."})]}),s.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:i.map((o,l)=>s.jsxs(N.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:l*.2,duration:.6},viewport:{once:!0},className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg border border-sage-100 dark:border-gray-700",children:[s.jsx("div",{className:"flex items-center mb-4",children:[...Array(o.rating)].map((c,d)=>s.jsx(ss,{className:"w-5 h-5 text-yellow-400 fill-current"},d))}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-4 italic leading-relaxed",children:['"',o.content,'"']}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:o.name}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:o.role})]})]},l))})]})}),s.jsx("section",{className:"py-20 bg-gradient-to-r from-blue-900 to-lavender-600 dark:from-black-700 dark:to-lavender-700",children:s.jsx("div",{className:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:s.jsxs(N.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:[s.jsx("p",{className:"text-4xl font-bold text-purple-200 mb-6",children:"Your Journey to Peace Begins Today"}),s.jsx("p",{className:"text-xl text-sage-100 mb-8",children:"Join thousands who have found healing, support, and inner peace through Shanti's compassionate approach to mental wellness."}),s.jsxs(at,{to:"/auth",className:"inline-flex items-center px-8 py-4 border-2 border-sage-200 dark:border-sage-200 text-sage-100 dark:text-sage-100 font-semibold rounded-xl hover:bg-sage-50 dark:hover:bg-sage-900 transition-all duration-200",children:["Start Your Healing Journey",s.jsx(Er,{className:"ml-2 w-5 h-5"})]})]})})}),s.jsx("footer",{className:"bg-gray-900 dark:bg-black text-white py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-sage-600 to-lavender-600 rounded-lg flex items-center justify-center",children:s.jsx(Z,{className:"w-5 h-5 text-white"})}),s.jsx("span",{className:"font-bold text-lg",children:"Shanti"})]}),s.jsx("p",{className:"text-gray-400",children:"Compassionate AI-powered mental health support for everyone seeking peace and healing."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-4",children:"Platform"}),s.jsxs("ul",{className:"space-y-2 text-gray-400",children:[s.jsx("li",{children:"Dashboard"}),s.jsx("li",{children:"Journal"}),s.jsx("li",{children:"Community"}),s.jsx("li",{children:"AI Support"}),s.jsx("li",{children:"Psychiatrist Connect"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-4",children:"Support"}),s.jsxs("ul",{className:"space-y-2 text-gray-400",children:[s.jsx("li",{children:"Help Center"}),s.jsx("li",{children:"Privacy Policy"}),s.jsx("li",{children:"Terms of Service"}),s.jsx("li",{children:"Contact Us"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-4",children:"Resources"}),s.jsxs("ul",{className:"space-y-2 text-gray-400",children:[s.jsx("li",{children:"Crisis Support"}),s.jsx("li",{children:"Mental Health Resources"}),s.jsx("li",{children:"Meditation Library"}),s.jsx("li",{children:"Professional Help"})]})]})]}),s.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:s.jsx("p",{children:"© 2025 Shanti. All rights reserved. | Designed with compassion for mental wellness."})})]})})]})},gu=()=>{const[r,e]=p.useState(!0),[t,a]=p.useState(!1),[n,i]=p.useState(!1),[o,l]=p.useState({email:"",password:"",name:"",confirmPassword:"",country:""}),{login:c,register:d}=ae(),u=[{code:"US",name:"United States"},{code:"CA",name:"Canada"},{code:"GB",name:"United Kingdom"},{code:"AU",name:"Australia"},{code:"IN",name:"India"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"JP",name:"Japan"},{code:"BR",name:"Brazil"},{code:"MX",name:"Mexico"}],h=async g=>{g.preventDefault(),i(!0);try{if(r)await c(o.email,o.password);else{if(o.password!==o.confirmPassword)throw new Error("Passwords do not match");await d(o.email,o.password,o.name,o.country)}}catch(x){console.error("Authentication error:",x)}finally{i(!1)}},f=g=>{l(x=>({...x,[g.target.name]:g.target.value}))};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50 dark:from-purple-900 dark:via-gray-900 dark:to-indigo-900 flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-md w-full card p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:s.jsx(Z,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:r?"Welcome Back to Shanti":"Join Shanti"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r?"Continue your journey to inner peace":"Begin your path to mental wellness"})]}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[!r&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",name:"name",value:o.name,onChange:f,className:"w-full pl-12 pr-4 py-3 rounded-xl",placeholder:"Enter your full name",required:!r})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Kd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"email",name:"email",value:o.email,onChange:f,className:"w-full pl-12 pr-4 py-3 rounded-xl",placeholder:"Enter your email",required:!0})]})]}),!r&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Country *"}),s.jsxs("div",{className:"relative",children:[s.jsx($t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("select",{name:"country",value:o.country,onChange:f,className:"w-full pl-12 pr-4 py-3 rounded-xl appearance-none",required:!r,children:u.map(g=>s.jsx("option",{value:g.code,children:g.name},g.code))})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Required for providing relevant crisis support contacts"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:t?"text":"password",name:"password",value:o.password,onChange:f,className:"w-full pl-12 pr-12 py-3 rounded-xl",placeholder:"Enter your password",required:!0}),s.jsx("button",{type:"button",onClick:()=>a(!t),className:"btn-header absolute right-3 top-1/2 transform -translate-y-1/2",children:t?s.jsx(Bd,{className:"w-5 h-5"}):s.jsx(Fd,{className:"w-5 h-5"})})]})]}),!r&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:t?"text":"password",name:"confirmPassword",value:o.confirmPassword,onChange:f,className:"w-full pl-12 pr-4 py-3 rounded-xl",placeholder:"Confirm your password",required:!r})]})]}),s.jsx("button",{type:"submit",disabled:n,className:"w-full btn-gradient py-3 disabled:opacity-50 disabled:cursor-not-allowed",children:n?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Processing..."]}):r?"Sign In":"Create Account"})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[r?"Don't have an account? ":"Already have an account? ",s.jsx("button",{onClick:()=>e(!r),className:"btn-header font-semibold",children:r?"Sign Up":"Sign In"})]})}),s.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl text-white",children:s.jsxs("p",{className:"text-sm text-center",children:[s.jsx("strong",{children:"Supabase Integration:"}),' Real authentication with secure database storage. Admin features available with emails containing "admin".']})})]})})};function xu(){const[r,e]=p.useState(null),[t,a]=p.useState(!1),[n,i]=p.useState(!1);return p.useEffect(()=>{const l=window.matchMedia("(display-mode: standalone)").matches,c=window.navigator.standalone===!0;i(l||c);const d=h=>{h.preventDefault(),e(h),a(!0)},u=()=>{i(!0),a(!1),e(null)};return window.addEventListener("beforeinstallprompt",d),window.addEventListener("appinstalled",u),()=>{window.removeEventListener("beforeinstallprompt",d),window.removeEventListener("appinstalled",u)}},[]),{isInstallable:t,isInstalled:n,installApp:async()=>{if(!r)return;r.prompt();const{outcome:l}=await r.userChoice;l==="accepted"&&(e(null),a(!1))}}}const yu=()=>{const{isInstallable:r,installApp:e}=xu(),[t,a]=Vs.useState(!1);Vs.useEffect(()=>{if(r){const o=setTimeout(()=>{a(!0)},3e4);return()=>clearTimeout(o)}},[r]);const n=()=>{e(),a(!1)},i=()=>{a(!1),sessionStorage.setItem("installPromptDismissed","true")};return sessionStorage.getItem("installPromptDismissed")?null:s.jsx(ue,{children:r&&t&&s.jsx(N.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:w-96",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-2xl border border-purple-200 dark:border-purple-700",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-xl flex items-center justify-center flex-shrink-0",children:s.jsx(nu,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Install Shanti App"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Get the full app experience with offline access and push notifications."}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:n,className:"flex items-center space-x-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-4 py-2 rounded-lg font-medium",children:[s.jsx(Ps,{className:"w-4 h-4"}),s.jsx("span",{children:"Install"})]}),s.jsx("button",{onClick:i,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100 transition-colors",children:"Later"})]})]}),s.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:s.jsx(Qe,{className:"w-5 h-5"})})]})})})})},bu=()=>{const{moodEntries:r,getWeeklyMoodData:e,addMoodEntry:t}=Qt(),[a,n]=p.useState(!1),[i,o]=p.useState({mood:3,sleep:7,activity:3,stress:3,notes:""}),l=e(),c=r.find(h=>h.date===Q(new Date,"yyyy-MM-dd")),d=h=>{h.preventDefault(),t({...i,date:Q(new Date,"yyyy-MM-dd")}),n(!1),o({mood:3,sleep:7,activity:3,stress:3,notes:""})},u=({icon:h,title:f,value:g,subtitle:x,color:w})=>s.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-purple-200 dark:border-purple-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${w}`,children:s.jsx(h,{className:"w-6 h-6 text-white"})}),s.jsx(rs,{className:"w-5 h-5 text-green-500"})]}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:g}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:f}),x&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:x})]});return s.jsxs("div",{className:"space-y-8",children:[s.jsx(yu,{}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Your Wellness Dashboard"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Track your mental health journey with AI-powered insights"})]}),s.jsxs("button",{onClick:()=>n(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-200",children:[s.jsx(pt,{className:"w-5 h-5 mr-2"}),"Log Today's Mood"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(u,{icon:Z,title:"Current Mood",value:c?`${c.mood}/5`:"Not logged",subtitle:"Today's emotional state",color:"bg-gradient-to-br from-pink-500 to-red-500"}),s.jsx(u,{icon:Gs,title:"Sleep Quality",value:c?`${c.sleep}h`:"Not logged",subtitle:"Hours of sleep last night",color:"bg-gradient-to-br from-indigo-500 to-purple-500"}),s.jsx(u,{icon:Ud,title:"Activity Level",value:c?`${c.activity}/5`:"Not logged",subtitle:"Physical activity today",color:"bg-gradient-to-br from-green-500 to-teal-500"}),s.jsx(u,{icon:Fa,title:"Stress Level",value:c?`${c.stress}/5`:"Not logged",subtitle:"Current stress feeling",color:"bg-gradient-to-br from-orange-500 to-red-500"})]}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-purple-200 dark:border-purple-700",children:[s.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Weekly Mood Trend"}),s.jsx(Et,{width:"100%",height:300,children:s.jsxs(Or,{data:l,children:[s.jsx(ms,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(ps,{dataKey:"date",stroke:"#6b7280"}),s.jsx(fs,{domain:[0,5],stroke:"#6b7280"}),s.jsx(Tt,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"}}),s.jsx(gs,{type:"monotone",dataKey:"mood",stroke:"#8b5cf6",strokeWidth:3,dot:{fill:"#8b5cf6",strokeWidth:2,r:6}})]})})]}),s.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-purple-200 dark:border-purple-700",children:[s.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Weekly Overview"}),s.jsx(Et,{width:"100%",height:300,children:s.jsxs(Ja,{data:l,children:[s.jsx(ms,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(ps,{dataKey:"date",stroke:"#6b7280"}),s.jsx(fs,{domain:[0,8],stroke:"#6b7280"}),s.jsx(Tt,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"}}),s.jsx(Ys,{dataKey:"sleep",fill:"#8b5cf6",radius:[4,4,0,0]}),s.jsx(Ys,{dataKey:"activity",fill:"#10b981",radius:[4,4,0,0]})]})})]})]}),s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl p-8 text-white",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:s.jsx(Hs,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"AI Insights & Recommendations"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-purple-100",children:"📈 Your mood has improved by 20% this week compared to last week. Great progress!"}),s.jsx("p",{className:"text-purple-100",children:"😴 Your sleep pattern shows consistency. Try to maintain 7-8 hours for optimal mental health."}),s.jsx("p",{className:"text-purple-100",children:"🧘 Consider adding 10 minutes of meditation to your routine based on your stress levels."})]})]})]})}),a&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Log Today's Mood"}),s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:["Mood (1-5): ",i.mood]}),s.jsx("input",{type:"range",min:"1",max:"5",value:i.mood,onChange:h=>o(f=>({...f,mood:parseInt(h.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"😢 Poor"}),s.jsx("span",{children:"😐 Fair"}),s.jsx("span",{children:"🙂 Good"}),s.jsx("span",{children:"😊 Very Good"}),s.jsx("span",{children:"😄 Excellent"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:["Sleep Hours: ",i.sleep,"h"]}),s.jsx("input",{type:"range",min:"3",max:"12",value:i.sleep,onChange:h=>o(f=>({...f,sleep:parseInt(h.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:["Activity Level (1-5): ",i.activity]}),s.jsx("input",{type:"range",min:"1",max:"5",value:i.activity,onChange:h=>o(f=>({...f,activity:parseInt(h.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:["Stress Level (1-5): ",i.stress]}),s.jsx("input",{type:"range",min:"1",max:"5",value:i.stress,onChange:h=>o(f=>({...f,stress:parseInt(h.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:i.notes,onChange:h=>o(f=>({...f,notes:h.target.value})),className:"w-full p-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-800",rows:3,placeholder:"How are you feeling today?"})]}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold py-3 rounded-xl hover:shadow-lg transition-all duration-200",children:"Save Entry"}),s.jsx("button",{type:"button",onClick:()=>n(!1),className:"flex-1 bg-gradient-to-r from-gray-400 to-gray-500 text-white font-semibold py-3 rounded-xl hover:shadow-lg transition-all duration-200",children:"Cancel"})]})]})]})})]})},vu=({onTranscription:r,onAudioSave:e,className:t=""})=>{const[a,n]=p.useState(!1),[i,o]=p.useState(!1),[l,c]=p.useState(null),[d,u]=p.useState(null),[h,f]=p.useState(""),[g,x]=p.useState(0),[w,m]=p.useState(!1),y=p.useRef(null),v=p.useRef(null),k=p.useRef([]),j=p.useRef(null);p.useEffect(()=>()=>{j.current&&clearInterval(j.current),d&&URL.revokeObjectURL(d),window.speechSynthesis&&window.speechSynthesis.cancel()},[d]);const A=async()=>{try{const S=await navigator.mediaDevices.getUserMedia({audio:!0}),O=new MediaRecorder(S);y.current=O,k.current=[],O.ondataavailable=F=>{F.data.size>0&&k.current.push(F.data)},O.onstop=()=>{const F=new Blob(k.current,{type:"audio/wav"});c(F),d&&URL.revokeObjectURL(d);const G=URL.createObjectURL(F);u(G),E(),e&&e(F),S.getTracks().forEach(Ze=>Ze.stop())},O.start(),n(!0),x(0),j.current=setInterval(()=>{x(F=>F+1)},1e3)}catch(S){console.error("Error accessing microphone:",S),alert("Unable to access microphone. Please check permissions.")}},P=()=>{y.current&&a&&(y.current.stop(),n(!1),j.current&&(clearInterval(j.current),j.current=null))},E=()=>{setTimeout(()=>{const S="This is a simulated transcription of your voice recording. In a real application, this would be the actual speech-to-text conversion of your audio.";f(S),r(S)},2e3)},D=()=>{d&&v.current&&(v.current.play(),o(!0))},T=()=>{v.current&&(v.current.pause(),o(!1))},I=()=>{c(null),d&&(URL.revokeObjectURL(d),u(null)),f(""),x(0),o(!1)},B=()=>{if(h)if(window.speechSynthesis)if(w)window.speechSynthesis.cancel(),m(!1);else{const S=new SpeechSynthesisUtterance(h);S.onstart=()=>m(!0),S.onend=()=>m(!1),S.onerror=()=>m(!1),window.speechSynthesis.speak(S)}else alert("Speech synthesis is not supported in your browser.")},b=S=>{const O=Math.floor(S/60),F=S%60;return`${O}:${F.toString().padStart(2,"0")}`};return s.jsxs("div",{className:`space-y-4 ${t}`,children:[s.jsx("div",{className:"flex items-center justify-center space-x-4",children:a?s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(N.button,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:1},onClick:P,className:"flex items-center space-x-2 bg-gradient-to-r from-red-600 to-red-700 text-white px-6 py-3 rounded-xl shadow-lg",children:[s.jsx(ou,{className:"w-5 h-5"}),s.jsx("span",{children:"Stop Recording"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),s.jsx("span",{className:"font-mono text-lg",children:b(g)})]})]}):s.jsxs(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:A,className:"flex items-center space-x-2 bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-xl hover:shadow-lg transition-all duration-200",children:[s.jsx(Os,{className:"w-5 h-5"}),s.jsx("span",{children:"Start Recording"})]})}),d&&s.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Recording"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:i?T:D,className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",children:i?s.jsx(Xt,{className:"w-4 h-4"}):s.jsx(es,{className:"w-4 h-4"})}),s.jsx("button",{onClick:B,disabled:!h,className:`p-2 rounded-lg transition-colors disabled:opacity-50 ${w?"bg-orange-100 text-orange-600 hover:bg-orange-200":"bg-green-100 text-green-600 hover:bg-green-200"}`,children:s.jsx(xt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:I,className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",children:s.jsx(zs,{className:"w-4 h-4"})})]})]}),s.jsx("audio",{ref:v,src:d,onEnded:()=>o(!1),className:"w-full",controls:!0})]}),h&&s.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Transcription"}),s.jsx("p",{className:"text-blue-800 text-sm leading-relaxed",children:h})]}),!d&&!a&&s.jsxs("div",{className:"text-center text-gray-500 text-sm",children:[s.jsx("p",{children:"Click the microphone to start voice recording"}),s.jsx("p",{children:"Your speech will be automatically transcribed"})]})]})},wu=()=>{const{journalEntries:r,addJournalEntry:e}=Qt(),{analyzeText:t,isProcessing:a}=Ca(),[n,i]=p.useState(!1),[o,l]=p.useState({title:"",content:""}),[c,d]=p.useState(!1),[u,h]=p.useState(""),[f,g]=p.useState(null),x=async j=>{if(j.preventDefault(),!(!o.title.trim()||!o.content.trim()))try{const A=await t(o.content,"journal");e({...o,date:Q(new Date,"yyyy-MM-dd"),sentiment:A.sentiment,emotions:A.emotions,aiInsights:A.recommendations.join(" ")}),l({title:"",content:""}),i(!1),M.success("Journal entry saved with AI insights!")}catch{M.error("Failed to analyze entry. Saving without AI insights."),e({...o,date:Q(new Date,"yyyy-MM-dd")}),l({title:"",content:""}),i(!1)}},w=j=>{l(A=>({...A,content:A.content+(A.content?" ":"")+j})),M.success("Voice transcription added to your entry!")},m=r.filter(j=>j.title.toLowerCase().includes(u.toLowerCase())||j.content.toLowerCase().includes(u.toLowerCase())),y=j=>{switch(j){case"positive":return s.jsx(iu,{className:"w-5 h-5 text-green-500"});case"negative":return s.jsx(Hd,{className:"w-5 h-5 text-red-500"});default:return s.jsx(Zd,{className:"w-5 h-5 text-yellow-500"})}},v=j=>{switch(j){case"positive":return"border-green-200 bg-green-50";case"negative":return"border-red-200 bg-red-50";default:return"border-yellow-200 bg-yellow-50"}},k=j=>({happy:"bg-yellow-100 text-yellow-700",sad:"bg-blue-100 text-blue-700",anxious:"bg-purple-100 text-purple-700",angry:"bg-red-100 text-red-700",grateful:"bg-green-100 text-green-700",hopeful:"bg-cyan-100 text-cyan-700",lonely:"bg-gray-100 text-gray-700"})[j]||"bg-gray-100 text-gray-700";return s.jsxs("div",{className:"space-y-8",children:[s.jsxs(N.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"AI-Powered Journal"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Express yourself and gain insights through AI analysis"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search entries...",value:u,onChange:j=>h(j.target.value),className:"pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-green-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all duration-200",children:[s.jsx(pt,{className:"w-5 h-5 mr-2"}),"New Entry"]})]})]}),s.jsx("div",{className:"space-y-6",children:m.length===0?s.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[s.jsx(Xd,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No journal entries yet"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Start your journaling journey and let AI help you understand your thoughts and emotions."}),s.jsxs(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-green-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all duration-200",children:[s.jsx(pt,{className:"w-5 h-5 mr-2"}),"Write Your First Entry"]})]}):s.jsx("div",{className:"space-y-6",children:m.map((j,A)=>s.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:A*.1},className:`bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border-2 ${v(j.sentiment)} hover:shadow-xl transition-all duration-200 cursor-pointer`,onClick:()=>g(f===j.id?null:j.id),children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:j.title}),y(j.sentiment)]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(Id,{className:"w-4 h-4 mr-1"}),j.date]})]}),s.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed line-clamp-3",children:j.content}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:j.emotions.map((P,E)=>s.jsx(N.span,{initial:{scale:0},animate:{scale:1},transition:{delay:E*.1},className:`px-3 py-1 rounded-full text-sm font-medium ${k(P)}`,children:P},E))}),s.jsx(ue,{children:f===j.id&&s.jsxs(N.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 pt-4 mt-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Full Entry"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:j.content})]}),j.aiInsights&&s.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(Pe,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center",children:[s.jsx(Ge,{className:"w-4 h-4 mr-1 text-purple-600"}),"AI Insights"]}),s.jsx("p",{className:"text-gray-700 text-sm",children:j.aiInsights})]})]})}),j.audioUrl&&s.jsx("div",{className:"mt-4 flex items-center space-x-3",children:s.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:[s.jsx(Os,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Play Audio"})]})})]})})]},j.id))})}),s.jsx(ue,{children:n&&s.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:s.jsxs(N.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"New Journal Entry"}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d(!c),className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${c?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:[s.jsx(Os,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:c?"Voice Active":"Voice Input"})]})})]}),s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Title"}),s.jsx("input",{type:"text",value:o.title,onChange:j=>l(A=>({...A,title:j.target.value})),className:"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"What's on your mind today?",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Thoughts"}),s.jsx("textarea",{value:o.content,onChange:j=>l(A=>({...A,content:j.target.value})),className:"w-full p-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:8,placeholder:"Express your thoughts, feelings, and experiences...",required:!0}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"AI will analyze your entry for sentiment, emotions, and provide personalized insights."}),s.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[s.jsx(rs,{className:"w-4 h-4"}),s.jsxs("span",{children:[o.content.length," characters"]})]})]})]}),c&&s.jsx(N.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:s.jsx(vu,{onTranscription:w,className:"border border-gray-200 rounded-xl p-4"})}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:a,className:"flex-1 bg-gradient-to-r from-blue-600 to-green-600 text-white font-semibold py-3 rounded-xl hover:shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:a?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Analyzing with AI..."]}):s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(Ge,{className:"w-5 h-5 mr-2"}),"Save & Analyze Entry"]})}),s.jsx(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"button",onClick:()=>i(!1),className:"flex-1 bg-gray-200 text-gray-800 font-semibold py-3 rounded-xl hover:bg-gray-300 transition-all duration-200",children:"Cancel"})]})]})]})})})]})},ju=()=>{const{communityPosts:r,addCommunityPost:e}=Qt(),[t,a]=p.useState(!1),[n,i]=p.useState("All"),[o,l]=p.useState(""),[c,d]=p.useState(new Set),[u,h]=p.useState(new Set),[f,g]=p.useState(new Set),[x,w]=p.useState({}),[m,y]=p.useState({}),[v,k]=p.useState({title:"",content:"",category:"General Discussion",isAnonymous:!0}),j=["All","General Discussion","Anxiety Support","Depression Support","Stress Management","Success Stories","Crisis Support","Resources & Tips"],A=b=>{b.preventDefault(),!(!v.title.trim()||!v.content.trim())&&(e({...v,author:v.isAnonymous?"Anonymous User":"You"}),k({title:"",content:"",category:"General Discussion",isAnonymous:!0}),a(!1),M.success("Post created successfully!"))},P=b=>{d(S=>{const O=new Set(S);return O.has(b)?(O.delete(b),M.success("Like removed")):(O.add(b),M.success("Post liked!")),O})},E=b=>{h(S=>{const O=new Set(S);return O.has(b)?(O.delete(b),M.success("Flag removed")):(O.add(b),M.success("Post flagged for review")),O})},D=b=>{g(S=>{const O=new Set(S);return O.has(b)?O.delete(b):O.add(b),O})},T=b=>{const S=m[b];if(!(S!=null&&S.trim()))return;const O={id:Date.now().toString(),author:"You",content:S,timestamp:new Date,isAnonymous:!1};w(F=>({...F,[b]:[...F[b]||[],O]})),y(F=>({...F,[b]:""})),M.success("Reply posted!")},I=r.filter(b=>{const S=n==="All"||b.category===n,O=b.title.toLowerCase().includes(o.toLowerCase())||b.content.toLowerCase().includes(o.toLowerCase());return S&&O}),B=b=>({"General Discussion":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300","Anxiety Support":"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300","Depression Support":"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300","Stress Management":"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300","Success Stories":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300","Crisis Support":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300","Resources & Tips":"bg-teal-100 text-teal-700 dark:bg-teal-900/30 dark:text-teal-300"})[b]||"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300";return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Community Support"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Connect with others in a safe, supportive environment"})]}),s.jsxs("button",{onClick:()=>a(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-200",children:[s.jsx(pt,{className:"w-5 h-5 mr-2"}),"New Post"]})]}),s.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-2xl p-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(He,{className:"w-6 h-6 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-amber-800 dark:text-amber-200 mb-2",children:"Community Guidelines"}),s.jsxs("div",{className:"text-sm text-amber-700 dark:text-amber-300 space-y-1",children:[s.jsx("p",{children:"• Be respectful and supportive of all community members"}),s.jsx("p",{children:"• Share experiences, not medical advice"}),s.jsx("p",{children:"• Maintain anonymity to protect privacy"}),s.jsx("p",{children:"• Report inappropriate content using the flag button"}),s.jsx("p",{children:"• AI moderation is active to ensure a safe space"})]})]})]})}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search posts...",value:o,onChange:b=>l(b.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-800"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(qd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("select",{value:n,onChange:b=>i(b.target.value),className:"pl-10 pr-8 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent appearance-none bg-white dark:bg-gray-800",children:j.map(b=>s.jsx("option",{value:b,children:b},b))})]})]}),s.jsx("div",{className:"space-y-6",children:I.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(gt,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"No posts found"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-500 mb-6",children:"Be the first to start a conversation in this category."}),s.jsxs("button",{onClick:()=>a(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-200",children:[s.jsx(pt,{className:"w-5 h-5 mr-2"}),"Create First Post"]})]}):I.map(b=>{var S,O,F;return s.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-purple-200 dark:border-purple-700 hover:shadow-xl transition-all duration-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-full flex items-center justify-center",children:b.isAnonymous?s.jsx(ft,{className:"w-5 h-5 text-white"}):s.jsx("span",{className:"text-white font-semibold text-sm",children:b.author.charAt(0)})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:b.author}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(Re,{className:"w-4 h-4 mr-1"}),Q(b.timestamp,"MMM d, yyyy • h:mm a")]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${B(b.category)}`,children:b.category}),s.jsx("button",{onClick:()=>E(b.id),title:"Flag the comment",className:`btn-header p-2 ${u.has(b.id)?"text-red-600 dark:text-red-400":""}`,children:s.jsx(Ma,{className:"w-4 h-4"})})]})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:b.title}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:b.content}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:()=>P(b.id),className:`btn-header flex items-center space-x-2 ${c.has(b.id)?"text-red-500 dark:text-red-400":""}`,children:[s.jsx(Z,{className:`w-5 h-5 ${c.has(b.id)?"fill-current":""}`}),s.jsx("span",{className:"text-sm font-medium",children:b.likes+(c.has(b.id)?1:0)})]}),s.jsxs("button",{onClick:()=>D(b.id),className:"btn-header flex items-center space-x-2",children:[s.jsx(Da,{className:"w-5 h-5"}),s.jsxs("span",{className:"text-sm font-medium",children:[b.replies+(((S=x[b.id])==null?void 0:S.length)||0)," replies"]})]})]}),b.category==="Crisis Support"&&s.jsxs("div",{className:"flex items-center space-x-2 text-red-600 dark:text-red-400",children:[s.jsx(me,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Crisis Alert - Monitored"})]})]}),f.has(b.id)&&s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Replies"}),s.jsx("div",{className:"space-y-4 mb-4",children:(O=x[b.id])==null?void 0:O.map(G=>s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-full flex items-center justify-center",children:G.isAnonymous?s.jsx(ft,{className:"w-3 h-3 text-white"}):s.jsx("span",{className:"text-white font-semibold text-xs",children:G.author.charAt(0)})}),s.jsx("span",{className:"font-medium text-sm text-gray-900 dark:text-white",children:G.author}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:Q(G.timestamp,"MMM d, h:mm a")})]}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:G.content})]},G.id))}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("input",{type:"text",value:m[b.id]||"",onChange:G=>y(Ze=>({...Ze,[b.id]:G.target.value})),placeholder:"Write a supportive reply...",className:"flex-1 p-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-800",onKeyPress:G=>{G.key==="Enter"&&T(b.id)}}),s.jsx("button",{onClick:()=>T(b.id),disabled:!((F=m[b.id])!=null&&F.trim()),className:"px-4 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg transition-all duration-200",children:s.jsx($a,{className:"w-4 h-4"})})]})]})]},b.id)})}),t&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create New Post"}),s.jsx("button",{onClick:()=>a(!1),className:"btn-header p-2",children:s.jsx(Qe,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:A,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Post Title"}),s.jsx("input",{type:"text",value:v.title,onChange:b=>k(S=>({...S,title:b.target.value})),className:"w-full p-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-800",placeholder:"What would you like to discuss?",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),s.jsx("select",{value:v.category,onChange:b=>k(S=>({...S,category:b.target.value})),className:"w-full p-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-800",children:j.slice(1).map(b=>s.jsx("option",{value:b,children:b},b))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content"}),s.jsx("textarea",{value:v.content,onChange:b=>k(S=>({...S,content:b.target.value})),className:"w-full p-4 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-800",rows:6,placeholder:"Share your thoughts, experiences, or questions...",required:!0})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"anonymous",checked:v.isAnonymous,onChange:b=>k(S=>({...S,isAnonymous:b.target.checked})),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),s.jsx("label",{htmlFor:"anonymous",className:"text-sm text-gray-700 dark:text-gray-300",children:"Post anonymously (recommended for privacy)"})]}),s.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(He,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 flex-shrink-0 mt-0.5"}),s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:[s.jsx("strong",{children:"AI Moderation:"})," Your post will be automatically screened for harmful content and compliance with community guidelines before being published."]})})]})}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold py-3 rounded-xl hover:shadow-lg transition-all duration-200",children:"Publish Post"}),s.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 bg-gradient-to-r from-gray-400 to-gray-500 text-white font-semibold py-3 rounded-xl hover:shadow-lg transition-all duration-200",children:"Cancel"})]})]})]})})]})},ku=()=>{const{user:r}=ae(),[e,t]=p.useState([{id:"1",content:"Hi there! I'm your AI mental health support companion. I'm here to listen, provide support, and help you with coping strategies. How are you feeling today?",sender:"bot",timestamp:new Date,type:"normal"}]),[a,n]=p.useState(""),[i,o]=p.useState(!1),[l,c]=p.useState(!1),d=p.useRef(null),u=["suicide","kill myself","end it all","hurt myself","die","death","hopeless","no point","give up","cant go on","self harm","unalive"],h={US:{country:"United States",emergency:"911",contacts:[{name:"Suicide & Crisis Lifeline",number:"988",type:"phone"},{name:"Crisis Text Line",number:"741741",type:"text"}]},CA:{country:"Canada",emergency:"911",contacts:[{name:"Talk Suicide Canada",number:"1-833-456-4566",type:"phone"},{name:"Crisis Text Line Canada",number:"686868",type:"text"}]},GB:{country:"United Kingdom",emergency:"999",contacts:[{name:"Samaritans",number:"116 123",type:"phone"},{name:"Samaritans Text",number:"07725 909090",type:"text"}]},AU:{country:"Australia",emergency:"000",contacts:[{name:"Lifeline Australia",number:"13 11 14",type:"phone"},{name:"Lifeline Text",number:"0477 13 11 14",type:"text"}]},IN:{country:"India",emergency:"112",contacts:[{name:"AASRA",number:"91-9820466726",type:"phone"},{name:"SNEHA",number:"044-24640050",type:"phone"}]}},f=y=>{const v=y.toLowerCase();return u.some(k=>v.includes(k))},g=y=>{const v=y.toLowerCase();if(f(y)){c(!0);const j=(r==null?void 0:r.country)||"US",A=h[j];return`I'm very concerned about what you've shared. Your life has value and there are people who want to help. Please consider reaching out to a crisis hotline immediately. In ${A.country}, you can call ${A.emergency} for emergencies or ${A.contacts[0].number} for ${A.contacts[0].name}. Would you like me to help you find more local emergency resources?`}if(v.includes("anxious")||v.includes("anxiety"))return"I understand you're feeling anxious. Anxiety can be overwhelming, but there are techniques that can help. Try the 4-7-8 breathing technique: breathe in for 4 counts, hold for 7, exhale for 8. Would you like me to guide you through some other grounding exercises?";if(v.includes("sad")||v.includes("depressed"))return"I hear that you're feeling sad. It's important to acknowledge these feelings rather than push them away. Sometimes sadness is our mind's way of processing difficult experiences. Have you been able to engage in any activities that usually bring you joy recently?";if(v.includes("stressed")||v.includes("stress"))return"Stress can really take a toll on both our mental and physical health. Let's work on some stress management techniques. Have you tried progressive muscle relaxation or mindfulness meditation? I can guide you through either of these.";if(v.includes("sleep")||v.includes("insomnia"))return"Sleep issues can significantly impact mental health. Good sleep hygiene is crucial. Try establishing a consistent bedtime routine, avoiding screens an hour before bed, and creating a calm environment. Are there specific thoughts keeping you awake at night?";if(v.includes("thank")||v.includes("help"))return"I'm glad I could help! Remember, seeking support is a sign of strength, not weakness. It's wonderful that you're taking steps to care for your mental health. Is there anything specific you'd like to work on or discuss further?";const k=["Thank you for sharing that with me. It takes courage to open up about your feelings. Can you tell me more about what's been on your mind lately?","I appreciate you trusting me with your thoughts. Your feelings are valid, and it's important to process them. What's been the most challenging part of your day?","I'm here to listen and support you. Everyone faces difficult times, and you're not alone in this. What kind of support would be most helpful for you right now?","It sounds like you're going through a lot. Remember that it's okay to not be okay sometimes. What are some things that have helped you cope in the past?"];return k[Math.floor(Math.random()*k.length)]},x=async y=>{if(y.preventDefault(),!a.trim())return;const v={id:Date.now().toString(),content:a,sender:"user",timestamp:new Date,type:"normal"};t(k=>[...k,v]),n(""),o(!0),setTimeout(()=>{const k=g(a),j={id:(Date.now()+1).toString(),content:k,sender:"bot",timestamp:new Date,type:f(a)?"crisis":"normal"};t(A=>[...A,j]),o(!1)},1500)};p.useEffect(()=>{var y;(y=d.current)==null||y.scrollIntoView({behavior:"smooth"})},[e,i]);const w=(r==null?void 0:r.country)||"US",m=h[w];return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl p-6 mb-6 text-white",style:{height:"10%"},children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:s.jsx(hs,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-purple-100",children:"AI Mental Health Support"}),s.jsx("p",{className:"text-purple-100",children:"24/7 confidential support and guidance"})]})]})}),l&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-700 rounded-2xl p-6 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx(me,{className:"w-8 h-8 text-red-600 dark:text-red-400 flex-shrink-0"}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-bold text-red-800 dark:text-red-200 mb-2",children:["Crisis Support Resources - ",m.country]}),s.jsxs("div",{className:"space-y-2 text-red-700 dark:text-red-300",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(qe,{className:"w-4 h-4"}),s.jsxs("span",{className:"font-semibold",children:["Emergency: ",m.emergency]})]}),m.contacts.map((y,v)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(qe,{className:"w-4 h-4"}),s.jsxs("span",{className:"font-semibold",children:[y.name,": ",y.number]})]},v)),s.jsxs("p",{className:"text-sm",children:["If you're in immediate danger, please call ",m.emergency," or go to your nearest emergency room."]})]})]})]})}),s.jsx("div",{className:"flex-1 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 overflow-y-auto border border-purple-200 dark:border-purple-700",style:{height:"75%"},children:s.jsxs("div",{className:"space-y-4",children:[e.map(y=>s.jsxs("div",{className:`flex items-start space-x-3 ${y.sender==="user"?"flex-row-reverse space-x-reverse":""}`,children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${y.sender==="user"?"bg-gradient-to-br from-purple-500 to-indigo-500":"bg-gradient-to-br from-purple-600 to-pink-600"}`,children:y.sender==="user"?s.jsx(ft,{className:"w-5 h-5 text-white"}):s.jsx(hs,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:`max-w-[70%] rounded-2xl p-4 ${y.sender==="user"?"bg-gradient-to-r from-purple-500 to-indigo-500 text-white":y.type==="crisis"?"bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-700 text-red-800 dark:text-red-200":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:[s.jsx("p",{className:"leading-relaxed",children:y.content}),s.jsxs("div",{className:`flex items-center justify-end mt-2 text-xs ${y.sender==="user"?"text-purple-100":"text-gray-500 dark:text-gray-400"}`,children:[s.jsx(Re,{className:"w-3 h-3 mr-1"}),y.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]},y.id)),i&&s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center",children:s.jsx(hs,{className:"w-5 h-5 text-white"})}),s.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-2xl p-4",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),s.jsx("div",{ref:d})]})}),s.jsxs("div",{className:"mt-4",style:{height:"15%"},children:[s.jsx("form",{onSubmit:x,className:"mb-4",children:s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("input",{type:"text",value:a,onChange:y=>n(y.target.value),placeholder:"Share your thoughts or ask for support...",className:"flex-1 p-4 rounded-xl border border-purple-200 dark:border-purple-600 focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-800",disabled:i}),s.jsx("button",{type:"submit",disabled:!a.trim()||i,className:"px-6 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none hover:shadow-lg transform hover:scale-105 transition-all duration-200",children:s.jsx($a,{className:"w-5 h-5"})})]})}),s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl p-4 text-white",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Z,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),s.jsx("div",{children:s.jsxs("p",{className:"text-sm",children:[s.jsx("strong",{children:"Remember:"})," This AI is designed to provide support and coping strategies, but it's not a replacement for professional mental health care. If you\\'re experiencing a crisis, please reach out to emergency services or a mental health professional."]})})]})})]})]})};class Nu{constructor(){this.apiKey="",this.elevenLabsKey=""}async generateScript(e,t,a){const n={"anxiety-breathing":`
        Welcome to this gentle breathing exercise designed to help ease anxiety and bring you back to a place of calm.
        
        Find a comfortable position, either sitting or lying down. Allow your eyes to close gently, or soften your gaze downward.
        
        Let's begin by simply noticing your breath as it is right now. There's no need to change anything yet - just observe.
        
        Now, we'll practice the 4-7-8 breathing technique. This ancient practice helps activate your body's natural relaxation response.
        
        Breathe in through your nose for a count of 4... 1, 2, 3, 4.
        Hold your breath gently for 7 counts... 1, 2, 3, 4, 5, 6, 7.
        Exhale slowly through your mouth for 8 counts... 1, 2, 3, 4, 5, 6, 7, 8.
        
        Let's repeat this cycle three more times, allowing each breath to carry away tension and worry.
        
        Remember, you are safe in this moment. You are exactly where you need to be.
      `,"depression-support":`
        Hello, and thank you for taking this time for yourself. That itself is an act of courage and self-compassion.
        
        Depression can feel like a heavy fog that makes everything seem distant and difficult. But you are not alone in this experience.
        
        Today, let's focus on small, gentle steps toward healing. Sometimes the most powerful thing we can do is simply acknowledge where we are without judgment.
        
        Take a moment to place one hand on your heart and one on your belly. Feel the warmth of your own touch - this is you caring for yourself.
        
        Breathe naturally and repeat these words silently: "I am worthy of love and care. I am doing the best I can. This feeling will pass."
        
        Depression often tells us lies about our worth and our future. But feelings, even the most difficult ones, are temporary visitors.
        
        You have survived difficult days before, and you have the strength to navigate this one too.
      `,"mindfulness-meditation":`
        Welcome to this mindfulness meditation. This is your time to pause, breathe, and reconnect with the present moment.
        
        Begin by finding a comfortable position. Allow your spine to be straight but not rigid, like a mountain - grounded yet reaching upward.
        
        Close your eyes or soften your gaze. Take three deep breaths, letting each exhale release any tension you've been carrying.
        
        Now, bring your attention to your breath. Notice the sensation of air entering your nostrils, filling your lungs, and gently leaving your body.
        
        Your mind will naturally wander - this is not a problem. When you notice thoughts arising, simply acknowledge them with kindness and gently return your attention to your breath.
        
        Think of your breath as an anchor, always available to bring you back to this moment of peace and presence.
        
        Continue breathing naturally, allowing yourself to rest in this space of awareness and calm.
      `,"sleep-preparation":`
        Welcome to this peaceful sleep preparation meditation. It's time to let go of the day and prepare your mind and body for restorative rest.
        
        Begin by making yourself comfortable in your bed. Adjust your pillows and blankets so you feel completely supported.
        
        Take a deep breath in, and as you exhale, allow your body to sink deeper into your mattress. Feel yourself being held and supported.
        
        Starting from the top of your head, we'll gently release tension from each part of your body.
        
        Relax your forehead, let your eyes grow heavy, soften your jaw. Allow your shoulders to drop away from your ears.
        
        Feel your arms becoming heavy and relaxed. Let your chest rise and fall naturally with each peaceful breath.
        
        Release any tension in your back, your hips, your legs. Feel your whole body melting into comfort and ease.
        
        As you drift toward sleep, know that you are safe, you are peaceful, and you deserve this rest.
      `};return await new Promise(i=>setTimeout(i,1e3)),n[e]||n["mindfulness-meditation"]}async generateAudio(e,t="calm-female"){return await new Promise(a=>setTimeout(a,2e3)),"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"}async generateContent(e,t,a,n="Beginner"){try{const i=await this.generateScript(e,t,a),o=await this.generateAudio(i);return{id:`ai-${Date.now()}`,title:this.generateTitle(e,a),script:i,audioUrl:o,duration:`${t} min`,category:a,difficulty:n}}catch(i){throw console.error("Error generating AI content:",i),new Error("Failed to generate content")}}async generatePersonalizedContent(e,t,a){let n="mindfulness-meditation",i="meditation";return a>7?(n="anxiety-breathing",i="breathing"):e==="sad"||e==="depressed"?(n="depression-support",i="education"):t.some(o=>o.toLowerCase().includes("sleep")||o.toLowerCase().includes("tired"))&&(n="sleep-preparation",i="meditation"),this.generateContent(n,10,i)}generateTitle(e,t){return{"anxiety-breathing":"Calming Breath for Anxiety Relief","depression-support":"Gentle Support for Difficult Days","mindfulness-meditation":"Present Moment Awareness","sleep-preparation":"Peaceful Sleep Meditation"}[e]||`${t.charAt(0).toUpperCase()+t.slice(1)} Practice`}getContentLibrary(){return[{id:"ai-1",title:"Morning Mindfulness",script:"A gentle way to start your day with intention and peace...",audioUrl:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",duration:"8 min",category:"meditation",difficulty:"Beginner"},{id:"ai-2",title:"Stress Relief Breathing",script:"Quick and effective breathing techniques for immediate stress relief...",audioUrl:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",duration:"5 min",category:"breathing",difficulty:"Beginner"},{id:"ai-3",title:"Understanding Anxiety",script:"Learn about anxiety, its symptoms, and healthy coping strategies...",audioUrl:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",duration:"12 min",category:"education",difficulty:"Beginner"},{id:"ai-4",title:"Gentle Movement for Mental Health",script:"Simple, mindful movements to boost mood and reduce tension...",audioUrl:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",duration:"15 min",category:"exercise",difficulty:"Beginner"}]}}const Pr=new Nu,_u=()=>{const[r,e]=p.useState(new Set),[t,a]=p.useState({}),n=p.useRef({}),i=[{id:"ocean",name:"Ocean Waves",icon:hu,description:"Gentle ocean waves for deep relaxation",audioUrl:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",color:"from-blue-400 to-cyan-400"},{id:"forest",name:"Forest Sounds",icon:lu,description:"Birds chirping and leaves rustling",audioUrl:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",color:"from-green-400 to-emerald-400"},{id:"rain",name:"Gentle Rain",icon:Ld,description:"Soft rainfall for peaceful sleep",audioUrl:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",color:"from-gray-400 to-blue-400"},{id:"wind",name:"Gentle Wind",icon:mu,description:"Soft wind through trees",audioUrl:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",color:"from-purple-400 to-pink-400"},{id:"thunder",name:"Distant Thunder",icon:Fa,description:"Gentle thunder for deep focus",audioUrl:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",color:"from-indigo-400 to-purple-400"},{id:"cafe",name:"Coffee Shop",icon:$d,description:"Ambient cafe sounds for productivity",audioUrl:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",color:"from-amber-400 to-orange-400"}];p.useEffect(()=>(i.forEach(d=>{if(!n.current[d.id]){const u=new Audio;u.loop=!0,u.volume=.5,n.current[d.id]=u,a(h=>({...h,[d.id]:50}))}}),()=>{Object.values(n.current).forEach(d=>{d.pause(),d.src=""})}),[]);const o=d=>{const u=n.current[d];u&&(r.has(d)?(u.pause(),e(h=>{const f=new Set(h);return f.delete(d),f})):(u.play().catch(()=>{console.log(`Playing ${d} sound`)}),e(h=>new Set([...h,d]))))},l=(d,u)=>{const h=n.current[d];h&&(h.volume=u/100),a(f=>({...f,[d]:u}))},c=()=>{Object.values(n.current).forEach(d=>{d.pause()}),e(new Set)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Ambient Sounds"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Create your perfect soundscape for relaxation and focus"}),r.size>0&&s.jsx("button",{onClick:c,className:"btn-primary mb-4",children:"Stop All Sounds"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(d=>{const u=d.icon,h=r.has(d.id),f=t[d.id]||50;return s.jsxs(N.div,{className:"ambient-control",whileHover:{y:-2},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${d.color} rounded-xl flex items-center justify-center shadow-lg`,children:s.jsx(u,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:d.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:d.description})]})]}),s.jsx(N.button,{onClick:()=>o(d.id),className:`w-12 h-12 rounded-full flex items-center justify-center transition-all ${h?"bg-purple-500 text-white shadow-lg":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:h?s.jsx(Xt,{className:"w-5 h-5"}):s.jsx(es,{className:"w-5 h-5"})})]}),h&&s.jsxs(N.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(xt,{className:"w-4 h-4 text-gray-500"}),s.jsx("input",{type:"range",min:"0",max:"100",value:f,onChange:g=>l(d.id,parseInt(g.target.value)),className:"flex-1"}),s.jsxs("span",{className:"text-sm text-gray-500 w-8",children:[f,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1",children:s.jsx(N.div,{className:`h-1 bg-gradient-to-r ${d.color} rounded-full`,initial:{width:0},animate:{width:"100%"},transition:{duration:2,repeat:1/0}})})]})]},d.id)})}),s.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-700",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(xt,{className:"w-6 h-6 text-purple-600 dark:text-purple-400 flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-purple-800 dark:text-purple-200 mb-2",children:"Sound Mixing Tips"}),s.jsxs("ul",{className:"text-sm text-purple-700 dark:text-purple-300 space-y-1",children:[s.jsx("li",{children:"• Combine 2-3 sounds for a rich soundscape"}),s.jsx("li",{children:"• Lower volumes create subtle background ambience"}),s.jsx("li",{children:"• Ocean + Rain works great for sleep"}),s.jsx("li",{children:"• Forest + Wind is perfect for meditation"}),s.jsx("li",{children:"• Cafe sounds help with focus and productivity"})]})]})]})})]})},Su=({userCountry:r})=>{const{user:e}=ae(),[t,a]=p.useState(r||(e==null?void 0:e.country)||"US"),[n,i]=p.useState([]),o={US:{country:"United States",code:"US",emergency:"911",contacts:[{id:"us-988",name:"Suicide & Crisis Lifeline",number:"988",type:"phone",description:"Free and confidential emotional support 24/7",availability:"24/7",language:"English, Spanish"},{id:"us-741741",name:"Crisis Text Line",number:"741741",type:"text",description:"Text HOME for crisis support",availability:"24/7",language:"English"},{id:"us-chat",name:"Crisis Chat",number:"suicidepreventionlifeline.org/chat",type:"chat",description:"Online crisis chat support",availability:"24/7",language:"English"}]},CA:{country:"Canada",code:"CA",emergency:"911",contacts:[{id:"ca-talk",name:"Talk Suicide Canada",number:"1-833-456-4566",type:"phone",description:"National suicide prevention service",availability:"24/7",language:"English, French"},{id:"ca-text",name:"Crisis Text Line Canada",number:"686868",type:"text",description:"Text TALK for crisis support",availability:"24/7",language:"English, French"}]},GB:{country:"United Kingdom",code:"GB",emergency:"999",contacts:[{id:"uk-samaritans",name:"Samaritans",number:"116 123",type:"phone",description:"Free emotional support for anyone in distress",availability:"24/7",language:"English"},{id:"uk-text",name:"Samaritans Text",number:"07725 909090",type:"text",description:"Text support service",availability:"24/7",language:"English"}]},AU:{country:"Australia",code:"AU",emergency:"000",contacts:[{id:"au-lifeline",name:"Lifeline Australia",number:"13 11 14",type:"phone",description:"Crisis support and suicide prevention",availability:"24/7",language:"English"},{id:"au-text",name:"Lifeline Text",number:"0477 13 11 14",type:"text",description:"Text crisis support",availability:"6PM - 12AM",language:"English"}]},IN:{country:"India",code:"IN",emergency:"112",contacts:[{id:"in-aasra",name:"AASRA",number:"91-9820466726",type:"phone",description:"Suicide prevention helpline",availability:"24/7",language:"English, Hindi"},{id:"in-sneha",name:"SNEHA",number:"044-24640050",type:"phone",description:"Emotional support helpline",availability:"24/7",language:"English, Tamil"}]},DE:{country:"Germany",code:"DE",emergency:"112",contacts:[{id:"de-telefonseelsorge",name:"Telefonseelsorge",number:"0800 111 0 111",type:"phone",description:"Free crisis counseling",availability:"24/7",language:"German"},{id:"de-nummer",name:"Nummer gegen Kummer",number:"116 111",type:"phone",description:"Support for children and teens",availability:"Mon-Sat 2-8 PM",language:"German"}]},FR:{country:"France",code:"FR",emergency:"112",contacts:[{id:"fr-suicide",name:"Suicide Écoute",number:"01 45 39 40 00",type:"phone",description:"National suicide prevention line",availability:"24/7",language:"French"},{id:"fr-sos",name:"SOS Amitié",number:"09 72 39 40 50",type:"phone",description:"Emotional support and listening",availability:"24/7",language:"French"}]},JP:{country:"Japan",code:"JP",emergency:"119",contacts:[{id:"jp-tell",name:"TELL Lifeline",number:"03-5774-0992",type:"phone",description:"Crisis support in English",availability:"9 AM - 11 PM",language:"English, Japanese"},{id:"jp-inochi",name:"Inochi no Denwa",number:"0570-783-556",type:"phone",description:"Suicide prevention hotline",availability:"24/7",language:"Japanese"}]},BR:{country:"Brazil",code:"BR",emergency:"192",contacts:[{id:"br-cvv",name:"Centro de Valorização da Vida",number:"188",type:"phone",description:"Suicide prevention and emotional support",availability:"24/7",language:"Portuguese"},{id:"br-caps",name:"CAPS",number:"0800-273-8255",type:"phone",description:"Psychosocial care centers",availability:"Business hours",language:"Portuguese"}]},MX:{country:"Mexico",code:"MX",emergency:"911",contacts:[{id:"mx-saptel",name:"SAPTEL",number:"55 5259 8121",type:"phone",description:"Crisis intervention and suicide prevention",availability:"24/7",language:"Spanish"},{id:"mx-linea",name:"Línea de la Vida",number:"800 911 2000",type:"phone",description:"National crisis line",availability:"24/7",language:"Spanish"}]}},l=Object.keys(o);p.useEffect(()=>{const x=o[t];x&&i(x.contacts)},[t]);const c=x=>{window.open(`tel:${x}`,"_self")},d=x=>{window.open(`sms:${x}`,"_self")},u=x=>{window.open(x.startsWith("http")?x:`https://${x}`,"_blank")},h=x=>{switch(x){case"phone":return qe;case"text":return Zt;case"chat":return $t;default:return qe}},f=x=>{switch(x.type){case"phone":return()=>c(x.number);case"text":return()=>d(x.number);case"chat":return()=>u(x.number);default:return()=>c(x.number)}},g=o[t];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[s.jsx(me,{className:"w-8 h-8 text-red-500"}),s.jsx("h2",{className:"text-3xl font-bold text-red-600",children:"Crisis Support"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Immediate help is available. You are not alone. These services are free, confidential, and available 24/7."})]}),s.jsxs("div",{className:"card p-6 border-red-200 dark:border-red-700",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Qd,{className:"w-5 h-5 text-red-600"}),s.jsx("h3",{className:"text-lg font-semibold",children:"Select Your Country"})]}),s.jsx("select",{value:t,onChange:x=>a(x.target.value),className:"w-full p-3 rounded-xl",children:l.map(x=>s.jsx("option",{value:x,children:o[x].country},x))})]}),g&&s.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"crisis-contact",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center",children:s.jsx(qe,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-red-800 dark:text-red-200",children:"Emergency Services"}),s.jsx("p",{className:"text-red-600 dark:text-red-300",children:"Life-threatening emergencies"}),s.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:"Police, Fire, Medical Emergency"})]})]}),s.jsx(N.button,{onClick:()=>c(g.emergency),className:"bg-red-600 hover:bg-red-700 text-white px-8 py-4 rounded-xl font-bold text-xl shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:g.emergency})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-xl font-semibold flex items-center space-x-2",children:[s.jsx(Z,{className:"w-6 h-6 text-red-500"}),s.jsx("span",{children:"Mental Health Crisis Support"})]}),n.map(x=>{const w=h(x.type),m=f(x);return s.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-6 border-purple-200 dark:border-purple-700 hover:shadow-xl transition-all duration-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-xl flex items-center justify-center",children:s.jsx(w,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold",children:x.name}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:x.description}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsx("span",{children:x.availability})]}),x.language&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx($t,{className:"w-4 h-4"}),s.jsx("span",{children:x.language})]})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs(N.button,{onClick:m,className:"btn-gradient px-6 py-3",whileHover:{scale:1.05},whileTap:{scale:.95},children:[x.type==="phone"&&"Call Now",x.type==="text"&&"Text Now",x.type==="chat"&&"Chat Now"]}),s.jsx("p",{className:"text-lg font-bold mt-2",children:x.number})]})]})},x.id)})]}),s.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border-2 border-amber-200 dark:border-amber-700 rounded-2xl p-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(me,{className:"w-6 h-6 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-amber-800 dark:text-amber-200 mb-2",children:"Important Information"}),s.jsxs("ul",{className:"text-sm text-amber-700 dark:text-amber-300 space-y-1",children:[s.jsx("li",{children:"• All crisis services listed are free and confidential"}),s.jsx("li",{children:"• If you're in immediate danger, call emergency services"}),s.jsx("li",{children:"• These numbers are verified and regularly updated"}),s.jsx("li",{children:"• Support is available in multiple languages where indicated"}),s.jsx("li",{children:"• You can also reach out to local emergency rooms or mental health facilities"})]})]})]})})]})},Au=()=>{const[r,e]=p.useState("all"),[t,a]=p.useState(""),[n,i]=p.useState(null),[o,l]=p.useState(0),[c,d]=p.useState(0),[u,h]=p.useState(.7),[f,g]=p.useState([]),[x,w]=p.useState(!1),[m,y]=p.useState("resources"),v=p.useRef(null);p.useEffect(()=>{k()},[]);const k=()=>{const S=Pr.getContentLibrary().map(O=>({...O,rating:4.5+Math.random()*.5}));g(S)},j=async()=>{w(!0);try{const b=[{topic:"anxiety-breathing",category:"breathing",duration:5},{topic:"depression-support",category:"education",duration:12},{topic:"mindfulness-meditation",category:"meditation",duration:10},{topic:"sleep-preparation",category:"meditation",duration:15}],S=b[Math.floor(Math.random()*b.length)],F={...await Pr.generateContent(S.topic,S.duration,S.category),rating:4.5+Math.random()*.5};g(G=>[F,...G]),M.success("New AI-generated content created!")}catch{M.error("Failed to generate new content")}finally{w(!1)}},A=[{value:"all",label:"All Resources",icon:Z},{value:"meditation",label:"Meditation",icon:Pe},{value:"breathing",label:"Breathing",icon:Vd},{value:"education",label:"Education",icon:Pd},{value:"exercise",label:"Exercises",icon:Z}],P=f.filter(b=>{const S=r==="all"||b.category===r,O=b.title.toLowerCase().includes(t.toLowerCase())||b.script.toLowerCase().includes(t.toLowerCase());return S&&O}),E=b=>({meditation:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",breathing:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",education:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",exercise:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300"})[b]||"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",D=b=>({Beginner:"text-green-600 dark:text-green-400",Intermediate:"text-yellow-600 dark:text-yellow-400",Advanced:"text-red-600 dark:text-red-400"})[b]||"text-gray-600 dark:text-gray-400",T=b=>{if(n===b.id)v.current&&v.current.pause(),i(null);else{v.current&&v.current.pause();const S=new Audio(b.audioUrl);v.current=S,S.addEventListener("loadedmetadata",()=>{d(S.duration)}),S.addEventListener("timeupdate",()=>{l(S.currentTime)}),S.addEventListener("ended",()=>{i(null),l(0)}),S.volume=u,S.play().then(()=>{i(b.id)}).catch(()=>{M.error("Unable to play audio. This is a demo with placeholder audio."),i(b.id),setTimeout(()=>i(null),5e3)})}},I=b=>{const S=Math.floor(b/60),O=Math.floor(b%60);return`${S}:${O.toString().padStart(2,"0")}`},B=[{id:"resources",label:"AI Resources",icon:Ge},{id:"ambient",label:"Ambient Sounds",icon:xt},{id:"crisis",label:"Crisis Support",icon:Z}];return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Mental Health Resources"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"AI-powered guided meditations, breathing exercises, educational content, and crisis support"})]}),s.jsx("div",{className:"flex justify-center space-x-2",children:B.map(b=>{const S=b.icon;return s.jsxs(N.button,{onClick:()=>y(b.id),className:`flex items-center space-x-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 ${m===b.id?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg":"btn-primary"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[s.jsx(S,{className:"w-5 h-5"}),s.jsx("span",{children:b.label})]},b.id)})}),s.jsx(ue,{mode:"wait",children:s.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[m==="resources"&&s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl p-8 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold mb-3 flex items-center space-x-2",children:[s.jsx(uu,{className:"w-8 h-8"}),s.jsx("span",{children:"AI-Powered Content"})]}),s.jsx("p",{className:"text-purple-100 mb-4",children:"Our AI creates personalized mental health content using advanced language models and natural voice synthesis for authentic, empathetic support."}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsx(N.button,{onClick:j,disabled:x,className:"bg-white/20 hover:bg-white/30 px-6 py-3 rounded-xl font-semibold transition-all duration-200 disabled:opacity-50",whileHover:{scale:1.05},whileTap:{scale:.95},children:x?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),s.jsx("span",{children:"Generating..."})]}):s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ge,{className:"w-5 h-5"}),s.jsx("span",{children:"Generate New Content"})]})})})]}),s.jsx("div",{className:"hidden md:block",children:s.jsx("div",{className:"w-32 h-32 bg-white/20 rounded-full flex items-center justify-center",children:s.jsx(Pe,{className:"w-16 h-16"})})})]})}),s.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search resources...",value:t,onChange:b=>a(b.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-800"})]})}),s.jsx("div",{className:"flex flex-wrap gap-2",children:A.map(b=>{const S=b.icon;return s.jsxs("button",{onClick:()=>e(b.value),className:`flex items-center space-x-2 px-4 py-2 rounded-xl font-medium transition-all duration-200 ${r===b.value?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white":"btn-primary"}`,children:[s.jsx(S,{className:"w-4 h-4"}),s.jsx("span",{children:b.label})]},b.value)})}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(b=>s.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-purple-200 dark:border-purple-700 hover:shadow-xl transition-all duration-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ut,{className:"w-5 h-5 text-purple-600"}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E(b.category)}`,children:b.category})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ss,{className:"w-4 h-4 text-yellow-500 fill-current"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:b.rating.toFixed(1)})]})]}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:b.title}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4 leading-relaxed line-clamp-3",children:[b.script.substring(0,150),"..."]}),s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsx("span",{children:b.duration})]}),s.jsx("span",{className:`font-medium ${D(b.difficulty)}`,children:b.difficulty})]})}),n===b.id&&s.jsxs(N.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Now Playing"}),s.jsxs("span",{className:"text-sm text-gray-500",children:[I(o)," / ",I(c)]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3",children:s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${c?o/c*100:0}%`}})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{className:"p-1 hover:bg-purple-100 dark:hover:bg-purple-800 rounded",children:s.jsx(ru,{className:"w-4 h-4"})}),s.jsx("button",{className:"p-1 hover:bg-purple-100 dark:hover:bg-purple-800 rounded",children:s.jsx(au,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xt,{className:"w-4 h-4"}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:u,onChange:S=>{const O=parseFloat(S.target.value);h(O),v.current&&(v.current.volume=O)},className:"w-16"})]})]})]}),s.jsx("button",{onClick:()=>T(b),className:"w-full flex items-center justify-center space-x-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold py-3 rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-200",children:n===b.id?s.jsxs(s.Fragment,{children:[s.jsx(Xt,{className:"w-5 h-5"}),s.jsx("span",{children:"Pause"})]}):s.jsxs(s.Fragment,{children:[s.jsx(es,{className:"w-5 h-5"}),s.jsx("span",{children:"Play"})]})})]},b.id))}),P.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ut,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"No resources found"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-500 mb-6",children:"Try adjusting your search or generate new AI content."}),s.jsx("button",{onClick:j,disabled:x,className:"btn-primary",children:"Generate New Content"})]})]}),m==="ambient"&&s.jsx(_u,{}),m==="crisis"&&s.jsx(Su,{})]},m)})]})},Cu=()=>{const{user:r,logout:e,updateProfile:t}=ae(),[a,n]=p.useState("profile");p.useState(!1);const[i,o]=p.useState({name:(r==null?void 0:r.name)||"",email:(r==null?void 0:r.email)||"",country:(r==null?void 0:r.country)||"US",phone:"",emergencyContact:"",emergencyPhone:""}),[l,c]=p.useState({dailyReminders:!0,moodTracking:!0,journalPrompts:!0,communityUpdates:!1,crisisAlerts:!0,parentalNotifications:!1}),[d,u]=p.useState({anonymousCommunity:!0,dataSharing:!1,locationTracking:!1,audioRecording:!0,analyticsOptOut:!1}),h=[{code:"US",name:"United States"},{code:"CA",name:"Canada"},{code:"GB",name:"United Kingdom"},{code:"AU",name:"Australia"},{code:"IN",name:"India"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"JP",name:"Japan"},{code:"BR",name:"Brazil"},{code:"MX",name:"Mexico"},{code:"ES",name:"Spain"},{code:"IT",name:"Italy"},{code:"NL",name:"Netherlands"},{code:"SE",name:"Sweden"},{code:"NO",name:"Norway"},{code:"DK",name:"Denmark"},{code:"FI",name:"Finland"},{code:"CH",name:"Switzerland"},{code:"AT",name:"Austria"},{code:"BE",name:"Belgium"},{code:"IE",name:"Ireland"},{code:"NZ",name:"New Zealand"},{code:"SG",name:"Singapore"},{code:"HK",name:"Hong Kong"},{code:"KR",name:"South Korea"},{code:"TW",name:"Taiwan"},{code:"TH",name:"Thailand"},{code:"MY",name:"Malaysia"},{code:"PH",name:"Philippines"},{code:"ID",name:"Indonesia"},{code:"VN",name:"Vietnam"},{code:"ZA",name:"South Africa"},{code:"EG",name:"Egypt"},{code:"NG",name:"Nigeria"},{code:"KE",name:"Kenya"},{code:"MA",name:"Morocco"},{code:"GH",name:"Ghana"},{code:"TN",name:"Tunisia"},{code:"DZ",name:"Algeria"},{code:"AE",name:"United Arab Emirates"},{code:"SA",name:"Saudi Arabia"},{code:"IL",name:"Israel"},{code:"TR",name:"Turkey"},{code:"RU",name:"Russia"},{code:"PL",name:"Poland"},{code:"CZ",name:"Czech Republic"},{code:"HU",name:"Hungary"},{code:"RO",name:"Romania"},{code:"BG",name:"Bulgaria"},{code:"HR",name:"Croatia"},{code:"SI",name:"Slovenia"},{code:"SK",name:"Slovakia"},{code:"LT",name:"Lithuania"},{code:"LV",name:"Latvia"},{code:"EE",name:"Estonia"},{code:"GR",name:"Greece"},{code:"PT",name:"Portugal"},{code:"CY",name:"Cyprus"},{code:"MT",name:"Malta"},{code:"LU",name:"Luxembourg"},{code:"IS",name:"Iceland"},{code:"AR",name:"Argentina"},{code:"CL",name:"Chile"},{code:"CO",name:"Colombia"},{code:"PE",name:"Peru"},{code:"UY",name:"Uruguay"},{code:"PY",name:"Paraguay"},{code:"BO",name:"Bolivia"},{code:"EC",name:"Ecuador"},{code:"VE",name:"Venezuela"},{code:"CR",name:"Costa Rica"},{code:"PA",name:"Panama"},{code:"GT",name:"Guatemala"},{code:"HN",name:"Honduras"},{code:"SV",name:"El Salvador"},{code:"NI",name:"Nicaragua"},{code:"BZ",name:"Belize"},{code:"JM",name:"Jamaica"},{code:"TT",name:"Trinidad and Tobago"},{code:"BB",name:"Barbados"},{code:"BS",name:"Bahamas"},{code:"DO",name:"Dominican Republic"},{code:"HT",name:"Haiti"},{code:"CU",name:"Cuba"},{code:"PR",name:"Puerto Rico"}],f=[{id:"profile",label:"Profile",icon:ft},{id:"notifications",label:"Notifications",icon:ct},{id:"privacy",label:"Privacy & Security",icon:He},{id:"data",label:"Data Management",icon:Ps}],g=()=>{t({name:i.name,email:i.email,country:i.country}),alert("Profile updated successfully!")},x=()=>{alert("Data export started. You will receive an email when ready.")},w=()=>{confirm("Are you sure you want to delete your account? This action cannot be undone.")&&e()};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Manage your account, privacy, and preferences"})]}),s.jsxs("div",{className:"grid lg:grid-cols-4 gap-8",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsx("div",{className:"card p-6",children:s.jsx("nav",{className:"space-y-2",children:f.map(m=>{const y=m.icon;return s.jsxs("button",{onClick:()=>n(m.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-all duration-200 ${a===m.id?"btn-gradient text-white":"text-gray-600 dark:text-gray-300 interactive-element"}`,children:[s.jsx(y,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:m.label})]},m.id)})})})}),s.jsx("div",{className:"lg:col-span-3",children:s.jsxs("div",{className:"card p-8",children:[a==="profile"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"Profile Information"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),s.jsx("input",{type:"text",value:i.name,onChange:m=>o(y=>({...y,name:m.target.value})),className:"w-full p-3 rounded-xl"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",value:i.email,onChange:m=>o(y=>({...y,email:m.target.value})),className:"w-full p-3 rounded-xl"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Country"}),s.jsxs("div",{className:"relative",children:[s.jsx($t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("select",{value:i.country,onChange:m=>o(y=>({...y,country:m.target.value})),className:"w-full pl-12 pr-4 py-3 rounded-xl appearance-none",children:h.map(m=>s.jsx("option",{value:m.code,children:m.name},m.code))})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Used for providing relevant crisis support contacts"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number (Optional)"}),s.jsx("input",{type:"tel",value:i.phone,onChange:m=>o(y=>({...y,phone:m.target.value})),className:"w-full p-3 rounded-xl",placeholder:"+1 (555) 123-4567"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Emergency Contact Name"}),s.jsx("input",{type:"text",value:i.emergencyContact,onChange:m=>o(y=>({...y,emergencyContact:m.target.value})),className:"w-full p-3 rounded-xl",placeholder:"Parent, Guardian, or Trusted Friend"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Emergency Contact Phone"}),s.jsx("input",{type:"tel",value:i.emergencyPhone,onChange:m=>o(y=>({...y,emergencyPhone:m.target.value})),className:"w-full p-3 rounded-xl",placeholder:"+1 (555) 123-4567"})]})]}),s.jsxs("button",{onClick:g,className:"flex items-center space-x-2 btn-gradient px-6 py-3",children:[s.jsx(tu,{className:"w-5 h-5"}),s.jsx("span",{children:"Save Changes"})]})]}),a==="notifications"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"Notification Preferences"}),s.jsx("div",{className:"space-y-4",children:Object.entries(l).map(([m,y])=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:m.replace(/([A-Z])/g," $1").replace(/^./,v=>v.toUpperCase())}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[m==="dailyReminders"&&"Gentle reminders to check in with your mental health",m==="moodTracking"&&"Prompts to log your daily mood and activities",m==="journalPrompts"&&"Inspiring prompts for your journal entries",m==="communityUpdates"&&"Updates from community posts and discussions",m==="crisisAlerts"&&"Emergency notifications and crisis support resources",m==="parentalNotifications"&&"Allow notifications to emergency contacts if concerning patterns detected"]})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:y,onChange:v=>c(k=>({...k,[m]:v.target.checked})),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-600 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gradient-to-r peer-checked:from-purple-600 peer-checked:to-indigo-600"})]})]},m))})]}),a==="privacy"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"Privacy & Security"}),s.jsx("div",{className:"space-y-4",children:Object.entries(d).map(([m,y])=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:m.replace(/([A-Z])/g," $1").replace(/^./,v=>v.toUpperCase())}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[m==="anonymousCommunity"&&"Post anonymously in community discussions",m==="dataSharing"&&"Share anonymized data for mental health research",m==="locationTracking"&&"Use location for context-aware mood tracking",m==="audioRecording"&&"Allow voice-to-text features for journal entries",m==="analyticsOptOut"&&"Opt out of usage analytics and improvement data"]})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:y,onChange:v=>u(k=>({...k,[m]:v.target.checked})),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-600 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gradient-to-r peer-checked:from-purple-600 peer-checked:to-indigo-600"})]})]},m))}),s.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Is,{className:"w-6 h-6 text-purple-600 dark:text-purple-400 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-purple-800 dark:text-purple-200 mb-2",children:"Data Encryption"}),s.jsx("p",{className:"text-purple-700 dark:text-purple-300 text-sm",children:"All your personal data, including journal entries and mood tracking information, is encrypted end-to-end. Only you have access to your unencrypted data."})]})]})})]}),a==="data"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"Data Management"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Ps,{className:"w-6 h-6 text-green-600 dark:text-green-400 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"Export Your Data"}),s.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm mb-4",children:"Download all your data including journal entries, mood tracking, and settings."}),s.jsx("button",{onClick:x,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Export Data"})]})]})}),s.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(cu,{className:"w-6 h-6 text-purple-600 dark:text-purple-400 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-purple-800 dark:text-purple-200 mb-2",children:"Import Data"}),s.jsx("p",{className:"text-purple-700 dark:text-purple-300 text-sm mb-4",children:"Import data from other mental health apps or previous exports."}),s.jsx("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Import Data"})]})]})})]}),s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-700 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(zs,{className:"w-6 h-6 text-red-600 dark:text-red-400 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-200 mb-2",children:"Delete Account"}),s.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),s.jsx("button",{onClick:w,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Delete Account"})]})]})})]})]})})]})]})},Eu=()=>{const[r,e]=p.useState("overview"),t={totalUsers:12847,activeUsers:8934,newUsers:234,crisisInterventions:12},a=[{day:"Mon",users:1200,posts:45,crises:2},{day:"Tue",users:1350,posts:52,crises:1},{day:"Wed",users:1180,posts:38,crises:3},{day:"Thu",users:1420,posts:61,crises:0},{day:"Fri",users:1380,posts:48,crises:2},{day:"Sat",users:1150,posts:35,crises:1},{day:"Sun",users:1050,posts:29,crises:1}],n=[{name:"General Discussion",value:35,color:"#3b82f6"},{name:"Anxiety Support",value:25,color:"#8b5cf6"},{name:"Depression Support",value:20,color:"#06b6d4"},{name:"Success Stories",value:15,color:"#10b981"},{name:"Crisis Support",value:5,color:"#ef4444"}],i=[{id:"1",type:"Post",content:"Inappropriate language detected in community post",author:"Anonymous User",timestamp:"2 hours ago",severity:"Medium",status:"Pending"},{id:"2",type:"Comment",content:"Potential cyberbullying detected",author:"User123",timestamp:"4 hours ago",severity:"High",status:"Under Review"},{id:"3",type:"Post",content:"Crisis keywords detected - user may need immediate help",author:"Anonymous User",timestamp:"6 hours ago",severity:"Critical",status:"Escalated"}],o=[{name:"Content Moderation AI",status:"Active",uptime:"99.8%",lastCheck:"2 min ago"},{name:"Crisis Detection AI",status:"Active",uptime:"99.9%",lastCheck:"1 min ago"},{name:"Sentiment Analysis AI",status:"Active",uptime:"99.7%",lastCheck:"3 min ago"},{name:"Cyberbullying Detection",status:"Active",uptime:"99.5%",lastCheck:"1 min ago"},{name:"Privacy Monitor AI",status:"Warning",uptime:"98.2%",lastCheck:"15 min ago"}],l=[{id:"overview",label:"Overview",icon:Hs},{id:"users",label:"User Management",icon:gt},{id:"content",label:"Content Moderation",icon:He},{id:"ai-agents",label:"AI Agents",icon:Pe},{id:"reports",label:"Reports & Analytics",icon:Cr}],c=u=>{switch(u){case"Critical":return"bg-red-100 text-red-800";case"High":return"bg-orange-100 text-orange-800";case"Medium":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},d=u=>{switch(u){case"Active":return"text-green-600";case"Warning":return"text-yellow-600";case"Error":return"text-red-600";default:return"text-gray-600"}};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Monitor platform health, user safety, and AI agent performance"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-100 text-sm",children:"Total Users"}),s.jsx("p",{className:"text-3xl font-bold",children:t.totalUsers.toLocaleString()})]}),s.jsx(gt,{className:"w-8 h-8 text-blue-200"})]})}),s.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-green-100 text-sm",children:"Active Users (24h)"}),s.jsx("p",{className:"text-3xl font-bold",children:t.activeUsers.toLocaleString()})]}),s.jsx(Cr,{className:"w-8 h-8 text-green-200"})]})}),s.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-purple-100 text-sm",children:"New Users (7d)"}),s.jsx("p",{className:"text-3xl font-bold",children:t.newUsers})]}),s.jsx(rs,{className:"w-8 h-8 text-purple-200"})]})}),s.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-2xl p-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-red-100 text-sm",children:"Crisis Interventions"}),s.jsx("p",{className:"text-3xl font-bold",children:t.crisisInterventions})]}),s.jsx(me,{className:"w-8 h-8 text-red-200"})]})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(u=>{const h=u.icon;return s.jsxs("button",{onClick:()=>e(u.id),className:`flex items-center space-x-2 px-4 py-2 rounded-xl font-medium transition-all duration-200 ${r===u.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-white/80 text-gray-600 hover:bg-purple-50"}`,children:[s.jsx(h,{className:"w-4 h-4"}),s.jsx("span",{children:u.label})]},u.id)})}),s.jsxs("div",{className:"space-y-8",children:[r==="overview"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-purple-100",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Weekly Activity"}),s.jsx(Et,{width:"100%",height:300,children:s.jsxs(Or,{data:a,children:[s.jsx(ms,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(ps,{dataKey:"day",stroke:"#6b7280"}),s.jsx(fs,{stroke:"#6b7280"}),s.jsx(Tt,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"}}),s.jsx(gs,{type:"monotone",dataKey:"users",stroke:"#8b5cf6",strokeWidth:3}),s.jsx(gs,{type:"monotone",dataKey:"posts",stroke:"#10b981",strokeWidth:3})]})})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-purple-100",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Community Categories"}),s.jsx(Et,{width:"100%",height:300,children:s.jsxs(Va,{children:[s.jsx(Ya,{data:n,cx:"50%",cy:"50%",outerRadius:100,dataKey:"value",label:({name:u,value:h})=>`${u}: ${h}%`,children:n.map((u,h)=>s.jsx(Ka,{fill:u.color},`cell-${h}`))}),s.jsx(Tt,{})]})})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-purple-100",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"AI Agent Status"}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((u,h)=>s.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:u.name}),s.jsx("span",{className:`font-semibold ${d(u.status)}`,children:u.status})]}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:["Uptime: ",u.uptime]}),s.jsxs("p",{children:["Last Check: ",u.lastCheck]})]})]},h))})]})]}),r==="content"&&s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-purple-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Flagged Content"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(Ma,{className:"w-4 h-4"}),s.jsxs("span",{children:[i.length," items pending review"]})]})]}),s.jsx("div",{className:"space-y-4",children:i.map(u=>s.jsxs("div",{className:"border border-gray-200 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:u.type}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c(u.severity)}`,children:u.severity})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsx("span",{children:u.timestamp})]})]}),s.jsx("p",{className:"text-gray-700 mb-3",children:u.content}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs("span",{children:["Author: ",u.author]}),s.jsxs("span",{className:"ml-4",children:["Status: ",u.status]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{className:"flex items-center space-x-1 px-3 py-1 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors",children:[s.jsx(Rd,{className:"w-4 h-4"}),s.jsx("span",{children:"Approve"})]}),s.jsxs("button",{className:"flex items-center space-x-1 px-3 py-1 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:[s.jsx(pu,{className:"w-4 h-4"}),s.jsx("span",{children:"Remove"})]})]})]})]},u.id))})]}),r==="ai-agents"&&s.jsx("div",{className:"space-y-6",children:o.map((u,h)=>s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-purple-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:u.name}),s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${u.status==="Active"?"bg-green-100 text-green-700":u.status==="Warning"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:u.status})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Uptime"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.uptime})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Last Health Check"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.lastCheck})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Actions Today"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Math.floor(Math.random()*1e3)})]})]})]},h))}),r==="users"&&s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-purple-100",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"User Management"}),s.jsx("p",{className:"text-gray-600",children:"User management features would be implemented here, including user search, account status management, and user activity monitoring."})]}),r==="reports"&&s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-purple-100",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Reports & Analytics"}),s.jsx("p",{className:"text-gray-600",children:"Detailed analytics and reporting features would be implemented here, including user engagement metrics, platform health reports, and AI performance analytics."})]})]})]})},Tu=()=>{const{psychiatrists:r,appointments:e,isLoading:t,searchPsychiatrists:a,scheduleAppointment:n,startEmergencySession:i,getAvailableSlots:o,connectToSession:l}=Sd(),[c,d]=p.useState(""),[u,h]=p.useState(""),[f,g]=p.useState(!1),[x,w]=p.useState(null),[m,y]=p.useState(!1),[v,k]=p.useState(new Date),[j,A]=p.useState(null),[P,E]=p.useState("video"),[D,T]=p.useState(!1),I=["All Specialties","Anxiety Disorders","Depression","PTSD","Trauma Therapy","Addiction","Family Counseling","Teen Counseling","Eating Disorders","Bipolar Disorder","Schizophrenia"],B=a(u==="All Specialties"?void 0:u,f).filter(C=>C.name.toLowerCase().includes(c.toLowerCase())||C.specialties.some($=>$.toLowerCase().includes(c.toLowerCase()))),b=e.filter(C=>C.status==="scheduled"&&C.date>new Date),S=async()=>{if(!(!x||!j))try{await n(x,j,P),y(!1),w(null),A(null)}catch{}},O=async()=>{try{await i(),T(!1)}catch{}},F=(C,$)=>o(C,$),G=C=>{switch(C){case"video":return du;case"audio":return qe;case"chat":return Zt}},Ze=C=>{switch(C){case"available":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300";case"busy":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-300";case"offline":return"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300";default:return"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300"}};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs(N.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Connect with Licensed Psychiatrists"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Get professional support from licensed mental health professionals. Schedule sessions, connect instantly, or access emergency support when you need it most."})]}),s.jsx(N.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-gradient-to-r from-rose-500 to-pink-600 dark:from-rose-600 dark:to-pink-700 rounded-2xl p-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:s.jsx(me,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-1",children:"Need Immediate Support?"}),s.jsx("p",{className:"text-rose-100",children:"Connect with a crisis counselor right now. Available 24/7 for emergency situations."})]})]}),s.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>T(!0),className:"bg-white text-rose-600 px-6 py-3 rounded-xl font-semibold hover:shadow-lg transition-all duration-200",children:"Emergency Support"})]})}),b.length>0&&s.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-sage-100 dark:border-gray-700",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Upcoming Appointments"}),s.jsx("div",{className:"space-y-3",children:b.map(C=>{const $=r.find(ne=>ne.id===C.psychiatristId);return $?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-sage-50 dark:bg-gray-700 rounded-xl",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("img",{src:$.profileImage,alt:$.name,className:"w-12 h-12 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:$.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:Q(C.date,"MMM d, yyyy • h:mm a")})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"px-3 py-1 bg-sage-100 dark:bg-gray-600 text-sage-700 dark:text-sage-300 rounded-full text-sm",children:C.type}),s.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>l(C.id),className:"bg-sage-600 text-white px-4 py-2 rounded-lg hover:bg-sage-700 transition-colors",children:"Join Session"})]})]},C.id):null})})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search psychiatrists by name or specialty...",value:c,onChange:C=>d(C.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-sage-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("select",{value:u,onChange:C=>h(C.target.value),className:"px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-sage-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:I.map(C=>s.jsx("option",{value:C,children:C},C))}),s.jsxs("label",{className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300",children:[s.jsx("input",{type:"checkbox",checked:f,onChange:C=>g(C.target.checked),className:"w-4 h-4 text-sage-600 border-gray-300 rounded focus:ring-sage-500"}),s.jsx("span",{children:"Available now"})]})]})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:t?Array.from({length:6}).map((C,$)=>s.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 rounded-2xl p-6 shadow-lg border border-sage-100 dark:border-gray-700 animate-pulse",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-4"}),s.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded mb-2"}),s.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded mb-4"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded"}),s.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded"})]})]},$)):B.length===0?s.jsxs("div",{className:"col-span-full text-center py-12",children:[s.jsx(Js,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"No psychiatrists found"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-500",children:"Try adjusting your search criteria or filters."})]}):B.map(C=>s.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-5},className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-sage-100 dark:border-gray-700 hover:shadow-xl transition-all duration-200",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("img",{src:C.profileImage,alt:C.name,className:"w-20 h-20 rounded-full object-cover mx-auto mb-3 border-4 border-sage-100 dark:border-gray-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:C.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:C.title}),s.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${Ze(C.availability)}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${C.availability==="available"?"bg-green-500":C.availability==="busy"?"bg-yellow-500":"bg-gray-500"}`}),C.availability==="available"?"Available Now":C.availability==="busy"?"Busy":"Offline"]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ss,{className:"w-4 h-4 text-yellow-500 fill-current"}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C.rating})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300",children:[s.jsx(Td,{className:"w-4 h-4"}),s.jsxs("span",{children:[C.experience," years"]})]})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[C.specialties.slice(0,2).map(($,ne)=>s.jsx("span",{className:"px-2 py-1 bg-sage-100 dark:bg-gray-700 text-sage-700 dark:text-sage-300 rounded-full text-xs",children:$},ne)),C.specialties.length>2&&s.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full text-xs",children:["+",C.specialties.length-2," more"]})]})}),s.jsxs("div",{className:"flex items-center space-x-1 mb-4 text-sm text-gray-600 dark:text-gray-300",children:[s.jsx(Jd,{className:"w-4 h-4"}),s.jsx("span",{children:C.languages.join(", ")})]}),s.jsx("div",{className:"flex items-center justify-center space-x-2 mb-4",children:C.sessionTypes.map($=>{const ne=G($);return s.jsx("div",{className:"p-2 bg-sage-50 dark:bg-gray-700 rounded-lg",title:`${$} sessions available`,children:s.jsx(ne,{className:"w-4 h-4 text-sage-600 dark:text-sage-400"})},$)})}),s.jsxs("div",{className:"text-center mb-4",children:[s.jsxs("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",C.hourlyRate]}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"/hour"})]}),s.jsxs("div",{className:"text-center mb-4 text-sm text-gray-600 dark:text-gray-300",children:[s.jsx(Re,{className:"w-4 h-4 inline mr-1"}),"Next available: ",Q(C.nextAvailable,"MMM d, h:mm a")]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{w(C.id),y(!0)},className:"w-full bg-gradient-to-r from-sage-600 to-lavender-600 text-white py-3 rounded-xl font-semibold hover:shadow-lg transition-all duration-200",children:"Schedule Appointment"}),C.availability==="available"&&s.jsx(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-white dark:bg-gray-700 border-2 border-sage-200 dark:border-gray-600 text-sage-700 dark:text-sage-300 py-2 rounded-xl font-medium hover:bg-sage-50 dark:hover:bg-gray-600 transition-all duration-200",children:"Connect Now"})]})]},C.id))}),s.jsx(ue,{children:m&&x&&s.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:s.jsx(N.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(()=>{const C=r.find($=>$.id===x);return C?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Book Appointment"}),s.jsx("button",{onClick:()=>y(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(Qe,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex items-center space-x-4 mb-6 p-4 bg-sage-50 dark:bg-gray-700 rounded-xl",children:[s.jsx("img",{src:C.profileImage,alt:C.name,className:"w-16 h-16 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:C.name}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:C.title}),s.jsxs("p",{className:"text-sage-600 dark:text-sage-400 font-medium",children:["$",C.hourlyRate,"/hour"]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Session Type"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:C.sessionTypes.map($=>{const ne=G($);return s.jsxs("button",{onClick:()=>E($),className:`p-4 border-2 rounded-xl transition-all duration-200 ${P===$?"border-sage-500 bg-sage-50 dark:bg-sage-900 text-sage-700 dark:text-sage-300":"border-gray-200 dark:border-gray-600 hover:border-sage-300 dark:hover:border-sage-500"}`,children:[s.jsx(ne,{className:"w-6 h-6 mx-auto mb-2"}),s.jsx("span",{className:"text-sm font-medium capitalize",children:$})]},$)})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select Date"}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:Array.from({length:14},($,ne)=>{const Xe=mc(new Date,ne),qa=kr(Xe,v),Wa=kr(Xe,new Date);return s.jsxs("button",{onClick:()=>k(Xe),className:`p-3 text-center rounded-lg transition-all duration-200 ${qa?"bg-sage-600 text-white":Wa?"bg-sage-100 dark:bg-sage-800 text-sage-700 dark:text-sage-300":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:Q(Xe,"EEE")}),s.jsx("div",{className:"font-medium",children:Q(Xe,"d")})]},ne)})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Available Times"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:F(C.id,v).map($=>s.jsx("button",{onClick:()=>A($),className:`p-3 text-center rounded-lg transition-all duration-200 ${(j==null?void 0:j.getTime())===$.getTime()?"bg-sage-600 text-white":"border border-gray-200 dark:border-gray-600 hover:border-sage-300 dark:hover:border-sage-500"}`,children:Q($,"h:mm a")},$.getTime()))})]}),s.jsx(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:S,disabled:!j||t,className:"w-full bg-gradient-to-r from-sage-600 to-lavender-600 text-white py-4 rounded-xl font-semibold hover:shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:t?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Booking..."]}):`Book Appointment - $${C.hourlyRate}`})]}):null})()})})}),s.jsx(ue,{children:D&&s.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:s.jsx(N.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-8 max-w-md w-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(me,{className:"w-8 h-8 text-rose-600 dark:text-rose-400"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Emergency Support"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"You'll be connected with a crisis counselor immediately. This service is available 24/7 for urgent mental health support."}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:O,disabled:t,className:"w-full bg-rose-600 text-white py-3 rounded-xl font-semibold hover:bg-rose-700 transition-colors disabled:opacity-50",children:t?"Connecting...":"Connect Now"}),s.jsx("button",{onClick:()=>T(!1),className:"w-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 py-3 rounded-xl font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]}),s.jsx("div",{className:"mt-6 p-4 bg-rose-50 dark:bg-rose-900/20 rounded-xl",children:s.jsxs("p",{className:"text-sm text-rose-700 dark:text-rose-300",children:[s.jsx("strong",{children:"Crisis Hotlines:"}),s.jsx("br",{}),"National: 988",s.jsx("br",{}),"Crisis Text: Text HOME to 741741"]})})]})})})})]})},Pu=()=>{const[r,e]=p.useState(!1),[t,a]=p.useState("inhale"),[n,i]=p.useState(4);p.useEffect(()=>{if(!r)return;const c=[{name:"inhale",duration:4e3,nextCount:4},{name:"hold",duration:4e3,nextCount:4},{name:"exhale",duration:4e3,nextCount:4},{name:"pause",duration:2e3,nextCount:4}],d=c.find(f=>f.name===t);if(!d)return;const u=setTimeout(()=>{const g=(c.findIndex(x=>x.name===t)+1)%c.length;a(c[g].name),i(c[g].nextCount)},d.duration),h=setInterval(()=>{i(f=>f>0?f-1:d.nextCount)},d.duration/d.nextCount);return()=>{clearTimeout(u),clearInterval(h)}},[r,t]);const o=()=>{switch(t){case"inhale":return"Breathe In";case"hold":return"Hold";case"exhale":return"Breathe Out";case"pause":return"Pause"}},l=()=>{switch(t){case"inhale":return"from-blue-400 to-cyan-400";case"hold":return"from-purple-400 to-pink-400";case"exhale":return"from-green-400 to-emerald-400";case"pause":return"from-gray-400 to-slate-400"}};return s.jsxs("div",{className:"flex flex-col items-center space-y-8 p-8",children:[s.jsx("div",{className:"relative",children:s.jsx(N.div,{className:`w-48 h-48 rounded-full bg-gradient-to-br ${l()} flex items-center justify-center shadow-2xl`,animate:{scale:t==="inhale"?1.2:t==="exhale"?.8:1},transition:{duration:4,ease:"easeInOut"},children:s.jsxs("div",{className:"text-center text-white",children:[s.jsx("p",{className:"text-2xl font-bold mb-2",children:o()}),s.jsx("p",{className:"text-4xl font-bold",children:n})]})})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"4-4-4-4 Breathing"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Follow the circle and breathe deeply to reduce anxiety"}),s.jsxs("button",{onClick:()=>e(!r),className:"btn-primary flex items-center space-x-2",children:[r?s.jsx(Xt,{className:"w-5 h-5"}):s.jsx(es,{className:"w-5 h-5"}),s.jsx("span",{children:r?"Pause":"Start"})]})]})]})},Iu=()=>{const[r,e]=p.useState(Array(9).fill("")),[t,a]=p.useState(!0),n=Ou(r),i=c=>{if(r[c]||n)return;const d=[...r];d[c]=t?"X":"O",e(d),a(!t)},o=()=>{e(Array(9).fill("")),a(!0)},l=c=>s.jsx("button",{onClick:()=>i(c),className:"w-20 h-20 text-2xl font-bold border border-gray-400 flex items-center justify-center hover:bg-gray-100 transition",children:r[c]});return s.jsxs("div",{className:"flex flex-col items-center mt-6 space-y-4",children:[s.jsx("h1",{className:"text-3xl font-semibold text-center",children:"Tic Tac Toe"}),s.jsx("div",{className:"grid grid-cols-3 gap-1",children:Array.from({length:9},(c,d)=>l(d))}),s.jsx("div",{className:"text-xl",children:n?`Winner: ${n}`:r.every(Boolean)?"Draw!":`Next Player: ${t?"X":"O"}`}),s.jsx("button",{onClick:o,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Restart"})]})};function Ou(r){const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let[t,a,n]of e)if(r[t]&&r[t]===r[a]&&r[t]===r[n])return r[t];return null}const Ru=()=>{const[r,e]=p.useState([]),[t,a]=p.useState("#8b5cf6"),n=["#8b5cf6","#06b6d4","#10b981","#f59e0b","#ef4444","#ec4899"],i=l=>{const c=l.currentTarget.getBoundingClientRect(),d=l.clientX-c.left,u=l.clientY-c.top;e(h=>[...h,{id:Date.now(),x:d-16,y:u-16,color:t}])},o=()=>{e([])};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Digital Zen Garden"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Click to place stones and create your peaceful garden"})]}),s.jsx("div",{className:"flex justify-center space-x-2 mb-4",children:n.map(l=>s.jsx("button",{onClick:()=>a(l),className:`w-8 h-8 rounded-full border-2 transition-all ${t===l?"border-gray-800 scale-110":"border-gray-300"}`,style:{backgroundColor:l}},l))}),s.jsxs("div",{className:"relative w-full h-64 bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl border-2 border-amber-200 dark:border-amber-700 cursor-crosshair overflow-hidden",onClick:i,children:[r.map(l=>s.jsx(N.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},className:"absolute w-8 h-8 rounded-full shadow-lg",style:{left:l.x,top:l.y,backgroundColor:l.color}},l.id)),r.length===0&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400 dark:text-gray-500",children:"Click anywhere to place stones"})]}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("button",{onClick:o,className:"btn-primary flex items-center space-x-2",children:[s.jsx(La,{className:"w-4 h-4"}),s.jsx("span",{children:"Clear Garden"})]})})]})},Mu=()=>{const[r,e]=p.useState([]),[t,a]=p.useState([]),[n,i]=p.useState(0),[o,l]=p.useState(!1),c=["🌸","🌿","🦋","🌙","⭐","🌊","🍃","🌺"],d=()=>{const h=[...c,...c].map((f,g)=>({id:g,icon:f,isFlipped:!1,isMatched:!1})).sort(()=>Math.random()-.5);e(h),a([]),i(0),l(!1)};p.useEffect(()=>{d()},[]),p.useEffect(()=>{if(t.length===2){const[h,f]=t;r[h].icon===r[f].icon?(e(g=>g.map(x=>x.id===h||x.id===f?{...x,isMatched:!0}:x)),a([]),r.filter(g=>!g.isMatched).length===2&&l(!0)):setTimeout(()=>{e(g=>g.map(x=>x.id===h||x.id===f?{...x,isFlipped:!1}:x)),a([])},1e3),i(g=>g+1)}},[t,r]);const u=h=>{t.length===2||r[h].isFlipped||r[h].isMatched||(e(f=>f.map(g=>g.id===h?{...g,isFlipped:!0}:g)),a(f=>[...f,h]))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Mindful Memory"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Match pairs of peaceful symbols to train focus and memory"}),s.jsxs("div",{className:"flex justify-center space-x-4 text-gray-600 dark:text-gray-300 sm",children:[s.jsxs("span",{children:["Moves: ",n]}),o&&s.jsx("span",{className:"text-green-600 font-semibold",children:"Completed! 🎉"})]})]}),s.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-sm mx-auto",children:r.map(h=>s.jsx(N.div,{className:`memory-card ${h.isFlipped||h.isMatched?"flipped":""}`,onClick:()=>u(h.id),whileHover:{scale:1.05},whileTap:{scale:.95},children:s.jsx("span",{className:"text-2xl",children:h.isFlipped||h.isMatched?h.icon:"?"})},h.id))}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("button",{onClick:d,className:"btn-primary flex items-center space-x-2",children:[s.jsx(La,{className:"w-4 h-4"}),s.jsx("span",{children:"New Game"})]})})]})},Du=()=>{const[r,e]=p.useState("#8b5cf6"),[t,a]=p.useState(""),n=[{color:"#8b5cf6",name:"Purple",mood:"Spiritual & Calm"},{color:"#06b6d4",name:"Cyan",mood:"Peaceful & Clear"},{color:"#10b981",name:"Green",mood:"Balanced & Growing"},{color:"#f59e0b",name:"Amber",mood:"Warm & Energetic"},{color:"#ec4899",name:"Pink",mood:"Loving & Nurturing"},{color:"#6366f1",name:"Indigo",mood:"Wise & Intuitive"}],i=o=>{e(o.color),a(o.mood)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Color Therapy"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Choose colors that resonate with your current mood"})]}),s.jsx(N.div,{className:"w-48 h-48 rounded-full mx-auto shadow-2xl",style:{backgroundColor:r},animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0}}),s.jsx("div",{className:"grid grid-cols-3 gap-4 max-w-md mx-auto",children:n.map(o=>s.jsxs(N.button,{onClick:()=>i(o),className:"p-4 rounded-xl border-2 transition-all text-center",style:{backgroundColor:o.color+"20",borderColor:r===o.color?o.color:"transparent"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[s.jsx("div",{className:"w-8 h-8 rounded-full mx-auto mb-2",style:{backgroundColor:o.color}}),s.jsx("p",{className:"text-sm font-medium",children:o.name})]},o.color))}),t&&s.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center p-4 bg-white/50 dark:bg-gray-800/50 rounded-xl",children:s.jsxs("p",{className:"text-lg font-medium",children:["Current Energy: ",t]})})]})},Lu=()=>{const[r,e]=p.useState("breathing"),t=[{id:"breathing",name:"Breathing Circle",description:"Guided breathing exercise to reduce anxiety",icon:Dd,component:Pu},{id:"tictactoe",name:"Tic Tac Toe",description:"Play a simple relaxing game with a Friend",icon:Qe,component:Iu},{id:"zen",name:"Zen Garden",description:"Create peaceful patterns with digital stones",icon:Wd,component:Ru},{id:"memory",name:"Mindful Memory",description:"Memory game with calming symbols",icon:ss,component:Mu},{id:"color",name:"Color Therapy",description:"Explore colors and their emotional effects",icon:Z,component:Du}],a=t.find(i=>i.id===r),n=a==null?void 0:a.component;return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Mindful Games"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Interactive activities designed to reduce stress, improve focus, and promote mindfulness"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:t.map(i=>{const o=i.icon;return s.jsxs(N.button,{onClick:()=>e(i.id),className:`game-card text-left ${r===i.id?"ring-2 ring-purple-500":""}`,whileHover:{y:-5},whileTap:{scale:.98},children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-lg flex items-center justify-center",children:s.jsx(o,{className:"w-5 h-5 text-white"})}),s.jsx("h3",{className:"font-semibold",children:i.name})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:i.description})]},i.id)})}),s.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg border border-purple-200 dark:border-purple-700",children:s.jsx(ue,{mode:"wait",children:s.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:n&&s.jsx(n,{})},r)})})]})},$u=({isOpen:r,onClose:e})=>{const{notifications:t,unreadCount:a,markAsRead:n,markAllAsRead:i,deleteNotification:o}=Ta(),[l,c]=p.useState("all"),d=t.filter(g=>l==="all"||!g.read),u=g=>{switch(g){case"crisis_alert":return me;case"mood_reminder":return Z;case"community_update":return Zt;case"achievement":return Ba;default:return ct}},h=(g,x)=>{if(x==="urgent")return"from-red-500 to-red-600";if(x==="high")return"from-orange-500 to-orange-600";switch(g){case"crisis_alert":return"from-red-500 to-red-600";case"mood_reminder":return"from-pink-500 to-pink-600";case"community_update":return"from-blue-500 to-blue-600";case"achievement":return"from-green-500 to-green-600";default:return"from-gray-500 to-gray-600"}},f=g=>{const x={urgent:"bg-red-100 text-red-700",high:"bg-orange-100 text-orange-700",medium:"bg-yellow-100 text-yellow-700",low:"bg-gray-100 text-gray-700"};return x[g]||x.low};return s.jsx(ue,{children:r&&s.jsxs(s.Fragment,{children:[s.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40",onClick:e}),s.jsxs(N.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl z-50 overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-green-600 p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:s.jsx(ct,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold",children:"Notifications"}),a>0&&s.jsxs("p",{className:"text-blue-100 text-sm",children:[a," unread"]})]})]}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:s.jsx(Qe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>c("all"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${l==="all"?"bg-white/20 text-white":"text-blue-100 hover:text-white"}`,children:"All"}),s.jsx("button",{onClick:()=>c("unread"),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${l==="unread"?"bg-white/20 text-white":"text-blue-100 hover:text-white"}`,children:"Unread"})]}),a>0&&s.jsxs("button",{onClick:i,className:"flex items-center space-x-1 px-3 py-1 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:[s.jsx(Od,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Mark all read"})]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:d.length===0?s.jsxs("div",{className:"text-center py-12 px-6",children:[s.jsx(ct,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:l==="unread"?"No unread notifications":"No notifications"}),s.jsx("p",{className:"text-gray-500",children:l==="unread"?"You're all caught up!":"Notifications will appear here when you receive them."})]}):s.jsx("div",{className:"p-4 space-y-3",children:d.map(g=>{const x=u(g.type),w=h(g.type,g.priority);return s.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`relative bg-white rounded-xl border-2 p-4 transition-all duration-200 hover:shadow-md ${g.read?"border-gray-200 opacity-75":"border-blue-200 shadow-sm"}`,children:[!g.read&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`w-10 h-10 bg-gradient-to-r ${w} rounded-lg flex items-center justify-center flex-shrink-0`,children:s.jsx(x,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-1",children:[s.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:g.title}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f(g.priority)}`,children:g.priority})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-2 leading-relaxed",children:g.message}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[s.jsx(Re,{className:"w-3 h-3"}),s.jsx("span",{children:Q(g.timestamp,"MMM d, h:mm a")})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[!g.read&&s.jsx("button",{onClick:()=>n(g.id),className:"p-1 text-gray-400 hover:text-green-600 transition-colors",title:"Mark as read",children:s.jsx(Md,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>o(g.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete",children:s.jsx(zs,{className:"w-4 h-4"})})]})]})]})]})]},g.id)})})})]})]})})},Uu=({isOpen:r,onClose:e})=>{const{insights:t,generateInsights:a,isProcessing:n,getPersonalizedRecommendations:i}=Ca(),{moodEntries:o,journalEntries:l}=Qt(),[c,d]=p.useState([]),[u,h]=p.useState("insights");p.useEffect(()=>{r&&f()},[r]);const f=async()=>{try{const m=await i();d(m)}catch(m){console.error("Failed to load recommendations:",m)}},g=async()=>{try{const m={moodEntries:o,journalEntries:l,lastWeek:o.slice(-7)};await a(m)}catch(m){console.error("Failed to generate insights:",m)}},x=m=>{switch(m){case"mood_trend":return rs;case"stress_alert":return me;case"recommendation":return Tr;case"positive_progress":return Ba;default:return Pe}},w=m=>{switch(m){case"mood_trend":return"from-blue-500 to-cyan-500";case"stress_alert":return"from-red-500 to-orange-500";case"recommendation":return"from-purple-500 to-pink-500";case"positive_progress":return"from-green-500 to-emerald-500";default:return"from-gray-500 to-gray-600"}};return s.jsx(ue,{children:r&&s.jsxs(s.Fragment,{children:[s.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40",onClick:e}),s.jsxs(N.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl z-50 overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:s.jsx(Pe,{className:"w-6 h-6"})}),s.jsx("h2",{className:"text-xl font-bold",children:"AI Insights"})]}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:s.jsx(Qe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>h("insights"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${u==="insights"?"bg-white/20 text-white":"text-purple-100 hover:text-white"}`,children:"Insights"}),s.jsx("button",{onClick:()=>h("recommendations"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${u==="recommendations"?"bg-white/20 text-white":"text-purple-100 hover:text-white"}`,children:"Recommendations"})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[u==="insights"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Recent Insights"}),s.jsx("button",{onClick:g,disabled:n,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50",children:s.jsx(eu,{className:`w-4 h-4 ${n?"animate-spin":""}`})})]}),t.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Pe,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500",children:"No insights available yet."}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Keep using the app to generate AI insights!"})]}):s.jsx("div",{className:"space-y-4",children:t.map(m=>{const y=x(m.type),v=w(m.type);return s.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`w-10 h-10 bg-gradient-to-r ${v} rounded-lg flex items-center justify-center flex-shrink-0`,children:s.jsx(y,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:m.title}),s.jsx("p",{className:"text-gray-600 text-sm mb-2",children:m.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:["Confidence: ",Math.round(m.confidence*100),"%"]}),m.actionable&&s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:"Actionable"})]})]})]})},m.id)})})]}),u==="recommendations"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ge,{className:"w-5 h-5 text-purple-600"}),s.jsx("h3",{className:"font-semibold text-gray-900",children:"Personalized Recommendations"})]}),c.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Tr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500",children:"Loading recommendations..."})]}):s.jsx("div",{className:"space-y-3",children:c.map((m,y)=>s.jsx(N.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:y*.1},className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-white font-bold text-sm",children:y+1})}),s.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:m})]})},y))}),s.jsx("button",{onClick:f,className:"w-full mt-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-xl hover:shadow-lg transition-all duration-200",children:"Get New Recommendations"})]})]})]})]})})},oe=({children:r})=>{const{user:e,logout:t}=ae(),{unreadCount:a}=Ta(),{theme:n,toggleTheme:i,isDark:o}=Ia(),l=Ve(),c=$s(),[d,u]=p.useState(!1),[h,f]=p.useState(!1),g=()=>{t(),c("/")},x=[{path:"/dashboard",icon:zd,label:"Dashboard"},{path:"/journal",icon:Ra,label:"Journal"},{path:"/games",icon:Gd,label:"Mindful Games"},{path:"/community",icon:gt,label:"Community"},{path:"/chat",icon:Da,label:"AI Support"},{path:"/psychiatrist",icon:Js,label:"Connect with Psychiatrist"},{path:"/resources",icon:Ut,label:"Resources"}],w=[{path:"/admin",icon:He,label:"Admin"}];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sage-50 via-white to-lavender-50 dark:from-sage-900 dark:via-gray-900 dark:to-lavender-900 transition-colors duration-300",children:[s.jsx("header",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-b border-sage-100 dark:border-gray-700 sticky top-0 z-40 transition-colors duration-300",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(N.div,{whileHover:{scale:1.05},className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:s.jsx(Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"font-bold text-xl text-purple-400 dark:text-purple-600",children:"Shanti"}),s.jsx("span",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium",children:"Find Your Peace"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300 hidden sm:block",children:["Welcome, ",e==null?void 0:e.name]}),s.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:"btn-header p-2",title:`Switch to ${o?"light":"dark"} mode`,children:o?s.jsx(Ua,{className:"w-5 h-5"}):s.jsx(Gs,{className:"w-5 h-5"})}),s.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>f(!0),className:"btn-header relative p-2",title:"AI Insights",children:s.jsx(Ge,{className:"w-5 h-5"})}),s.jsxs(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(!0),className:"btn-header relative p-2",title:"Notifications",children:[s.jsx(ct,{className:"w-5 h-5"}),a>0&&s.jsx(N.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-rose-500 text-white text-xs rounded-full flex items-center justify-center",children:a>9?"9+":a})]}),s.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c("/settings"),className:"btn-header p-2",title:"Settings",children:s.jsx(su,{className:"w-5 h-5"})}),s.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:g,className:"btn-header p-2 hover:text-rose-600 dark:hover:text-rose-400",title:"Logout",children:s.jsx(Yd,{className:"w-5 h-5"})})]})]})})}),s.jsxs("div",{className:"flex",children:[s.jsx("nav",{className:"w-64 bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm border-r border-sage-100 dark:border-gray-700 min-h-screen sticky top-16 transition-colors duration-300",children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-2",children:[x.map(m=>{const y=m.icon,v=l.pathname===m.path;return s.jsx(N.div,{whileHover:{x:4},whileTap:{scale:.98},children:s.jsxs(at,{to:m.path,className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200 ${v?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg":"text-gray-600 dark:text-gray-300 hover:bg-purple-50 dark:hover:bg-gray-700 hover:text-purple-700 dark:hover:text-purple-300"}`,children:[s.jsx(y,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:m.label})]})},m.path)}),(e==null?void 0:e.role)==="admin"&&s.jsx("div",{className:"pt-4 mt-4 border-t border-sage-100 dark:border-gray-700",children:w.map(m=>{const y=m.icon,v=l.pathname===m.path;return s.jsx(N.div,{whileHover:{x:4},whileTap:{scale:.98},children:s.jsxs(at,{to:m.path,className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200 ${v?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"text-gray-600 dark:text-gray-300 hover:bg-purple-50 dark:hover:bg-gray-700 hover:text-purple-700 dark:hover:text-purple-300"}`,children:[s.jsx(y,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:m.label})]})},m.path)})})]})})}),s.jsx("main",{className:"flex-1 p-6",children:s.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:r})})]}),s.jsx($u,{isOpen:d,onClose:()=>u(!1)}),s.jsx(Uu,{isOpen:h,onClose:()=>f(!1)})]})};function le({children:r}){const{user:e,loading:t}=ae();return t?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-sage-50 to-lavender-50 dark:from-sage-900 dark:to-lavender-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 dark:border-purple-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):e?s.jsx(s.Fragment,{children:r}):s.jsx(zr,{to:"/auth",replace:!0})}function Ir({children:r}){const{user:e,loading:t}=ae();return t?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-sage-50 to-lavender-50 dark:from-sage-900 dark:to-lavender-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 dark:border-purple-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):e?s.jsx(zr,{to:"/dashboard",replace:!0}):s.jsx(s.Fragment,{children:r})}function Bu(){return s.jsxs(zn,{children:[s.jsx(X,{path:"/",element:s.jsx(Ir,{children:s.jsx(fu,{})})}),s.jsx(X,{path:"/auth",element:s.jsx(Ir,{children:s.jsx(gu,{})})}),s.jsx(X,{path:"/dashboard",element:s.jsx(le,{children:s.jsx(oe,{children:s.jsx(bu,{})})})}),s.jsx(X,{path:"/journal",element:s.jsx(le,{children:s.jsx(oe,{children:s.jsx(wu,{})})})}),s.jsx(X,{path:"/community",element:s.jsx(le,{children:s.jsx(oe,{children:s.jsx(ju,{})})})}),s.jsx(X,{path:"/chat",element:s.jsx(le,{children:s.jsx(oe,{children:s.jsx(ku,{})})})}),s.jsx(X,{path:"/games",element:s.jsx(le,{children:s.jsx(oe,{children:s.jsx(Lu,{})})})}),s.jsx(X,{path:"/resources",element:s.jsx(le,{children:s.jsx(oe,{children:s.jsx(Au,{})})})}),s.jsx(X,{path:"/psychiatrist",element:s.jsx(le,{children:s.jsx(oe,{children:s.jsx(Tu,{})})})}),s.jsx(X,{path:"/settings",element:s.jsx(le,{children:s.jsx(oe,{children:s.jsx(Cu,{})})})}),s.jsx(X,{path:"/admin",element:s.jsx(le,{children:s.jsx(oe,{children:s.jsx(Eu,{})})})})]})}function Fu(){return s.jsx(_d,{children:s.jsx(Xn,{children:s.jsx(hc,{children:s.jsx(Nd,{children:s.jsx(Ad,{children:s.jsx(kd,{children:s.jsxs(jd,{children:[s.jsx(Bu,{}),s.jsx(zi,{position:"top-right",toastOptions:{duration:4e3,style:{background:"var(--toast-bg)",color:"var(--toast-color)",borderRadius:"12px",border:"1px solid var(--toast-border)",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"}}})]})})})})})})})}Dr(document.getElementById("root")).render(s.jsx(p.StrictMode,{children:s.jsx(Fu,{})}));
